"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[6325],{5878:function(e,l,t){t.d(l,{Z:function(){return Z}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-528c2489"),e=e(),(0,a.Cn)(),e),s={style:{padding:"20px"}},d=i((()=>(0,a._)("span",{class:"cate-title"},"全部资源",-1))),r={class:"el-dropdown-link"},m=(0,a.Uk)("添加分类"),n={id:"cate-tree"},u=["onClick"],c={class:"el-dropdown-link"},p=(0,a.Uk)("添加分类"),h=(0,a.Uk)("编辑分类"),f=(0,a.Uk)("删除分类"),g=["onClick"],b={class:"el-dropdown-link"},w=(0,a.Uk)("编辑分类"),_=(0,a.Uk)("删除分类"),y={style:{width:"400px"}},V=(0,a.Uk)("使用资源"),v=(0,a.Uk)("上传图片"),k=(0,a.Uk)("上传视频"),W=(0,a.Uk)("删除文件"),x={key:0,class:"img-box",style:{"margin-right":"20px"}},U=(0,a.Uk)("上传中"),C=["onClick"],I={key:1,width:"100",height:"100",controls:""},S=["src","type"],$=(0,a.Uk)(" 您的浏览器不支持 video 标签。 "),F={key:2,class:"user-selected"},D={class:"image-name"},q={class:"dialog-footer"},j=(0,a.Uk)("取消"),A=(0,a.Uk)("确定");function z(e,l,t,i,z,L){const P=(0,a.up)("el-icon"),M=(0,a.up)("el-dropdown-item"),B=(0,a.up)("el-dropdown-menu"),N=(0,a.up)("el-dropdown"),Z=(0,a.up)("el-aside"),O=(0,a.up)("el-button"),T=(0,a.up)("el-badge"),E=(0,a.up)("el-upload"),H=(0,a.up)("el-header"),R=(0,a.up)("el-progress"),G=(0,a.up)("el-image"),Y=(0,a.up)("el-pagination"),K=(0,a.up)("el-main"),J=(0,a.up)("el-container"),Q=(0,a.up)("el-input"),X=(0,a.up)("el-form-item"),ee=(0,a.up)("el-form"),le=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(J,{style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{width:t.needSelect?"300px":"400px",style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a._)("ul",s,[(0,a._)("li",null,[(0,a._)("div",{class:"tree-item",onClick:l[1]||(l[1]=e=>L.itemData(0))},[d,(0,a.Wm)(N,{onCommand:l[0]||(l[0]=e=>L.handleCommand(e,{id:0})),style:{float:"right"}},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"addTop"},{default:(0,a.w5)((()=>[m])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",r,[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(z.iconMore)))])),_:1})])])),_:1})])]),(0,a._)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(z.cateTree,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[e.children&&0!=e.children.length?((0,a.wg)(),(0,a.j4)(P,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)("block"==z.showSub&&e.id==z.nowSubId?z.icon:z.iconRight),{onClick:l=>L.toggleSub(e)},null,8,["onClick"]))])),_:2},1024)):(0,a.kq)("",!0),(0,a._)("div",{class:"tree-item",onClick:l=>L.itemData(e.id)},[(0,a._)("span",{class:(0,o.C_)(["cate-title",{active:z.cate_id==e.id}])},(0,o.zw)(e.name),3),(0,a.Wm)(N,{onCommand:l=>L.handleCommand(l,e),style:{float:"right"},class:(0,o.C_)({"menu-right":e.children&&0!=e.children.length})},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"add"},{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(M,{command:"edit"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(M,{command:"del"},{default:(0,a.w5)((()=>[f])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",c,[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(z.iconMore)))])),_:1})])])),_:2},1032,["onCommand","class"])],8,u),e.children&&0!=e.children.length?((0,a.wg)(),(0,a.iD)("ul",{key:1,class:"child-sub",style:(0,o.j5)({display:e.id==z.nowSubId?z.showSub:"none"})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.children,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[(0,a._)("div",{class:"tree-item",onClick:l=>L.itemData(e.id)},[(0,a._)("span",{class:(0,o.C_)(["cate-title sub-name",{active:z.cate_id==e.id}]),style:{width:"100px !important"}},(0,o.zw)(e.name),3),(0,a.Wm)(N,{onCommand:l=>L.handleCommand(l,e),style:{float:"right",top:"-16px",left:"2px"}},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"edit"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(M,{command:"del"},{default:(0,a.w5)((()=>[_])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",b,[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(z.iconMore)))])),_:1})])])),_:2},1032,["onCommand"])],8,g)])))),128))],4)):(0,a.kq)("",!0)])))),128))])])])),_:1},8,["width"]),(0,a.Wm)(K,{style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,a._)("div",y,[t.needSelect?((0,a.wg)(),(0,a.j4)(T,{key:0,value:z.selectedIds.length,class:"item",style:{"margin-right":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{type:"success",icon:"el-icon-Finished",size:"small",style:{"font-size":"12px"},disabled:!z.selectedIds.length>0,onClick:L.confirmToUse},{default:(0,a.w5)((()=>[V])),_:1},8,["disabled","onClick"])])),_:1},8,["value"])):(0,a.kq)("",!0),(0,a.Wm)(E,{class:"upload-demo",headers:z.header,action:z.uploadImgUrl,data:{cate_id:z.cate_id},"show-file-list":!1,"before-upload":L.handleBefore,"on-success":L.handleSuccess,"on-progress":L.handleProgress,limit:1},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.w5)((()=>[v])),_:1})])),_:1},8,["headers","action","data","before-upload","on-success","on-progress"]),(0,a.Wm)(E,{class:"upload-demo",headers:z.header,action:z.uploadVideoUrl,data:{cate_id:z.cate_id},"show-file-list":!1,"before-upload":L.handleBefore,"on-success":L.handleSuccess,"on-progress":L.handleProgress,limit:1},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.w5)((()=>[k])),_:1})])),_:1},8,["headers","action","data","before-upload","on-success","on-progress"]),(0,a.Wm)(O,{type:"danger",icon:"el-icon-DeleteFilled",size:"small",style:{"font-size":"12px"},disabled:!z.selectedIds.length>0,onClick:L.delFile},{default:(0,a.w5)((()=>[W])),_:1},8,["disabled","onClick"])])])),_:1}),(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a._)("div",{class:"imgList",style:(0,o.j5)(t.needSelect?"width:710px":"width:1190px")},[z.uploading?((0,a.wg)(),(0,a.iD)("div",x,[(0,a.Wm)(R,{type:"circle",percentage:z.uplodPercent},{default:(0,a.w5)((()=>[U])),_:1},8,["percentage"])])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(z.fileList,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["img-box",{"clear-margin":l%z.oneLineNum==1}]),key:e.id},[(0,a._)("div",{class:"item-box",onClick:l=>L.selectFile(e)},[1==e.file_type?((0,a.wg)(),(0,a.j4)(G,{key:0,style:{width:"100px",height:"100px"},"preview-src-list":z.srcList,src:e.url},null,8,["preview-src-list","src"])):(0,a.kq)("",!0),2==e.file_type?((0,a.wg)(),(0,a.iD)("video",I,[(0,a._)("source",{src:e.url,type:e.mine},null,8,S),$])):(0,a.kq)("",!0),-1!=z.selectedIds.indexOf(e.id)?((0,a.wg)(),(0,a.iD)("div",F," 选中 ")):(0,a.kq)("",!0)],8,C),(0,a._)("div",D,(0,o.zw)(e.filename),1)],2)))),128))],4),(0,a.Wm)(Y,{background:"",layout:"->, prev, pager, next","page-size":t.pageSize,onCurrentChange:L.handlePageChange,total:z.total},null,8,["page-size","onCurrentChange","total"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(le,{modelValue:z.dialogFormVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>z.dialogFormVisible=e),title:"分类管理",width:"500px"},{footer:(0,a.w5)((()=>[(0,a._)("span",q,[(0,a.Wm)(O,{onClick:l[3]||(l[3]=e=>z.dialogFormVisible=!1)},{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)(O,{type:"primary",onClick:L.submitCate,loading:z.loading},{default:(0,a.w5)((()=>[A])),_:1},8,["onClick","loading"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(ee,{model:z.cateForm},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{label:"分类名称","label-width":z.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{modelValue:z.cateForm.name,"onUpdate:modelValue":l[2]||(l[2]=e=>z.cateForm.name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}t(7658);var L=t(2509),P=t(558),M={props:{needSelect:{type:Boolean,default:!0},selectNum:{type:Number,default:0},fileType:{type:Number,default:1},pageSize:{type:Number,default:18}},data(){return{cate_id:0,cateForm:{pid:0,name:""},uploadImgUrl:L.Z.API_URL+"/system.attachment/uploadPicture",uploadVideoUrl:L.Z.API_URL+"/system.attachment/uploadVideo",header:{Authorization:L.Z.TOKEN_PREFIX+P.Z.cookie.get("TOKEN")},srcList:[],fileList:[],oneLineNum:10,page:1,total:1,uploading:!1,uplodPercent:0,selectedFile:[],selectedIds:[],formLabelWidth:80,dialogFormVisible:!1,loading:!1,cateTree:[],nowSubId:0,showSub:"none",icon:"el-icon-CaretBottom",iconRight:"el-icon-CaretRight",iconMore:"el-icon-MoreFilled"}},mounted(){this.getAttachmentCate(),this.needSelect&&(this.oneLineNum=6),this.getResource()},methods:{handleCommand(e,l){"add"==e?(this.cateForm.pid=l.id,this.dialogFormVisible=!0):"addTop"==e?(this.cateForm.pid=0,this.dialogFormVisible=!0):"edit"==e?(this.cateForm.id=l.id,this.cateForm.pid=l.pid,this.cateForm.name=l.name,this.dialogFormVisible=!0):"del"==e&&this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.$API.attachmentCate.del.get({id:l.id});0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg)})).catch((()=>{}))},itemData(e){this.cate_id=e,this.getResource()},toggleSub(e){this.nowSubId=e.id,this.showSub="none"===this.showSub?"block":"none"},async getAttachmentCate(){let e=await this.$API.attachmentCate.list.get();this.cateTree=e.data},async submitCate(){if(""==this.cateForm.name)return void this.$message.error("请输入分类名称");let e;this.loading=!0,e=this.cateForm.id?await this.$API.attachmentCate.edit.post(this.cateForm):await this.$API.attachmentCate.add.post(this.cateForm),this.loading=!1,0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg),this.dialogFormVisible=!1},async getResource(){let e=await this.$API.attachment.list.get({cate_id:this.cate_id,page:this.page,limit:this.pageSize});0==e.code&&(this.fileList=e.data.rows,this.total=e.data.total)},handlePageChange(e){this.page=e,this.getResource()},handleBefore(){this.uploading=!0},handleSuccess(){this.uploading=!1,this.$message.success("上传成功"),this.getResource()},handleProgress(e){this.uplodPercent=e.percent},previewPic(e){this.srcList=[],this.srcList.push(e)},selectFile(e){if(this.needSelect&&this.fileType!=parseInt(e.file_type)){let e="图片";return 2==this.fileType&&(e="视频"),void this.$message.error("只可以选择"+e)}if(-1!=this.selectedIds.indexOf(e.id))this.selectedIds.splice(this.selectedIds.indexOf(e.id),1),this.selectedFile.splice(this.selectedIds.indexOf(e.id),1);else{if(this.needSelect&&this.selectedIds.length+1>this.selectNum)return void this.$message.error("最多选则"+this.selectNum+"个");this.selectedIds.push(e.id),this.selectedFile.push(e)}},confirmToUse(){let e=JSON.parse(JSON.stringify(this.selectedFile));this.$emit("selectedFiles",e),this.selectedIds=[],this.selectedFile=[]},async delFile(){if(0==this.selectedIds.length)return void this.$message.error("请先选择要删除的资源");let e=await this.$API.attachment.del.get({ids:this.selectedIds});0==e.code?(this.$message.success("删除成功"),this.getResource(),this.selectedFile=[],this.selectedIds=[]):this.$message.error(e.msg)}}},B=t(3744);const N=(0,B.Z)(M,[["render",z],["__scopeId","data-v-528c2489"]]);var Z=N},5582:function(e,l,t){t.d(l,{Z:function(){return p}});var a=t(6252);const o={class:"goods-select"},i={class:"search-box"},s=(0,a.Uk)("查询"),d=(0,a.Uk)(" "),r={class:"page-div",style:{"margin-top":"20px"}};function m(e,l,t,m,n,u){const c=(0,a.up)("el-input"),p=(0,a.up)("el-form-item"),h=(0,a.up)("el-button"),f=(0,a.up)("el-form"),g=(0,a.up)("el-radio"),b=(0,a.up)("el-table-column"),w=(0,a.up)("el-image"),_=(0,a.up)("el-table"),y=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",i,[(0,a.Wm)(f,{inline:!0,model:n.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"盲盒名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"primary",onClick:u.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[s])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.Wm)(_,{data:n.tableData,"row-style":{height:"57px"},onRowClick:u.singleElection,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{width:"55",label:"选择"},{default:(0,a.w5)((e=>[(0,a.Wm)(g,{class:"radio",modelValue:n.templateSelection,"onUpdate:modelValue":l[1]||(l[1]=e=>n.templateSelection=e),label:e.row.id},{default:(0,a.w5)((()=>[d])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.Wm)(b,{prop:"id",label:"盲盒ID"}),(0,a.Wm)(b,{label:"盲盒主图"},{default:(0,a.w5)((e=>[(0,a.Wm)(w,{src:e.row.pic,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(b,{prop:"name",label:"盲盒名称"})])),_:1},8,["data","onRowClick"]),(0,a._)("div",r,[(0,a.Wm)(y,{background:"",layout:"->, prev, pager, next","page-size":n.searchForm.limit,onCurrentChange:u.pageChangeHandle,total:n.page.total},null,8,["page-size","onCurrentChange","total"])])])}var n={props:{selectedBox:{type:Array,default:()=>[]},pageSize:{type:Number,default:10}},data(){return{searchForm:{name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.getBlindboxList()},methods:{async getBlindboxList(){let e=await this.$API.blindbox.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},singleElection(e){this.templateSelection=e.id;let l=this.tableData.filter((l=>l.id===e.id));this.$emit("handleSelected",l)},pageChangeHandle(e){this.searchForm.page=e,this.getBlindboxList()},onSubmit(){this.getBlindboxList()}}},u=t(3744);const c=(0,u.Z)(n,[["render",m]]);var p=c},9510:function(e,l,t){t.d(l,{Z:function(){return y}});var a=t(6252),o=t(3577);const i={class:"goods-select"},s={class:"search-box"},d=(0,a.Uk)("查询"),r=(0,a.Uk)(" "),m=(0,a.Uk)("普通商品"),n=(0,a.Uk)("盲盒商品"),u={key:0},c={key:1},p=(0,a.Uk)("上架"),h=(0,a.Uk)("下架"),f={class:"page-div",style:{"margin-top":"20px"}};function g(e,l,t,g,b,w){const _=(0,a.up)("el-input"),y=(0,a.up)("el-form-item"),V=(0,a.up)("el-cascader"),v=(0,a.up)("el-button"),k=(0,a.up)("el-form"),W=(0,a.up)("el-radio"),x=(0,a.up)("el-table-column"),U=(0,a.up)("el-image"),C=(0,a.up)("el-tag"),I=(0,a.up)("el-table"),S=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[(0,a.Wm)(k,{inline:!0,model:b.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{label:"商品名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:b.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>b.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(y,{label:"商品分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{modelValue:e.selectedCate,"onUpdate:modelValue":l[1]||(l[1]=l=>e.selectedCate=l),options:e.goodsCate,props:b.treeProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{type:"primary",onClick:w.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.Wm)(I,{data:b.tableData,"row-style":{height:"57px"},"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{width:"55",label:"选择"},{default:(0,a.w5)((e=>[(0,a.Wm)(W,{class:"radio",onChange:l=>w.handleRadioChange(e.row),modelValue:b.templateSelection,"onUpdate:modelValue":l[2]||(l[2]=e=>b.templateSelection=e),label:e.row.id},{default:(0,a.w5)((()=>[r])),_:2},1032,["onChange","modelValue","label"])])),_:1}),(0,a.Wm)(x,{prop:"id",label:"商品ID"}),(0,a.Wm)(x,{label:"商品图"},{default:(0,a.w5)((e=>[(0,a.Wm)(U,{src:e.row.image.split(",")[0],style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(x,{prop:"name",label:"商品名称"}),(0,a.Wm)(x,{prop:"cate.name",label:"商品分类"}),(0,a.Wm)(x,{label:"商品类型"},{default:(0,a.w5)((e=>[1==e.row.goods_type?((0,a.wg)(),(0,a.j4)(C,{key:0,type:"danger"},{default:(0,a.w5)((()=>[m])),_:1})):(0,a.kq)("",!0),2==e.row.goods_type?((0,a.wg)(),(0,a.j4)(C,{key:1,type:"success"},{default:(0,a.w5)((()=>[n])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(x,{prop:"price",label:"商品售价"}),(0,a.Wm)(x,{prop:"sales",label:"销量"}),(0,a.Wm)(x,{label:"库存"},{default:(0,a.w5)((e=>[-1==e.row.stock?((0,a.wg)(),(0,a.iD)("span",u,"无限库存")):((0,a.wg)(),(0,a.iD)("span",c,(0,o.zw)(e.row.stock),1))])),_:1}),(0,a.Wm)(x,{label:"状态"},{default:(0,a.w5)((e=>[1==e.row.status?((0,a.wg)(),(0,a.j4)(C,{key:0,type:"success"},{default:(0,a.w5)((()=>[p])),_:1})):(0,a.kq)("",!0),2==e.row.status?((0,a.wg)(),(0,a.j4)(C,{key:1,type:"danger"},{default:(0,a.w5)((()=>[h])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["data"]),(0,a._)("div",f,[(0,a.Wm)(S,{background:"",layout:"->, prev, pager, next","page-size":b.searchForm.limit,onCurrentChange:w.pageChangeHandle,total:b.page.total},null,8,["page-size","onCurrentChange","total"])])])}var b={props:{selectedgoods:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},goodsType:{type:Number,default:0}},data(){return{treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},searchForm:{goods_type:"",cate_id:"",status:1,name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.searchForm.limit=this.pageSize,this.searchForm.goods_type=this.goodsType,this.getGoodsList(),this.getGoodsCate()},methods:{async getGoodsList(){let e=await this.$API.goods.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.goodsCate=e.data},handleRadioChange(e){this.templateSelection=e.id,this.selectedGoods=this.tableData.filter((l=>l.id===e.id)),this.$emit("handleSelected",this.selectedGoods)},pageChangeHandle(e){this.searchForm.page=e,this.getGoodsList()},onSubmit(){this.selectedCate?(1==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[0]),2==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[1])):this.searchForm.cate_id="",this.getGoodsList()}}},w=t(3744);const _=(0,w.Z)(b,[["render",g]]);var y=_},1768:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6252);const o={class:"sceditor"};function i(e,l,t,i,s,d){const r=(0,a.up)("Editor"),m=(0,a.up)("Attachment"),n=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a.Wm)(r,{modelValue:s.contentValue,"onUpdate:modelValue":l[0]||(l[0]=e=>s.contentValue=e),init:s.init,disabled:t.disabled,placeholder:t.placeholder,onOnClick:d.onClick},null,8,["modelValue","init","disabled","placeholder","onOnClick"])]),(0,a.Wm)(n,{title:"选择资源",modelValue:s.attachmentDialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>s.attachmentDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"select-num":999999,onSelectedFiles:d.attachmentSelected},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var s=t(5878),d=t(7877),r=t(968),m=t(7575),n=t.n(m),u=(t(8860),t(6890),t(6564),t(8190),t(2682),t(4446),t(1449),t(8619),t(8843),t(6552),t(4400),t(8672),{components:{Editor:r.Z,Attachment:s.Z},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code link table quickbars pagebreak lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link blocks fontfamily fontsize \t\t\t\t\talignleft aligncenter alignright alignjustify outdent indent numlist bullist \t\t\t\t\tpagebreak table code selectall attachment"},templates:{type:Array,default:()=>[]}},data(){return{attachmentDialogVisible:!1,init:{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.css",convert_urls:!1,menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,toolbar_mode:"sliding",font_size_formats:"12px 14px 16px 18px 22px 24px 36px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",templates:this.templates,quickbars_selection_toolbar:"forecolor backcolor bold italic underline strikethrough link",quickbars_image_toolbar:"alignleft aligncenter alignright",quickbars_insert_toolbar:!1,image_caption:!0,image_advtab:!0,images_upload_handler:function(e){return new Promise(((l,t)=>{const a=new FormData;a.append("file",e.blob(),e.filename()),d.Z.common.upload.post(a).then((e=>{l(e.data.src)})).catch((()=>{t("Image upload failed")}))}))},setup:e=>{e.on("init",(function(){this.getBody().style.fontSize="14px"})),e.on("OpenWindow",(function(e){var l=document.querySelector(".el-drawer.open"),t=e.target.editorContainer;if(l&&l.contains(t)){var a=document.activeElement;setTimeout((()=>{document.activeElement.blur(),a.focus()}),0)}})),e.ui.registry.addButton("attachment",{text:"",icon:"image",onAction:()=>{this.attachmentDialogVisible=!0}})}},contentValue:this.modelValue}},watch:{modelValue(e){this.contentValue=e},contentValue(e){this.$emit("update:modelValue",e)}},mounted(){n().init({})},methods:{onClick(e){this.$emit("onClick",e,n())},attachmentSelected(e){if(e.length){let l="";for(let t in e)l+='<img src="'+e[t].url+'" style="max-width: 100%;">';n().activeEditor.insertContent(l)}this.attachmentDialogVisible=!1}}}),c=t(3744);const p=(0,c.Z)(u,[["render",i]]);var h=p},3120:function(e,l,t){t.r(l),t.d(l,{default:function(){return w}});var a=t(6252);const o=(0,a.Uk)("新人必买"),i=(0,a.Uk)("买一送一"),s={class:"img-list"},d={key:0},r=["src"],m=(0,a.Uk)("正常"),n=(0,a.Uk)("禁用"),u=(0,a.Uk)("取 消"),c=(0,a.Uk)("保 存");function p(e,l,t,p,h,f){const g=(0,a.up)("el-radio"),b=(0,a.up)("el-form-item"),w=(0,a.up)("el-icon-delete"),_=(0,a.up)("el-icon"),y=(0,a.up)("el-icon-plus"),V=(0,a.up)("el-form"),v=(0,a.up)("el-button"),k=(0,a.up)("el-dialog"),W=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,{title:h.titleMap[h.mode],modelValue:h.visible,"onUpdate:modelValue":l[8]||(l[8]=e=>h.visible=e),width:600,"destroy-on-close":"",onClosed:l[9]||(l[9]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:l[6]||(l[6]=e=>h.visible=!1)},{default:(0,a.w5)((()=>[u])),_:1}),"show"!=h.mode?((0,a.wg)(),(0,a.j4)(v,{key:0,type:"primary",loading:h.isSaveing,onClick:l[7]||(l[7]=e=>f.submit())},{default:(0,a.w5)((()=>[c])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(V,{model:h.form,rules:h.rules,disabled:"show"==h.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{label:"类型",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:h.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>h.form.type=e),label:"2"},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(g,{modelValue:h.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>h.form.type=e),label:"3"},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(b,{label:"标签颜色",prop:"color"},{default:(0,a.w5)((()=>[(0,a._)("ul",s,[h.form.pic?((0,a.wg)(),(0,a.iD)("li",d,[(0,a._)("img",{src:h.form.pic,style:{width:"58px",height:"58px"},alt:"图片"},null,8,r),(0,a._)("div",{class:"img-tools",onClick:l[2]||(l[2]=e=>f.removeImg())},[(0,a.Wm)(_,{style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w)])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[3]||(l[3]=e=>f.showImage())},[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1})])])])])),_:1}),(0,a.Wm)(b,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{label:1,modelValue:h.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[m])),_:1},8,["modelValue"]),(0,a.Wm)(g,{label:2,modelValue:h.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[n])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(k,{title:"选择资源",modelValue:h.resourceVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>h.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{"select-num":1,onSelectedFiles:f.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var h=t(5878),f={components:{Attachment:h.Z},emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增广告",edit:"编辑广告",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",type:"2",pic:"",status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择类型",trigger:"blur"}],pic:[{required:!0,message:"请选择弹层图片",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.ad.add.post(this.form):await this.$API.ad.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},removeImg(){this.form.pic=""},setData(e){this.form.id=e.id,this.form.pic=e.pic,this.form.type=e.type+"",this.form.status=e.status}}},g=t(3744);const b=(0,g.Z)(f,[["render",p],["__scopeId","data-v-fc2f359c"]]);var w=b},3524:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("保 存");function s(e,l,t,s,d,r){const m=(0,a.up)("el-option"),n=(0,a.up)("el-select"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-input"),p=(0,a.up)("el-form"),h=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:l[7]||(l[7]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!=d.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[8]||(l[8]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{model:d.form,rules:d.rules,disabled:"show"==d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"所属角色",prop:"role_id"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:d.form.role_id,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.role_id=e),style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.roles,(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"登录账号",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.username,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.username=e),placeholder:"英文+数字,用于登录系统",clearable:""},null,8,["modelValue"])])),_:1}),"add"==d.mode?((0,a.wg)(),(0,a.j4)(u,{key:0,label:"登录密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.password=e),clearable:"","show-password":""},null,8,["modelValue"])])),_:1})):((0,a.wg)(),(0,a.j4)(u,{key:1,label:"登录密码"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.password=e),clearable:"","show-password":"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.Wm)(u,{label:"昵称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.nickname,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"邮箱"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.email,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.email=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"手机号"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增管理员",edit:"编辑管理员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",role_id:"",username:"",nickname:"",password:"",avatar:"",email:"",phone:"",status:1},rules:{role_id:[{required:!0,message:"请选择所属角色",trigger:"blur"}],username:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},roles:[]}},mounted(){this.getAllRole()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAllRole(){let e=await this.$API.role.getAllRole.get({hashmart_auth_skip:1});this.roles=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.admin.add.post(this.form):await this.$API.admin.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.username=e.username,this.form.role_id=e.role_id,this.form.nickname=e.nickname,this.form.email=e.email,this.form.phone=e.phone,this.form.status=e.status}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},4431:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(6252),o=t(3577);const i=(0,a._)("br",null,null,-1),s=(0,a._)("br",null,null,-1);function d(e,l,t,d,r,m){const n=(0,a.up)("el-table-column"),u=(0,a.up)("el-image"),c=(0,a.up)("el-table"),p=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(p,{title:r.titleMap[r.mode],modelValue:r.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>r.visible=e),width:1200,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{data:r.form,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{prop:"id",label:"ID"}),(0,a.Wm)(n,{label:"用户名"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.user_name)+" ",1),i,(0,a.Uk)(" ID: "+(0,o.zw)(e.row.user_id),1)])),_:1}),(0,a.Wm)(n,{prop:"order_time",label:"下单时间戳"}),(0,a.Wm)(n,{label:"获得商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{src:e.row.goods_image,style:{height:"36px",width:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(n,{label:"获得商品"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.goods_name)+" ",1),s,(0,a.Uk)(" ID: "+(0,o.zw)(e.row.goods_id),1)])),_:1}),(0,a.Wm)(n,{prop:"profit",label:"盈亏"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var r={name:"blindBoxOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"中奖记录"},visible:!1,form:{}}},mounted(){},methods:{open(e){return this.form=e,this.visible=!0,this}}},m=t(3744);const n=(0,m.Z)(r,[["render",d]]);var u=n},7980:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("显示"),i=(0,a.Uk)("隐藏"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!=m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{model:m.form,rules:m.rules,disabled:"show"==m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"赏种名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"排序",prop:"sort"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.sort,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"是否显示",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var m={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增标签",edit:"编辑标签",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",color:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入赏种名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindboxTag.add.post(this.form):await this.$API.blindboxTag.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.sort=e.sort,this.form.color=e.color,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r],["__scopeId","data-v-ac79a194"]]);var c=u},2895:function(e,l,t){t.r(l),t.d(l,{default:function(){return V}});var a=t(6252);const o=e=>((0,a.dD)("data-v-9d6c4b66"),e=e(),(0,a.Cn)(),e),i=(0,a.Uk)("一番赏"),s=(0,a.Uk)("哈希赏"),d={class:"img-list"},r={key:0},m=["src"],n={class:"img-tools"},u=o((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：250*250 ",-1))),c=(0,a.Uk)("上架"),p=(0,a.Uk)("下架"),h=(0,a.Uk)("取 消"),f=(0,a.Uk)("保 存");function g(e,l,t,o,g,b){const w=(0,a.up)("el-input"),_=(0,a.up)("el-form-item"),y=(0,a.up)("el-radio"),V=(0,a.up)("el-icon"),v=(0,a.up)("el-form"),k=(0,a.up)("el-button"),W=(0,a.up)("el-dialog"),x=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(W,{title:g.titleMap[g.mode],modelValue:g.visible,"onUpdate:modelValue":l[12]||(l[12]=e=>g.visible=e),width:600,"destroy-on-close":"",onClosed:l[13]||(l[13]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(k,{onClick:l[10]||(l[10]=e=>g.visible=!1)},{default:(0,a.w5)((()=>[h])),_:1}),"show"!=g.mode?((0,a.wg)(),(0,a.j4)(k,{key:0,type:"primary",loading:g.isSaveing,onClick:l[11]||(l[11]=e=>b.submit())},{default:(0,a.w5)((()=>[f])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(v,{model:g.form,rules:g.rules,disabled:"show"==g.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{label:"盲盒名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>g.form.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"玩法",prop:"play_id"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{label:1,modelValue:g.form.play_id,"onUpdate:modelValue":l[1]||(l[1]=e=>g.form.play_id=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"]),(0,a.Wm)(y,{label:2,modelValue:g.form.play_id,"onUpdate:modelValue":l[2]||(l[2]=e=>g.form.play_id=e)},{default:(0,a.w5)((()=>[s])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"封面图",prop:"pic"},{default:(0,a.w5)((()=>[(0,a._)("ul",d,[g.form.pic?((0,a.wg)(),(0,a.iD)("li",r,[(0,a._)("img",{src:g.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,m),(0,a._)("div",n,[(0,a.Wm)(V,{style:{"font-size":"14px",color:"#fff"},onClick:l[3]||(l[3]=e=>b.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(g.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[4]||(l[4]=(...e)=>b.showImage&&b.showImage(...e))},[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(g.plusIcon)))])),_:1})])]),u])])),_:1}),(0,a.Wm)(_,{label:"单抽价格",prop:"price"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.price,"onUpdate:modelValue":l[5]||(l[5]=e=>g.form.price=e),type:"number",min:0},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.desc,"onUpdate:modelValue":l[6]||(l[6]=e=>g.form.desc=e),rows:"3",type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.sort,"onUpdate:modelValue":l[7]||(l[7]=e=>g.form.sort=e),clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"上架",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{label:1,modelValue:g.form.status,"onUpdate:modelValue":l[8]||(l[8]=e=>g.form.status=e)},{default:(0,a.w5)((()=>[c])),_:1},8,["modelValue"]),(0,a.Wm)(y,{label:2,modelValue:g.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>g.form.status=e)},{default:(0,a.w5)((()=>[p])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(W,{title:"选择资源",modelValue:g.resourceVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>g.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{"select-num":1,onSelectedFiles:b.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var b=t(5878),w={emits:["success","closed"],components:{Attachment:b.Z},data(){return{mode:"add",titleMap:{add:"新增盲盒",edit:"编辑盲盒",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,playId:[],form:{id:"",play_id:1,name:"",price:0,pic:"",desc:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],play_id:[{required:!0,message:"请选择玩法",trigger:"blur"}],price:[{required:!0,message:"请输入单抽价格",trigger:"blur"}],pic:[{required:!0,message:"请选择封面",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindbox.add.post(this.form):await this.$API.blindbox.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.play_id=parseInt(e.play_id),this.form.name=e.name,this.form.price=e.price,this.form.pic=e.pic,this.form.desc=e.desc,this.form.sort=e.sort,this.form.status=parseInt(e.status)}}},_=t(3744);const y=(0,_.Z)(w,[["render",g],["__scopeId","data-v-9d6c4b66"]]);var V=y},4586:function(e,l,t){t.r(l),t.d(l,{default:function(){return r}});var a=t(6252);function o(e,l,t,o,i,s){const d=(0,a.up)("el-table-column"),r=(0,a.up)("el-image"),m=(0,a.up)("el-table"),n=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(n,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>i.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{data:i.tableData,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{prop:"reward.goods_id",label:"商品ID"}),(0,a.Wm)(d,{prop:"reward.goods_name",label:"商品名称"}),(0,a.Wm)(d,{label:"商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(r,{src:e.row.reward.goods_image,style:{width:"40px",height:"40px"}},null,8,["src"])])),_:1}),(0,a.Wm)(d,{prop:"amount",label:"可兑换哈希币"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var i={name:"boxExchangeDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"兑换详情"},visible:!1,tableData:[]}},mounted(){},methods:{open(e){return this.tableData=e,this.visible=!0,this}}},s=t(3744);const d=(0,s.Z)(i,[["render",o]]);var r=d},6048:function(e,l,t){t.r(l),t.d(l,{default:function(){return L}});var a=t(6252);const o=(0,a.Uk)("满减券"),i=(0,a.Uk)("折扣券"),s=(0,a.Uk)("    元 "),d=(0,a.Uk)("    "),r=(0,a._)("span",{style:{"font-size":"12px"}},"例如:8折填0.8",-1),m=(0,a.Uk)("    元 "),n=(0,a._)("span",{style:{color:"#f56c6c"}},"(数值大于0则为设置有效)",-1),u=(0,a.Uk)("限量"),c=(0,a.Uk)("不限量"),p=(0,a.Uk)("有门槛"),h=(0,a.Uk)("无门槛"),f=(0,a.Uk)("    元可以使用 "),g=(0,a.Uk)("固定时间"),b=(0,a.Uk)("领取之日起"),w=(0,a.Uk)("    天内有效 "),_=(0,a.Uk)("全部盲盒参与"),y=(0,a.Uk)("指定盲盒参与"),V=(0,a.Uk)("选择盲盒"),v=(0,a.Uk)("删除"),k=(0,a.Uk)("立即创建");function W(e,l,t,W,x,U){const C=(0,a.up)("el-input"),I=(0,a.up)("el-form-item"),S=(0,a.up)("el-radio"),$=(0,a.up)("el-date-picker"),F=(0,a.up)("el-button"),D=(0,a.up)("el-table-column"),q=(0,a.up)("el-table"),j=(0,a.up)("el-form"),A=(0,a.up)("el-dialog"),z=(0,a.up)("blindbox");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(A,{title:x.titleMap[x.mode],modelValue:x.visible,"onUpdate:modelValue":l[20]||(l[20]=e=>x.visible=e),width:800,"destroy-on-close":"",onClosed:l[21]||(l[21]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{model:x.form,"label-width":"120px",rules:x.rules,ref:"ruleForm",disabled:"show"==x.mode},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{label:"优惠券名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>x.form.name=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(I,{label:"优惠券类型",prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:1,modelValue:x.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>x.form.type=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(S,{label:2,modelValue:x.form.type,"onUpdate:modelValue":l[2]||(l[2]=e=>x.form.type=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),1==x.form.type?((0,a.wg)(),(0,a.j4)(I,{key:0,label:"优惠券面额",prop:"amount"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.amount,"onUpdate:modelValue":l[3]||(l[3]=e=>x.form.amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),s])),_:1})):(0,a.kq)("",!0),2==x.form.type?((0,a.wg)(),(0,a.j4)(I,{key:1,label:"优惠折扣",prop:"discount"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.discount,"onUpdate:modelValue":l[4]||(l[4]=e=>x.form.discount=e),style:{width:"500px"},type:"number",placeholder:"例如：0.8 或者 0.95"},null,8,["modelValue"]),d,r])),_:1})):(0,a.kq)("",!0),2==x.form.type?((0,a.wg)(),(0,a.j4)(I,{key:2,label:"最多优惠",prop:"max_discount_amount"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.max_discount_amount,"onUpdate:modelValue":l[5]||(l[5]=e=>x.form.max_discount_amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),m,n])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(I,{label:"发放数量限制",prop:"is_limit_num"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:1,modelValue:x.form.is_limit_num,"onUpdate:modelValue":l[6]||(l[6]=e=>x.form.is_limit_num=e)},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"]),(0,a.Wm)(S,{label:2,modelValue:x.form.is_limit_num,"onUpdate:modelValue":l[7]||(l[7]=e=>x.form.is_limit_num=e)},{default:(0,a.w5)((()=>[c])),_:1},8,["modelValue"])])),_:1}),1==x.form.is_limit_num?((0,a.wg)(),(0,a.j4)(I,{key:3,label:"发放数量"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.total_num,"onUpdate:modelValue":l[8]||(l[8]=e=>x.form.total_num=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(I,{label:"最多领取数量",prop:"max_receive_num"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.max_receive_num,"onUpdate:modelValue":l[9]||(l[9]=e=>x.form.max_receive_num=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(I,{label:"使用门槛",prop:"is_threshold"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:1,modelValue:x.form.is_threshold,"onUpdate:modelValue":l[10]||(l[10]=e=>x.form.is_threshold=e)},{default:(0,a.w5)((()=>[p])),_:1},8,["modelValue"]),(0,a.Wm)(S,{label:2,modelValue:x.form.is_threshold,"onUpdate:modelValue":l[11]||(l[11]=e=>x.form.is_threshold=e)},{default:(0,a.w5)((()=>[h])),_:1},8,["modelValue"])])),_:1}),1==x.form.is_threshold?((0,a.wg)(),(0,a.j4)(I,{key:4,label:"订单满"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.threshold_amount,"onUpdate:modelValue":l[12]||(l[12]=e=>x.form.threshold_amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),f])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(I,{label:"有效期类型",prop:"validity_type"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:1,modelValue:x.form.validity_type,"onUpdate:modelValue":l[13]||(l[13]=e=>x.form.validity_type=e)},{default:(0,a.w5)((()=>[g])),_:1},8,["modelValue"]),(0,a.Wm)(S,{label:2,modelValue:x.form.validity_type,"onUpdate:modelValue":l[14]||(l[14]=e=>x.form.validity_type=e)},{default:(0,a.w5)((()=>[b])),_:1},8,["modelValue"])])),_:1}),1==x.form.validity_type?((0,a.wg)(),(0,a.j4)(I,{key:5,label:"有效期至",style:{width:"620px"}},{default:(0,a.w5)((()=>[(0,a.Wm)($,{modelValue:x.form.datetime_range,"onUpdate:modelValue":l[15]||(l[15]=e=>x.form.datetime_range=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),2==x.form.validity_type?((0,a.wg)(),(0,a.j4)(I,{key:6,label:"领取之日起"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:x.form.receive_useful_day,"onUpdate:modelValue":l[16]||(l[16]=e=>x.form.receive_useful_day=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),w])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(I,{label:"活动盲盒",prop:"join_blindbox"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:1,modelValue:x.form.join_blindbox,"onUpdate:modelValue":l[17]||(l[17]=e=>x.form.join_blindbox=e)},{default:(0,a.w5)((()=>[_])),_:1},8,["modelValue"]),(0,a.Wm)(S,{label:2,modelValue:x.form.join_blindbox,"onUpdate:modelValue":l[18]||(l[18]=e=>x.form.join_blindbox=e)},{default:(0,a.w5)((()=>[y])),_:1},8,["modelValue"])])),_:1}),2==x.form.join_blindbox?((0,a.wg)(),(0,a.j4)(I,{key:7,label:"活动盲盒"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{type:"primary",icon:"el-icon-plus",size:"small",onClick:U.ckBlindbox},{default:(0,a.w5)((()=>[V])),_:1},8,["onClick"]),(0,a.Wm)(q,{data:x.form.selectedGoods,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{prop:"name",width:"250px","show-overflow-tooltip":!0,label:"盲盒名"}),(0,a.Wm)(D,{prop:"price",label:"价格"}),(0,a.Wm)(D,{fixed:"right",label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(F,{onClick:l=>U.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.w5)((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,{type:"primary",loading:x.isSaveing,onClick:l[19]||(l[19]=e=>U.submit("ruleForm"))},{default:(0,a.w5)((()=>[k])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(A,{title:"盲盒选择",modelValue:x.dialogVisible,"onUpdate:modelValue":l[22]||(l[22]=e=>x.dialogVisible=e),"destroy-on-close":"",width:"1000px"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{selectedgoods:e.selectedGoods,onHandleSelected:U.handleSelected,"goods-type":2},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"])],64)}t(7658);const x={class:"goods-select"},U={class:"search-box"},C=(0,a.Uk)("查询"),I=(0,a.Uk)("确认使用"),S={class:"page-div",style:{"margin-top":"20px"}};function $(e,l,t,o,i,s){const d=(0,a.up)("el-input"),r=(0,a.up)("el-form-item"),m=(0,a.up)("el-button"),n=(0,a.up)("el-form"),u=(0,a.up)("el-table-column"),c=(0,a.up)("el-image"),p=(0,a.up)("el-table"),h=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",U,[(0,a.Wm)(n,{inline:!0,model:i.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"盲盒名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",onClick:s.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[C])),_:1},8,["onClick"]),(0,a.Wm)(m,{disabled:0==i.templateSelection.length,type:"danger",onClick:s.useSelect,icon:"el-icon-promotion"},{default:(0,a.w5)((()=>[I])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.Wm)(p,{data:i.tableData,"row-style":{height:"57px"},onSelectionChange:s.handleSelectionChange,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"selection",width:"55"}),(0,a.Wm)(u,{prop:"id",label:"盲盒ID"}),(0,a.Wm)(u,{label:"盲盒主图"},{default:(0,a.w5)((e=>[(0,a.Wm)(c,{src:e.row.pic,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(u,{prop:"name",label:"盲盒名称"})])),_:1},8,["data","onSelectionChange"]),(0,a._)("div",S,[(0,a.Wm)(h,{background:"",layout:"->, prev, pager, next","page-size":i.searchForm.limit,onCurrentChange:s.pageChangeHandle,total:i.page.total},null,8,["page-size","onCurrentChange","total"])])])}var F={props:{selectedBox:{type:Array,default:()=>[]},pageSize:{type:Number,default:10}},data(){return{searchForm:{name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.getBlindboxList()},methods:{async getBlindboxList(){let e=await this.$API.blindbox.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},handleSelectionChange(e){this.templateSelection=e},pageChangeHandle(e){this.searchForm.page=e,this.getBlindboxList()},onSubmit(){this.getBlindboxList()},useSelect(){if(0==this.templateSelection.length)return void this.$message.error("请选择盲盒");let e=JSON.parse(JSON.stringify(this.templateSelection));this.templateSelection=[],this.$emit("handleSelected",e)}}},D=t(3744);const q=(0,D.Z)(F,[["render",$]]);var j=q,A={emits:["success","closed"],components:{blindbox:j},data(){return{mode:"add",titleMap:{add:"添加优惠券",edit:"编辑优惠券",show:"查看"},isSaveing:!1,dialogVisible:!1,visible:!1,allreadySelected:[],form:{name:"",type:1,discount:0,amount:0,max_discount_amount:-1,is_limit_num:1,total_num:0,max_receive_num:0,is_threshold:1,threshold_amount:0,validity_type:1,datetime_range:"",join_blindbox:1,receive_useful_day:7,selectedGoods:[]},rules:{name:[{required:!0,message:"请输入优惠券名称",trigger:"blur"}],type:[{required:!0,message:"请选择优惠券类型",trigger:"blur"}],amount:[{required:!0,message:"请输入优惠券面额",trigger:"blur"}],is_limit_num:[{required:!0,message:"请输入发放数量限制",trigger:"blur"}],max_receive_num:[{required:!0,message:"请输入最多领取张数",trigger:"blur"}],is_threshold:[{required:!0,message:"请输入使用门槛",trigger:"blur"}],validity_type:[{required:!0,message:"请输入有效期类型",trigger:"blur"}],join_blindbox:[{required:!0,message:"请输入活动商品",trigger:"blur"}],discount:[{required:!0,message:"请输入折扣",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.ruleForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.coupon.add.post(this.form):await this.$API.coupon.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.name=e.name,this.form.type=e.type,this.form.discount=e.discount,this.form.amount=e.amount,this.form.max_discount_amount=e.max_discount_amount,this.form.is_limit_num=e.is_limit_num,this.form.total_num=e.total_num,this.form.max_receive_num=e.max_receive_num,this.form.is_threshold=e.is_threshold,this.form.threshold_amount=e.threshold_amount,this.form.validity_type=e.validity_type,this.form.datetime_range=[e.start_time,e.end_time],this.form.join_blindbox=e.join_blindbox,this.form.receive_useful_day=e.receive_useful_day,e.blindbox.forEach((e=>{this.form.selectedGoods.push(JSON.parse(e.blindbox_info))}))},handleSelected(e){if(this.form.selectedGoods.length>0)e.forEach((e=>{-1==this.allreadySelected.indexOf(e.id)&&(this.form.selectedGoods.push({id:e.id,price:e.price,name:e.name}),this.allreadySelected.push(e.id))}));else{let l=[];e.forEach((e=>{l.push({id:e.id,price:e.price,name:e.name}),this.allreadySelected.push(e.id)})),this.form.selectedGoods=l}this.dialogVisible=!1},ckBlindbox(){this.dialogVisible=!0},handleDel(e){this.form.selectedGoods.splice(e,1),this.allreadySelected.splice(e,1)}}};const z=(0,D.Z)(A,[["render",W]]);var L=z},5192:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a._)("p",{style:{"font-size":"12px"}},"多个用户id之间用英文,隔开。例如：33,2251",-1),i=(0,a.Uk)("立即发放");function s(e,l,t,s,d,r){const m=(0,a.up)("el-input"),n=(0,a.up)("el-form-item"),u=(0,a.up)("el-button"),c=(0,a.up)("el-form"),p=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(p,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[5]||(l[5]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:d.form,"label-width":"120px",rules:e.rules,ref:"ruleForm",disabled:"show"==d.mode},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:"优惠券名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.name=e),style:{width:"500px"},readonly:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"发放数量"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.num,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.num=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"发放用户id"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.userList,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.userList=e),style:{width:"500px"},rows:5,type:"textarea"},null,8,["modelValue"]),o])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"primary",loading:d.isSaveing,onClick:l[3]||(l[3]=e=>r.submit("ruleForm"))},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"发放优惠券"},isSaveing:!1,dialogVisible:!1,visible:!1,allreadySelected:[],form:{name:"",num:1,id:0,userList:""}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.ruleForm.validate((async e=>{if(!e)return!1;this.isSaveing=!0;var l=await this.$API.coupon.send.post(this.form);this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.name=e.name,this.form.id=e.id}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},9755:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("成功"),i=(0,a.Uk)("失败");function s(e,l,t,s,d,r){const m=(0,a.up)("el-button"),n=(0,a.up)("el-table-column"),u=(0,a.up)("el-tag"),c=(0,a.up)("el-table"),p=(0,a.up)("el-pagination"),h=(0,a.up)("el-dialog"),f=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>d.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed"))},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",icon:"el-icon-refresh",size:"small",onClick:r.refresh},null,8,["onClick"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{class:"tableClass",data:d.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{prop:"id",label:"ID"}),(0,a.Wm)(n,{prop:"return_var",label:"运行结果"},{default:(0,a.w5)((e=>[0==e.row.return_var?((0,a.wg)(),(0,a.j4)(u,{key:0,type:"success"},{default:(0,a.w5)((()=>[o])),_:1})):(0,a.kq)("",!0),1==e.row.return_var?((0,a.wg)(),(0,a.j4)(u,{key:1,type:"danger"},{default:(0,a.w5)((()=>[i])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(n,{prop:"command","show-overflow-tooltip":!0,label:"任务命令"}),(0,a.Wm)(n,{prop:"running_time",label:"运行耗时"}),(0,a.Wm)(n,{prop:"output","show-overflow-tooltip":!0,label:"输出结果"}),(0,a.Wm)(n,{prop:"create_time",label:"执行时间"})])),_:1},8,["data"])),[[f,d.loading]]),(0,a.Wm)(p,{background:"",layout:"->, prev, pager, next",onCurrentChange:r.handleLogCurrentChange,"page-size":d.logPage.limit,total:d.total,style:{"margin-top":"10px"}},null,8,["onCurrentChange","page-size","total"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"执行日志",show:"查看"},tableData:[],total:0,logPage:{sid:0,page:1,limit:10},loading:!0,visible:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.logPage.sid=e.id,this.runLog()},async runLog(){let e=await this.$API.crontab.log.get(this.logPage);this.tableData=e.data.list,this.total=e.data.count,this.loading=!1},refresh(){this.loading=!0,this.logPage.page=1,this.runLog()},handleLogCurrentChange(e){this.logPage.page=e,this.runLog()}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},2580:function(e,l,t){t.r(l),t.d(l,{default:function(){return g}});var a=t(6252);const o=e=>((0,a.dD)("data-v-92cf62e2"),e=e(),(0,a.Cn)(),e),i=o((()=>(0,a._)("div",{class:"frequency-title"},"定时规则",-1))),s=o((()=>(0,a._)("span",{class:"suffix"},"日",-1))),d=o((()=>(0,a._)("span",{class:"suffix"},"时",-1))),r=o((()=>(0,a._)("span",{class:"suffix"},"分",-1))),m=o((()=>(0,a._)("span",{class:"suffix"},"秒",-1))),n=(0,a.Uk)("取 消"),u=(0,a.Uk)("保 存");function c(e,l,t,o,c,p){const h=(0,a.up)("el-input"),f=(0,a.up)("el-form-item"),g=(0,a.up)("el-option"),b=(0,a.up)("el-select"),w=(0,a.up)("el-col"),_=(0,a.up)("el-input-number"),y=(0,a.up)("el-switch"),V=(0,a.up)("el-form"),v=(0,a.up)("el-button"),k=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(k,{title:c.titleMap[c.mode],modelValue:c.visible,"onUpdate:modelValue":l[12]||(l[12]=e=>c.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[13]||(l[13]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:l[10]||(l[10]=e=>c.visible=!1)},{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(v,{type:"primary",loading:e.isSaving,onClick:l[11]||(l[11]=e=>p.submit())},{default:(0,a.w5)((()=>[u])),_:1},8,["loading"])])),default:(0,a.w5)((()=>[(0,a.Wm)(V,{model:c.form,rules:e.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"标题",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:c.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.title=e),placeholder:"计划任务标题",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{label:"执行脚本",prop:"shell"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"textarea",modelValue:c.form.shell,"onUpdate:modelValue":l[1]||(l[1]=e=>c.form.shell=e),clearable:"",rows:3},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{prop:"frequency"},{label:(0,a.w5)((()=>[i])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:c.form.frequency.type,"onUpdate:modelValue":l[2]||(l[2]=e=>c.form.frequency.type=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{label:"每隔N秒",value:"1"}),(0,a.Wm)(g,{label:"每隔N分钟",value:"2"}),(0,a.Wm)(g,{label:"每隔N小时",value:"3"}),(0,a.Wm)(g,{label:"每隔N天",value:"4"}),(0,a.Wm)(g,{label:"每天",value:"5"}),(0,a.Wm)(g,{label:"每星期",value:"6"}),(0,a.Wm)(g,{label:"每月",value:"7"})])),_:1},8,["modelValue"])])),_:1}),7==c.form.frequency.type||4==c.form.frequency.type?((0,a.wg)(),(0,a.j4)(w,{key:0,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.day,"onUpdate:modelValue":l[3]||(l[3]=e=>c.form.frequency.day=e),"controls-position":"right",min:1,max:31,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),s])),_:1})):(0,a.kq)("",!0),6==c.form.frequency.type?((0,a.wg)(),(0,a.j4)(w,{key:1,span:4,style:{"margin-left":"3px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:c.form.frequency.week,"onUpdate:modelValue":l[4]||(l[4]=e=>c.form.frequency.week=e),placeholder:"星期"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{label:"周一",value:"1"}),(0,a.Wm)(g,{label:"周二",value:"2"}),(0,a.Wm)(g,{label:"周三",value:"3"}),(0,a.Wm)(g,{label:"周四",value:"4"}),(0,a.Wm)(g,{label:"周五",value:"5"}),(0,a.Wm)(g,{label:"周六",value:"6"}),(0,a.Wm)(g,{label:"周日",value:"7"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),c.form.frequency.type>2&&4!=c.form.frequency.type?((0,a.wg)(),(0,a.j4)(w,{key:2,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.hour,"onUpdate:modelValue":l[5]||(l[5]=e=>c.form.frequency.hour=e),"controls-position":"right",min:0,max:23,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),d])),_:1})):(0,a.kq)("",!0),2==c.form.frequency.type||c.form.frequency.type>4?((0,a.wg)(),(0,a.j4)(w,{key:3,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.minute,"onUpdate:modelValue":l[6]||(l[6]=e=>c.form.frequency.minute=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),r])),_:1})):(0,a.kq)("",!0),1==c.form.frequency.type||c.form.frequency.type>4?((0,a.wg)(),(0,a.j4)(w,{key:4,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.second,"onUpdate:modelValue":l[7]||(l[7]=e=>c.form.frequency.second=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),m])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(f,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:c.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>c.form.sort=e),placeholder:"越大越前",clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{label:"是否启用",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:c.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>c.form.status=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var p={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增定时任务",edit:"编辑定时任务",show:"查看"},form:{title:"",type:2,shell:"",frequency:{type:"1",day:"1",week:"1",hour:"1",minute:"1",second:"1"},status:0,sort:0},visible:!1,isSaveing:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.crontab.addTask.post(this.form):await this.$API.crontab.editTask.post(this.form),this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){console.log("设置数据",e)}}},h=t(3744);const f=(0,h.Z)(p,[["render",c],["__scopeId","data-v-92cf62e2"]]);var g=f},9053:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{model:m.form,rules:m.rules,disabled:"show"===m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"物流公司名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),placeholder:"物流公司名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"物流公司编码"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.code,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.code=e),placeholder:"物流公司编码",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var m={name:"expressCorpSettingSave",emits:["success","closed"],data(){return{mode:"add",titleMap:{edit:"编辑物流公司",add:"添加物流公司"},visible:!1,isSaveing:!1,form:{id:"",name:"",code:"",status:1},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入哈希币",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.expressCorpSetting.add.post(this.form):await this.$API.expressCorpSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.code=e.code,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r]]);var c=u},8593:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var a=t(6252);const o=e=>((0,a.dD)("data-v-4db443f6"),e=e(),(0,a.Cn)(),e),i={class:"img-list"},s={key:0},d=["src"],r={class:"img-tools"},m=o((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：64*64 ",-1))),n=(0,a.Uk)("显示"),u=(0,a.Uk)("隐藏"),c=(0,a.Uk)("取 消"),p=(0,a.Uk)("保 存");function h(e,l,t,o,h,f){const g=(0,a.up)("el-input"),b=(0,a.up)("el-form-item"),w=(0,a.up)("el-icon"),_=(0,a.up)("el-radio"),y=(0,a.up)("el-form"),V=(0,a.up)("el-button"),v=(0,a.up)("el-dialog"),k=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(v,{title:h.titleMap[h.mode],modelValue:h.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>h.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:l[7]||(l[7]=e=>h.visible=!1)},{default:(0,a.w5)((()=>[c])),_:1}),"show"!=h.mode?((0,a.wg)(),(0,a.j4)(V,{key:0,type:"primary",loading:h.isSaveing,onClick:l[8]||(l[8]=e=>f.submit())},{default:(0,a.w5)((()=>[p])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(y,{model:h.form,rules:h.rules,disabled:"show"==h.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{label:"上级分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:h.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>h.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,{label:"分类名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:h.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>h.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,{label:"图标",prop:"icon"},{default:(0,a.w5)((()=>[(0,a._)("ul",i,[h.form.icon?((0,a.wg)(),(0,a.iD)("li",s,[(0,a._)("img",{src:h.form.icon,alt:"图片",style:{height:"58px",width:"58px"}},null,8,d),(0,a._)("div",r,[(0,a.Wm)(w,{style:{"font-size":"14px",color:"#fff"},onClick:l[2]||(l[2]=e=>f.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(h.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[3]||(l[3]=(...e)=>f.showImage&&f.showImage(...e))},[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(h.plusIcon)))])),_:1})])]),m])])),_:1}),(0,a.Wm)(b,{label:"排序",prop:"sort"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"number",modelValue:h.form.sort,"onUpdate:modelValue":l[4]||(l[4]=e=>h.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,{label:"是否显示",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{label:1,modelValue:h.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[n])),_:1},8,["modelValue"]),(0,a.Wm)(_,{label:2,modelValue:h.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(v,{title:"选择资源",modelValue:h.resourceVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>h.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"select-num":1,onSelectedFiles:f.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var f=t(5878),g={emits:["success","closed"],components:{Attachment:f.Z},data(){return{mode:"add",titleMap:{add:"新增分类",edit:"编辑分类",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,pname:"顶级分类",form:{id:"",pid:0,name:"",icon:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],icon:[{required:!0,message:"请输选择图标",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.goodsCate.add.post(this.form):await this.$API.goodsCate.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.icon=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.icon=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.name=e.name,this.form.icon=e.icon,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},b=t(3744);const w=(0,b.Z)(g,[["render",h],["__scopeId","data-v-4db443f6"]]);var _=w},6425:function(e,l,t){t.r(l),t.d(l,{default:function(){return se}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-d43547cc"),e=e(),(0,a.Cn)(),e),s={class:"goods-type",style:{height:"100%"}},d=i((()=>(0,a._)("div",{style:{"margin-top":"5%"}},"普通商品",-1))),r={style:{color:"#999","font-size":"12px",height:"24px"}},m=i((()=>(0,a._)("span",{class:"icon"},null,-1))),n=i((()=>(0,a._)("div",{style:{"margin-top":"5%"}},"盲盒商品",-1))),u={style:{color:"#999","font-size":"12px",height:"24px"}},c=i((()=>(0,a._)("span",{class:"icon"},null,-1))),p={class:"img-list"},h=["src"],f={class:"img-tools"},g=i((()=>(0,a._)("p",{style:{"margin-left":"100px",color:"#909399"}}," * 建议尺寸：336*336, 最多选择 8 张 ",-1))),b=(0,a.Uk)("上架"),w=(0,a.Uk)("下架"),_=(0,a.Uk)("下一步"),y=(0,a.Uk)("保存"),V=(0,a.Uk)("单规格"),v=(0,a.Uk)("多规格"),k={key:1},W=(0,a.Uk)(" 元 "),x=(0,a.Uk)(" 元 "),U=i((()=>(0,a._)("span",{style:{"font-size":"12px","margin-left":"10px"}},"(-1 表示无限库存)",-1))),C={key:2,style:{"margin-bottom":"20px"}},I={style:{float:"right","margin-bottom":"10px",width:"1200px"}},S=(0,a.Uk)("新的规格"),$=(0,a.Uk)("生成属性"),F={style:{display:"flex","flex-flow":"row wrap"}},D=["onClick"],q=(0,a.Uk)(" 添加 "),j={key:3,style:{"margin-bottom":"20px"}},A=(0,a.Uk)("图片"),z=(0,a.Uk)("展示价格"),L=(0,a.Uk)("可兑换哈希币"),P=(0,a.Uk)("成本价"),M=(0,a.Uk)("售价(哈希币)"),B=(0,a.Uk)("库存"),N=["onClick"],Z=["src"],O=["onClick"],T=(0,a.Uk)("删除"),E=(0,a.Uk)("上一步"),H=(0,a.Uk)("下一步"),R=(0,a.Uk)("保存"),G=(0,a.Uk)("上一步"),Y=(0,a.Uk)("保存"),K={key:0},J=(0,a.Uk)(" 元 "),Q={class:"dialog-footer"},X=(0,a.Uk)("确 定");function ee(e,l,t,i,ee,le){const te=(0,a.up)("el-icon-Goods"),ae=(0,a.up)("el-icon"),oe=(0,a.up)("el-icon-Box"),ie=(0,a.up)("el-form-item"),se=(0,a.up)("el-cascader"),de=(0,a.up)("el-input"),re=(0,a.up)("el-radio"),me=(0,a.up)("el-button"),ne=(0,a.up)("el-form"),ue=(0,a.up)("el-tab-pane"),ce=(0,a.up)("el-tooltip"),pe=(0,a.up)("el-icon-delete"),he=(0,a.up)("el-table-column"),fe=(0,a.up)("el-icon-plus"),ge=(0,a.up)("el-table"),be=(0,a.up)("el-button-group"),we=(0,a.up)("sc-editor"),_e=(0,a.up)("el-tabs"),ye=(0,a.up)("Attachment"),Ve=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(_e,{modelValue:ee.activeName,"onUpdate:modelValue":l[26]||(l[26]=e=>ee.activeName=e),class:"demo-tabs"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,{label:"基础信息",name:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{model:ee.form,"label-width":"100px",rules:ee.rules,ref:"ruleForm"},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{label:"商品类型",prop:"goods_type",class:"goods-type"},{default:(0,a.w5)((()=>[(0,a._)("ul",s,[(0,a._)("li",{class:(0,o.C_)({"goods-type-active":1==ee.form.goods_type}),onClick:l[0]||(l[0]=e=>le.checkType(1))},[d,(0,a._)("div",r,[(0,a.Wm)(ae,{style:{"font-size":"18px",color:"#f56c6c","margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(te)])),_:1})]),m],2),(0,a._)("li",{class:(0,o.C_)({"goods-type-active":2==ee.form.goods_type}),onClick:l[1]||(l[1]=e=>le.checkType(2)),style:{"margin-left":"10px"}},[n,(0,a._)("div",u,[(0,a.Wm)(ae,{style:{"font-size":"18px",color:"#67c23a","margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(oe)])),_:1})]),c],2)])])),_:1}),(0,a.Wm)(ie,{label:"所属分类",prop:"cateId"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{modelValue:ee.cateId,"onUpdate:modelValue":l[2]||(l[2]=e=>ee.cateId=e),options:ee.cate,"show-all-levels":!1,props:ee.treeProps,style:{width:"500px"},clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.Wm)(ie,{label:"商品名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.name,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.form.name=e),style:{width:"500px"},type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),(0,a.Wm)(ie,{label:"商品副标题"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.sub_title,"onUpdate:modelValue":l[4]||(l[4]=e=>ee.form.sub_title=e),style:{width:"500px"},type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),(0,a.Wm)(ie,{label:"商品主图",prop:"image",style:{"margin-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a._)("ul",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ee.goodsImages,((e,l)=>((0,a.wg)(),(0,a.iD)("li",{key:l},[(0,a._)("img",{src:e,alt:"图片",style:{height:"58px",width:"58px"}},null,8,h),(0,a._)("div",f,[(0,a.Wm)(ae,{style:{"font-size":"14px",color:"#fff"},onClick:e=>le.removeIcon(l)},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(ee.deleteIcon)))])),_:2},1032,["onClick"])])])))),128)),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[5]||(l[5]=(...e)=>le.showImage&&le.showImage(...e))},[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(ee.plusIcon)))])),_:1})])])])])),_:1}),g,(0,a.Wm)(ie,{label:"状态",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(re,{modelValue:ee.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>ee.form.status=e),label:"1"},{default:(0,a.w5)((()=>[b])),_:1},8,["modelValue"]),(0,a.Wm)(re,{modelValue:ee.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>ee.form.status=e),label:"2"},{default:(0,a.w5)((()=>[w])),_:1},8,["modelValue"])])),_:1}),2==ee.form.goods_type?((0,a.wg)(),(0,a.j4)(ie,{key:0,label:"运费"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.delivery_fee,"onUpdate:modelValue":l[8]||(l[8]=e=>ee.form.delivery_fee=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(ie,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>ee.form.sort=e),style:{width:"500px"},type:"number",placeholder:"值越大越靠前"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(ie,null,{default:(0,a.w5)((()=>[(0,a.Wm)(me,{type:"primary",onClick:le.nextStep},{default:(0,a.w5)((()=>[_])),_:1},8,["onClick"]),"edit"==ee.mode?((0,a.wg)(),(0,a.j4)(me,{key:0,type:"primary",onClick:le.saveGoods},{default:(0,a.w5)((()=>[y])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.Wm)(ue,{label:"规格库存",name:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{model:ee.form,"label-width":"100px",rules:ee.rules,ref:"ruleForm"},{default:(0,a.w5)((()=>[1==ee.form.goods_type?((0,a.wg)(),(0,a.j4)(ie,{key:0,label:"商品规格",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(re,{modelValue:ee.form.type,"onUpdate:modelValue":l[10]||(l[10]=e=>ee.form.type=e),label:"1"},{default:(0,a.w5)((()=>[V])),_:1},8,["modelValue"]),(0,a.Wm)(re,{modelValue:ee.form.type,"onUpdate:modelValue":l[11]||(l[11]=e=>ee.form.type=e),label:"2"},{default:(0,a.w5)((()=>[v])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),1==ee.form.type?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(ie,{label:"展示价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.price,"onUpdate:modelValue":l[12]||(l[12]=e=>ee.form.price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(ie,{label:"可兑换哈希币"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.recovery_price,"onUpdate:modelValue":l[13]||(l[13]=e=>ee.form.recovery_price=e),style:{width:"370px"},type:"number"},null,8,["modelValue"]),(0,a.Wm)(de,{modelValue:ee.recover_price,"onUpdate:modelValue":l[14]||(l[14]=e=>ee.recover_price=e),style:{width:"100px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),W,(0,a.Wm)(ce,{class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(ee.QuestionFilled)))])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ie,{label:"成本价"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.cost_price,"onUpdate:modelValue":l[15]||(l[15]=e=>ee.form.cost_price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(ie,{label:"售价(哈希币)"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.integral_price,"onUpdate:modelValue":l[16]||(l[16]=e=>ee.form.integral_price=e),style:{width:"370px"},type:"number"},null,8,["modelValue"]),(0,a.Wm)(de,{modelValue:ee.integral_price,"onUpdate:modelValue":l[17]||(l[17]=e=>ee.integral_price=e),style:{width:"100px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),x,(0,a.Wm)(ce,{class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(ee.QuestionFilled)))])),_:1})])),_:1})])),_:1}),1==ee.form.goods_type?((0,a.wg)(),(0,a.j4)(ie,{key:0,label:"库存"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.form.stock,"onUpdate:modelValue":l[18]||(l[18]=e=>ee.form.stock=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),U])),_:1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0),2==ee.form.type?((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",I,[(0,a.Wm)(me,{type:"primary",icon:"el-icon-plus",size:"small",onClick:le.addRule},{default:(0,a.w5)((()=>[S])),_:1},8,["onClick"]),(0,a.Wm)(me,{type:"primary",icon:"el-icon-cpu",size:"small",onClick:le.makeRule},{default:(0,a.w5)((()=>[$])),_:1},8,["onClick"])]),(0,a.Wm)(ge,{data:ee.preItem,border:"",style:{width:"1200px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(he,{label:"规格名",width:"200"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{placeholder:"规格名",style:{width:"150px"},modelValue:e.row.title,"onUpdate:modelValue":l=>e.row.title=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(ae,{onClick:l=>le.delTitle(e.$index),class:"del-btn"},{default:(0,a.w5)((()=>[(0,a.Wm)(pe)])),_:2},1032,["onClick"])])),_:1}),(0,a.Wm)(he,{label:"规格值"},{default:(0,a.w5)((e=>[(0,a._)("div",F,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.row.item,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{style:{width:"180px",float:"left","margin-top":"5px"},key:t},[(0,a.Wm)(de,{placeholder:"规格值",style:{width:"150px"},modelValue:e.row.item[t],"onUpdate:modelValue":l=>e.row.item[t]=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(ae,{onClick:l=>le.delItem(e.$index,t),class:"del-btn"},{default:(0,a.w5)((()=>[(0,a.Wm)(pe)])),_:2},1032,["onClick"])])))),128)),(0,a._)("div",{class:"item-tool",onClick:l=>le.addNewItem(e.$index)},[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(fe)])),_:1}),q],8,D)])])),_:1})])),_:1},8,["data"])])):(0,a.kq)("",!0),ee.final.length>0&&2==ee.form.type?((0,a.wg)(),(0,a.iD)("div",j,[(0,a.Wm)(ie,{label:"批量设置",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(be,null,{default:(0,a.w5)((()=>[(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[19]||(l[19]=e=>ee.batchDialogVisible=!0)},{default:(0,a.w5)((()=>[A])),_:1}),(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[20]||(l[20]=e=>le.setBatch("price","展示价格"))},{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[21]||(l[21]=e=>le.setBatch("recovery_price","可兑换哈希币"))},{default:(0,a.w5)((()=>[L])),_:1}),(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[22]||(l[22]=e=>le.setBatch("cost_price","成本价"))},{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[23]||(l[23]=e=>le.setBatch("integral_price","售价(哈希币)"))},{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(me,{type:"primary",size:"small",onClick:l[24]||(l[24]=e=>le.setBatch("stock","库存"))},{default:(0,a.w5)((()=>[B])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ge,{data:ee.final,border:"",style:{width:"1200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ee.tableHead,((e,l)=>((0,a.wg)(),(0,a.j4)(he,{label:e.label,width:"150",key:l},{default:(0,a.w5)((l=>[(0,a.Uk)((0,o.zw)(l.row.sku[e.property]),1)])),_:2},1032,["label"])))),128)),(0,a.Wm)(he,{label:"图片",width:"100"},{default:(0,a.w5)((e=>[""==e.row.image?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"up-item-img",onClick:l=>le.setOneImg(e.$index)},[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(fe)])),_:1})],8,N)):(0,a.kq)("",!0),e.row.image?((0,a.wg)(),(0,a.iD)("img",{key:1,style:{width:"40px",height:"40px"},src:e.row.image},null,8,Z)):(0,a.kq)("",!0),e.row.image?((0,a.wg)(),(0,a.iD)("div",{key:2,class:"img-tools",onClick:l=>le.rmImg(e.$index)},[(0,a.Wm)(ae,{style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Wm)(pe)])),_:1})],8,O)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(he,{label:"展示价格",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(he,{label:"可兑换哈希币",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{modelValue:e.row.recovery_price,"onUpdate:modelValue":l=>e.row.recovery_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(he,{label:"成本价",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{modelValue:e.row.cost_price,"onUpdate:modelValue":l=>e.row.cost_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(he,{label:"售价(哈希币)",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{modelValue:e.row.integral_price,"onUpdate:modelValue":l=>e.row.integral_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(he,{label:"库存",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(de,{modelValue:e.row.stock,"onUpdate:modelValue":l=>e.row.stock=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(he,{label:"操作",fixed:"right",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(me,{onClick:l=>le.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.w5)((()=>[T])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])):(0,a.kq)("",!0),(0,a.Wm)(ie,null,{default:(0,a.w5)((()=>[(0,a.Wm)(me,{onClick:le.preStep},{default:(0,a.w5)((()=>[E])),_:1},8,["onClick"]),(0,a.Wm)(me,{type:"primary",onClick:le.ruleNext},{default:(0,a.w5)((()=>[H])),_:1},8,["onClick"]),"edit"==ee.mode?((0,a.wg)(),(0,a.j4)(me,{key:0,type:"primary",onClick:le.saveGoods},{default:(0,a.w5)((()=>[R])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.Wm)(ue,{label:"商品详情",name:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(we,{modelValue:ee.form.content,"onUpdate:modelValue":l[25]||(l[25]=e=>ee.form.content=e),height:600},null,8,["modelValue"]),(0,a.Wm)(ne,{model:ee.form,"label-width":"100px",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,null,{default:(0,a.w5)((()=>[(0,a.Wm)(me,{onClick:le.preStep},{default:(0,a.w5)((()=>[G])),_:1},8,["onClick"]),(0,a.Wm)(me,{type:"primary",onClick:le.saveGoods},{default:(0,a.w5)((()=>[Y])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(Ve,{title:"选择资源",modelValue:ee.imgResourceVisible,"onUpdate:modelValue":l[27]||(l[27]=e=>ee.imgResourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(ye,{"select-num":8,onSelectedFiles:le.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.Wm)(Ve,{title:"选择资源",modelValue:ee.batchDialogVisible,"onUpdate:modelValue":l[28]||(l[28]=e=>ee.batchDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(ye,{"select-num":1,onSelectedFiles:le.selectedBatchImg},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.Wm)(Ve,{title:`设置${ee.batchTitle}`,modelValue:ee.batchVisible,"onUpdate:modelValue":l[31]||(l[31]=e=>ee.batchVisible=e),width:"600px"},{footer:(0,a.w5)((()=>[(0,a._)("span",Q,[(0,a.Wm)(me,{type:"primary",onClick:le.batchFormSubmit},{default:(0,a.w5)((()=>[X])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(ne,{ref:"form",model:ee.batchForm,"label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{label:ee.batchTitle},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:ee.batchForm.field,"onUpdate:modelValue":l[29]||(l[29]=e=>ee.batchForm.field=e),type:"number",style:{width:"200px"}},null,8,["modelValue"]),"recovery_price"==ee.setField||"integral_price"==ee.setField?((0,a.wg)(),(0,a.iD)("div",K,[(0,a.Wm)(de,{modelValue:ee.set_integral_price,"onUpdate:modelValue":l[30]||(l[30]=e=>ee.set_integral_price=e),style:{width:"90px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),J])):(0,a.kq)("",!0),"recovery_price"==ee.setField||"integral_price"==ee.setField?((0,a.wg)(),(0,a.j4)(ce,{key:1,class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(ee.QuestionFilled)))])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title","modelValue"])],64)}t(7658);var le=t(5878);const te=(0,a.RC)((()=>Promise.all([t.e(8285),t.e(6054),t.e(6325)]).then(t.bind(t,1768))));var ae={name:"goodsAdd",components:{Attachment:le.Z,scEditor:te},data(){return{QuestionFilled:"el-icon-QuestionFilled",activeName:"1",imgResourceVisible:!1,dialogVisible:!1,cateId:[],goodsImages:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",ruleItem:{title:"",item:[""]},form:{goods_type:1,name:"",cate_id:"",sub_title:"",image:"",status:"1",delivery_fee:0,sort:0,type:"1",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:-1},cate:[],treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},rules:{goods_type:[{required:!0,message:"请选择商品类型",trigger:"blur"}],name:[{required:!0,message:"请输入商品名",trigger:"blur"}],cateId:[{required:!0,message:"请选择所属分类",trigger:"blur"}],image:[{required:!0,message:"请选择商品主图",trigger:"blur"}]},preItem:[{title:"",item:[""]}],final:[],tableHead:[],ruleTableItem:{sku:[],image:"",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},batchDialogVisible:!1,batchTitle:"",batchVisible:!1,setField:"",batchForm:{field:""},selectImgIndex:-1,mode:"add",recover_price:"0.00",integral_price:"0.00",set_integral_price:"0.00",ratio:0}},mounted(){this.getGoodsCate(),this.getBaseInfo()},watch:{recover_price:{handler(e){this.form.recovery_price=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0},integral_price:{handler(e){this.form.integral_price=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0},set_integral_price:{handler(e){this.batchForm.field=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0}},methods:{async getBaseInfo(){let e=await this.$API.system.base.get();this.ratio=e.data.change_ratio,this.recover_price=(this.form.recovery_price/this.ratio).toFixed(2),this.integral_price=(this.form.integral_price/this.ratio).toFixed(2)},checkType(e){this.form.goods_type=e},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.cate=e.data},removeIcon(e){this.goodsImages.splice(e,1)},selectedFiles(e){this.goodsImages=[],e.forEach((e=>{this.goodsImages.push(e.url)})),this.imgResourceVisible=!1},showImage(){this.imgResourceVisible=!0},nextStep(){this.activeName=parseInt(this.activeName)+1+""},preStep(){this.activeName=parseInt(this.activeName)-1+""},addRule(){let e=JSON.parse(JSON.stringify(this.ruleItem));this.preItem.push(e)},makeRule(){let e=[],l=[];this.preItem.forEach(((t,a)=>{let o=t.item.filter((function(e){return e&&e.trim()}));""!=t.title&&o.length>0&&(e.push({label:t.title,property:a}),l.push(t.item))}));let t=this.calcDescartes(l);this.final=[],this.ruleTableItem={sku:[],image:"",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},t.forEach((e=>{if(e instanceof Array){let l=e.length;if(e.forEach(((l,t)=>{l||e.splice(t,1)})),l!=e.length)return}else if(""==e)return;this.ruleTableItem.sku=e instanceof Array?e:[e];let l=JSON.parse(JSON.stringify(this.ruleTableItem));this.final.push(l)})),this.tableHead=e},delTitle(e){this.preItem.splice(e,1)},delItem(e,l){this.preItem[e].item.splice(l,1)},addNewItem(e){this.preItem[e].item.push("")},calcDescartes(e){return e.length<2?e[0]||[]:e.reduce(((e,l)=>{let t=[];return e.forEach((e=>{l.forEach((l=>{e instanceof Array?t.push([...e,l]):t.push([e,l])}))})),t}))},setBatch(e,l){this.batchTitle=l,this.batchVisible=!0,this.setField=e},batchFormSubmit(){if(""==this.batchForm.field)return this.$message.error("请输入正确的值"),!1;this.final.map((e=>{"stock"!=this.setField&&"spu"!=this.setField?e[this.setField]=Number(this.batchForm.field).toFixed(2):e[this.setField]=this.batchForm.field})),this.batchForm.field="",this.batchVisible=!1,this.set_integral_price="0.00"},selectedBatchImg(e){parseInt(this.selectImgIndex)>=0?(this.final[parseInt(this.selectImgIndex)].image=e[0].url,this.selectImgIndex=-1):this.final.map((l=>{l.image=e[0].url})),this.batchDialogVisible=!1},setOneImg(e){this.batchDialogVisible=!0,this.selectImgIndex=e},rmImg(e){this.final[parseInt(e)].image=""},ruleNext(){if(2==this.form.type&&0==this.final.length)return this.$message.error("请生成多规格属性！"),!1;this.activeName=parseInt(this.activeName)+1+""},async saveGoods(){let e;this.cateId instanceof Array?this.form.cate_id=this.cateId[this.cateId.length-1]:this.form.cate_id=this.cateId,this.form.preItem=this.preItem,this.form.final=this.final,this.form.image=this.goodsImages.join(","),e="edit"==this.mode?await this.$API.goods.edit.post(this.form):await this.$API.goods.add.post(this.form),0==e.code?(this.$message.success("操作成功"),this.$emit("save")):this.$message.error(e.msg)},handleDel(e){this.final.splice(e,1)},ueditorContent(e){this.form.content=e},setMode(e){return this.mode=e,this},setData(e){if(this.form.id=e.id,this.form.goods_type=e.goods_type,this.form.name=e.name,this.sub_title=e.sub_title,this.form.image=e.image,this.form.status=e.status+"",this.form.delivery_fee=e.delivery_fee,this.form.sort=e.sort,this.form.type=e.type+"",this.form.price=e.price,this.form.recovery_price=e.recovery_price,this.form.cost_price=e.cost_price,this.form.integral_price=e.integral_price,this.form.stock=e.stock,this.form.content=e.content,this.cateId=e.cate_id,this.goodsImages=e.image.split(","),e.rule&&(this.preItem=JSON.parse(e.rule.rule)),e.ruleExtend){let l=[];this.preItem.forEach(((e,t)=>{let a=e.item.filter((function(e){return e&&e.trim()}));""!=e.title&&a.length>0&&l.push({label:e.title,property:t})})),this.tableHead=l,e.ruleExtend.map((e=>{if(!(e.sku instanceof Array))return e.sku=e.sku.split("※")})),this.final=e.ruleExtend}}}},oe=t(3744);const ie=(0,oe.Z)(ae,[["render",ee],["__scopeId","data-v-d43547cc"]]);var se=ie},1739:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("确认发货");function s(e,l,t,s,d,r){const m=(0,a.up)("el-option"),n=(0,a.up)("el-select"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-input"),p=(0,a.up)("el-form"),h=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[6]||(l[6]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:l[3]||(l[3]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[4]||(l[4]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流公司名称",prop:"express_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),onChange:r.expressChange,style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.expressList,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.Wm)(u,{label:"物流公司编码",prop:"express_code"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"物流单号",prop:"express_no"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_no,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={name:"integralOrderDelivery",emits:["success","closed"],data(){return{mode:"delivery",titleMap:{delivery:"发货"},expressList:[],visible:!1,isSaveing:!1,form:{order_id:"",user_id:"",express_name:"",express_code:"",express_no:""},deleteIcon:"el-icon-delete",rules:{express_name:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_code:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){this.getExpressList()},methods:{open(e){return this.form.order_id=e.id,this.form.user_id=e.user_id,this.visible=!0,this},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((l=>{l.name==e&&(this.form.express_code=l.code)}))},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.integralOrder.delivery.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},3555:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6252),o=t(3577);const i=(0,a._)("h4",null,"收件信息",-1),s={style:{"font-size":"14px","margin-top":"10px"}},d={style:{"margin-top":"10px"}},r={style:{"margin-top":"10px"}},m={style:{"margin-top":"10px"}};function n(e,l,t,n,u,c){const p=(0,a.up)("el-divider"),h=(0,a.up)("el-table-column"),f=(0,a.up)("el-avatar"),g=(0,a.up)("el-table"),b=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(b,{title:u.titleMap[u.mode],modelValue:u.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>u.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[i,(0,a._)("div",s,[(0,a._)("p",d,"收件人："+(0,o.zw)(u.addressInfo.receiver),1),(0,a._)("p",r,"手机号："+(0,o.zw)(u.addressInfo.phone),1),(0,a._)("p",m," 收件地址："+(0,o.zw)(u.addressInfo.province_name)+(0,o.zw)(u.addressInfo.city_name)+(0,o.zw)(u.addressInfo.area_name)+(0,o.zw)(u.addressInfo.address),1)]),(0,a.Wm)(p),(0,a.Wm)(g,{data:u.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{prop:"goods_id",label:"商品ID"}),(0,a.Wm)(h,{label:"商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(f,{shape:"square",size:36,src:e.row.goods_image},null,8,["src"])])),_:1}),(0,a.Wm)(h,{prop:"goods_name",label:"商品名称"}),(0,a.Wm)(h,{label:"商品规格"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.rule.split("※").join(",")),1)])),_:1}),(0,a.Wm)(h,{prop:"num",label:"数量"}),(0,a.Wm)(h,{prop:"real_pay_amount",label:"实际支付金额"}),(0,a.Wm)(h,{prop:"real_pay_integral",label:"实际支付哈希币"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}t(7658);var u={name:"integralOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"订单详情"},visible:!1,tableData:[],addressInfo:{}}},mounted(){},methods:{open(e){return console.log(e),this.visible=!0,this.tableData.push(e.data),e.addressInfo&&(this.addressInfo=JSON.parse(e.addressInfo)),this}}},c=t(3744);const p=(0,c.Z)(u,[["render",n]]);var h=p},9119:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-tag"),m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:600,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("单号："+(0,o.zw)(s.express_no),1)])),_:1}),(0,a.Wm)(n,{reverse:s.reverse,style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.express,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.time},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.status),1)])),_:2},1032,["timestamp"])))),128))])),_:1},8,["reverse"])])),_:1},8,["title","modelValue"])}var s={name:"integralOrderExpressDetail",emits:["success","closed"],data(){return{mode:"expressDetail",titleMap:{expressDetail:"物流详情"},reverse:!0,visible:!1,express:[],express_no:""}},mounted(){},methods:{open(e){this.visible=!0;let l=JSON.parse(e.express_detail);return l&&(this.express_no=l.result.number,this.express=l.result.list),this}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},3347:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),n=(0,a.up)("el-image"),u=(0,a.up)("el-button"),c=(0,a.up)("el-form");return(0,a.wg)(),(0,a.j4)(c,{ref:"loginForm",model:s.form,rules:s.rules,"label-width":"0",size:"large"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{prop:"user"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.user,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(m,{prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(m,{prop:"captcha"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.captcha,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.captcha=e),"prefix-icon":"el-icon-lock",clearable:"",style:{width:"290px"}},null,8,["modelValue"]),(0,a.Wm)(n,{src:s.captchaSrc,style:{width:"100px",height:"38px","margin-left":"10px",cursor:"pointer"},onClick:d.changeCaptcha},null,8,["src","onClick"])])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"primary",style:{width:"100%"},loading:s.islogin,onClick:d.login},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])}var s={data(){return{userType:"admin",form:{user:"admin",password:"",autologin:!1,captcha:"",key:""},captchaSrc:"",rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},islogin:!1}},mounted(){this.changeCaptcha(),document.onkeydown=e=>{var l=e||window.event;l&&13==l.keyCode&&this.login()}},methods:{async changeCaptcha(){let e=await this.$API.auth.captcha.get();this.captchaSrc="data:image/png;base64,"+e.data.img,this.form.key=e.data.key},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;var l={username:this.form.user,password:this.form.password,captcha:this.form.captcha,key:this.form.key},t=await this.$API.auth.token.post(l);return 0!=t.code?(this.islogin=!1,this.$message.warning(t.msg),this.changeCaptcha(),!1):(this.$TOOL.cookie.set("TOKEN",t.data.token,{expires:this.form.autologin?86400:0}),this.$TOOL.data.set("USER_INFO",t.data.userInfo),0==t.data.menu.length?(this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1):(this.$TOOL.data.set("MENU",t.data.menu),this.$router.replace({path:"/"}),this.$message.success("登录成功"),void(this.islogin=!1)))}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},2426:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6252);const o=(0,a.Uk)("菜单"),i=(0,a.Uk)("功能"),s=(0,a.Uk)("显示"),d=(0,a.Uk)("隐藏"),r=(0,a.Uk)("取 消"),m=(0,a.Uk)("保 存");function n(e,l,t,n,u,c){const p=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),f=(0,a.up)("el-radio"),g=(0,a.up)("el-form"),b=(0,a.up)("el-button"),w=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(w,{title:u.titleMap[u.mode],modelValue:u.visible,"onUpdate:modelValue":l[13]||(l[13]=e=>u.visible=e),width:600,"destroy-on-close":"",onClosed:l[14]||(l[14]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(b,{onClick:l[11]||(l[11]=e=>u.visible=!1)},{default:(0,a.w5)((()=>[r])),_:1}),"show"!=u.mode?((0,a.wg)(),(0,a.j4)(b,{key:0,type:"primary",loading:u.isSaveing,onClick:l[12]||(l[12]=e=>c.submit())},{default:(0,a.w5)((()=>[m])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{model:u.form,rules:u.rules,disabled:"show"==u.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"上级菜单"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>u.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"菜单名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>u.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"图标"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.icon,"onUpdate:modelValue":l[2]||(l[2]=e=>u.form.icon=e),clearable:"",placeholder:"el-icon-suitcase"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"是否菜单"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:1,modelValue:u.form.type,"onUpdate:modelValue":l[3]||(l[3]=e=>u.form.type=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(f,{label:2,modelValue:u.form.type,"onUpdate:modelValue":l[4]||(l[4]=e=>u.form.type=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"权限规则"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.auth,"onUpdate:modelValue":l[5]||(l[5]=e=>u.form.auth=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"前端路由"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.path,"onUpdate:modelValue":l[6]||(l[6]=e=>u.form.path=e),placeholder:"/role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"前端组件"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.component,"onUpdate:modelValue":l[7]||(l[7]=e=>u.form.component=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{type:"number",modelValue:u.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>u.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"是否显示"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:1,modelValue:u.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>u.form.status=e)},{default:(0,a.w5)((()=>[s])),_:1},8,["modelValue"]),(0,a.Wm)(f,{label:2,modelValue:u.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>u.form.status=e)},{default:(0,a.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var u={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增菜单",edit:"编辑菜单",show:"查看"},visible:!1,isSaveing:!1,pname:"顶级菜单",form:{id:"",pid:0,type:1,name:"",auth:"",path:"",icon:"",component:"",sort:1,status:1},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.menu.add.post(this.form):await this.$API.menu.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.type=e.type,this.form.name=e.name,this.form.auth=e.auth,this.form.path=e.path,this.form.icon=e.icon,this.form.component=e.component,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},c=t(3744);const p=(0,c.Z)(u,[["render",n]]);var h=p},9266:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-empty"),m=(0,a.up)("el-descriptions-item"),n=(0,a.up)("el-descriptions"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[""==s.third_return?((0,a.wg)(),(0,a.j4)(r,{key:0,description:"暂无"})):((0,a.wg)(),(0,a.j4)(n,{key:1,title:"",direction:"vertical",column:4,border:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.third_return,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{label:l,key:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e),1)])),_:2},1032,["label"])))),128))])),_:1}))])),_:1},8,["title","modelValue"])}var s={name:"rechargeLogDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"三方信息"},visible:!1,third_return:{}}},mounted(){},methods:{open(e){return this.third_return=e.third_return?JSON.parse(e.third_return):"",this.visible=!0,this}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},4954:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-tree"),f=(0,a.up)("el-form"),g=(0,a.up)("el-button"),b=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(b,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:500,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(g,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(g,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{model:m.form,rules:m.rules,disabled:"show"===m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>["add"===m.mode?((0,a.wg)(),(0,a.j4)(c,{key:0,label:"角色名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),clearable:""},null,8,["modelValue"])])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:1,label:"角色名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.name=e),clearable:"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e),label:"1"},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e),label:"2"},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"分配权限",prop:"rule"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{data:m.treeData,"node-key":"id","show-checkbox":"","highlight-current":"","default-checked-keys":m.checkedId,ref:"menuTree",props:m.defaultProps},null,8,["data","default-checked-keys","props"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7658);var m={emits:["success","closed"],data(){return{checkedId:[15,16],treeData:[],defaultProps:{children:"children",label:"name",id:"id"},mode:"add",titleMap:{add:"新增角色",edit:"编辑角色",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",name:"",rule:"",status:"1"},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],rule:[{required:!0,message:"请分配权限",trigger:"blur"}]}}},mounted(){this.getAllMenu()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this.form.rule=this.checkedId,this},async getAllMenu(){let e=await this.$API.menu.getAllMenu.get();this.treeData=e.data,this.getListData()},getListData(){function e(l,t=[]){return l.forEach((l=>{if(l.children&&0!==l.children.length&&(t.push(l.id),l.children.length))return e(l.children,t)})),t}let l=e(this.treeData);const t=this.form.rule.filter((e=>{if(!l.includes(parseInt(e)))return e}));this.checkedId=t},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;{let e;this.isSaveing=!0;let l=this.$refs.menuTree.getCheckedNodes().concat(this.$refs.menuTree.getHalfCheckedNodes()),t=[];l.forEach((e=>{t.push(e.id)})),this.form.rule=t,e="add"===this.mode?await this.$API.role.add.post(this.form):await this.$API.role.edit.post(this.form),this.isSaveing=!1,0===e.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(e.msg)):this.$message.error(e.msg)}}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.status=e.status.toString(),this.form.rule=e.rule}}},n=t(3744);const u=(0,n.Z)(m,[["render",r]]);var c=u},7598:function(e,l,t){t.r(l),t.d(l,{default:function(){return S}});var a=t(6252);const o=e=>((0,a.dD)("data-v-9fd2101e"),e=e(),(0,a.Cn)(),e),i=(0,a.Uk)("首页"),s=(0,a.Uk)("哈希币商城"),d=o((()=>(0,a._)("span",{style:{color:"#f56c6c","margin-right":"4px"}},"*",-1))),r=(0,a.Uk)(" 选择商品 "),m=(0,a.Uk)("选择盲盒"),n=(0,a.Uk)("选择商品"),u=(0,a.Uk)("删除"),c=(0,a.Uk)("删除"),p={class:"img-list"},h={key:0},f=["src"],g={class:"img-tools"},b=o((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：690*294 ",-1))),w=(0,a.Uk)("正常"),_=(0,a.Uk)("禁用"),y=(0,a.Uk)("取 消"),V=(0,a.Uk)("保 存");function v(e,l,t,o,v,k){const W=(0,a.up)("el-radio"),x=(0,a.up)("el-form-item"),U=(0,a.up)("el-button"),C=(0,a.up)("el-table-column"),I=(0,a.up)("el-table"),S=(0,a.up)("el-input"),$=(0,a.up)("el-icon"),F=(0,a.up)("el-form"),D=(0,a.up)("el-dialog"),q=(0,a.up)("Goods"),j=(0,a.up)("Blindbox"),A=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(D,{title:v.titleMap[v.mode],modelValue:v.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>v.visible=e),width:900,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(U,{onClick:l[7]||(l[7]=e=>v.visible=!1)},{default:(0,a.w5)((()=>[y])),_:1}),"show"!=v.mode?((0,a.wg)(),(0,a.j4)(U,{key:0,type:"primary",loading:v.isSaveing,onClick:l[8]||(l[8]=e=>k.submit())},{default:(0,a.w5)((()=>[V])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(F,{model:v.form,rules:v.rules,disabled:"show"==v.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{label:"位置",prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{label:1,modelValue:v.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>v.form.type=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"]),(0,a.Wm)(W,{label:2,modelValue:v.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>v.form.type=e)},{default:(0,a.w5)((()=>[s])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(x,null,{label:(0,a.w5)((()=>[d,r])),default:(0,a.w5)((()=>[1==v.form.type?((0,a.wg)(),(0,a.j4)(U,{key:0,type:"primary",icon:"el-icon-plus",onClick:k.selectBlindbox,size:"small"},{default:(0,a.w5)((()=>[m])),_:1},8,["onClick"])):(0,a.kq)("",!0),2==v.form.type?((0,a.wg)(),(0,a.j4)(U,{key:1,type:"primary",icon:"el-icon-plus",onClick:k.selectGoods,size:"small"},{default:(0,a.w5)((()=>[n])),_:1},8,["onClick"])):(0,a.kq)("",!0),1==v.form.type?((0,a.wg)(),(0,a.j4)(I,{key:2,data:v.selectedBlindbox,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{prop:"id",label:"ID"}),(0,a.Wm)(C,{prop:"name",label:"盲盒名称"}),(0,a.Wm)(C,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(U,{onClick:l=>k.handleBoxDel(e.row),type:"text",size:"small"},{default:(0,a.w5)((()=>[u])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,a.kq)("",!0),2==v.form.type?((0,a.wg)(),(0,a.j4)(I,{key:3,data:v.selectedGoods,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{prop:"id",label:"ID"}),(0,a.Wm)(C,{prop:"name",label:"商品名"}),(0,a.Wm)(C,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(U,{onClick:l=>k.handleDel(e.row),type:"text",size:"small"},{default:(0,a.w5)((()=>[c])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(x,{label:"轮播描述",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{modelValue:v.form.title,"onUpdate:modelValue":l[2]||(l[2]=e=>v.form.title=e),placeholder:"轮播描述",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(x,{label:"封面图",prop:"pic"},{default:(0,a.w5)((()=>[(0,a._)("ul",p,[v.form.pic?((0,a.wg)(),(0,a.iD)("li",h,[(0,a._)("img",{src:v.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,f),(0,a._)("div",g,[(0,a.Wm)($,{style:{"font-size":"14px",color:"#fff"},onClick:l[3]||(l[3]=e=>k.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(v.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[4]||(l[4]=(...e)=>k.showImage&&k.showImage(...e))},[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(v.plusIcon)))])),_:1})])]),b])])),_:1}),(0,a.Wm)(x,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{label:1,modelValue:v.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>v.form.status=e)},{default:(0,a.w5)((()=>[w])),_:1},8,["modelValue"]),(0,a.Wm)(W,{label:2,modelValue:v.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>v.form.status=e)},{default:(0,a.w5)((()=>[_])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(D,{title:"商品选择",modelValue:v.dialogVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>v.dialogVisible=e),"destroy-on-close":"",width:"50%"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{selectedgoods:v.selectedGoods,onHandleSelected:k.handleSelected,"goods-type":1},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"]),(0,a.Wm)(D,{title:"盲盒选择",modelValue:v.blindboxVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>v.blindboxVisible=e),"destroy-on-close":"",width:"50%"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{selectedBlindbox:v.selectedBlindbox,onHandleSelected:k.handleBoxSelected},null,8,["selectedBlindbox","onHandleSelected"])])),_:1},8,["modelValue"]),(0,a.Wm)(D,{title:"选择资源",modelValue:v.resourceVisible,"onUpdate:modelValue":l[13]||(l[13]=e=>v.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{"select-num":1,onSelectedFiles:k.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var k=t(5878),W=t(9510),x=t(5582),U={emits:["success","closed"],components:{Attachment:k.Z,Goods:W.Z,Blindbox:x.Z},data(){return{mode:"add",titleMap:{add:"添加轮播配置",edit:"编辑轮播配置"},dialogVisible:!1,blindboxVisible:!1,visible:!1,isSaveing:!1,form:{type:1,status:1},options:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择位置",trigger:"blur"}],title:[{required:!0,message:"请填写轮播描述",trigger:"blur"}],pic:[{required:!0,message:"请选择图片",trigger:"blur"}]},resourceVisible:!1,selectedGoods:[],selectedBlindbox:[]}},mounted(){},methods:{open(e){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.sliderSetting.add.post(this.form):await this.$API.sliderSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},selectGoods(){this.dialogVisible=!0},selectBlindbox(){this.blindboxVisible=!0},handleDel(){this.selectedGoods=[],this.form.goods_id=0,this.form.goods_name="",this.form.goods_type=0},handleBoxDel(){this.selectedBlindbox=[],this.form.blindbox_id=0,this.form.blindbox_name=""},setData(e){this.form.type=e.type,this.form.id=e.id,this.form.title=e.title,this.form.goods_id=e.goods_id,this.form.goods_name=e.goods_name,this.form.goods_type=e.goods_type,this.form.pic=e.pic,this.form.status=e.status,this.form.blindbox_id=e.blindbox_id,this.form.blindbox_name=e.blindbox_name,2==e.type?this.selectedGoods=[{id:e.goods_id,name:e.goods_name}]:this.selectedBlindbox=[{id:e.blindbox_id,name:e.blindbox_name}]},handleSelected(e){this.selectedGoods=e,this.form.goods_id=this.selectedGoods[0].id,this.form.goods_type=1,this.form.goods_name=this.selectedGoods[0].name,this.dialogVisible=!1},handleBoxSelected(e){this.selectedBlindbox=e,this.form.blindbox_id=this.selectedBlindbox[0].id,this.form.blindbox_name=this.selectedBlindbox[0].name,this.form.other=this.selectedBlindbox[0].price,this.form.goods_type=2,this.blindboxVisible=!1}}},C=t(3744);const I=(0,C.Z)(U,[["render",v],["__scopeId","data-v-9fd2101e"]]);var S=I},5199:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("保 存");function s(e,l,t,s,d,r){const m=(0,a.up)("el-input"),n=(0,a.up)("el-form-item"),u=(0,a.up)("el-cascader"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>d.visible=e),width:700,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[4]||(l[4]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(p,{key:0,type:"primary",loading:d.isSaveing,onClick:l[5]||(l[5]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"130px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:"收件人姓名",prop:"receiver"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.receiver,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.receiver=e),placeholder:"收件人姓名",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"收件人手机号",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"number",onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",oninput:"if (isNaN(value)) {value = parseFloat(value)}\r\n\t\t\t\t\t\t   if (value.includes('-')) {value = '0'}",modelValue:d.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.phone=e),placeholder:"收件人",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"收件人省市区"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{width:"100%"},modelValue:d.selected_areas,"onUpdate:modelValue":l[2]||(l[2]=e=>d.selected_areas=e),options:d.areas,onChange:r.handleChange},null,8,["modelValue","options","onChange"])])),_:1}),(0,a.Wm)(n,{label:"收件人详细地址",prop:"address"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.address,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.address=e),placeholder:"收件人详细地址",clearable:"",type:"textarea",rows:3},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7658);var d={emits:["success","closed"],data(){return{selected_areas:[],areas:[],mode:"edit",titleMap:{edit:"编辑会员地址",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",receiver:"",phone:"",province_code:"",city_code:"",area_code:"",address:""},rules:{receiver:[{required:!0,message:"请输入收件人名",trigger:"blur"}],phone:[{required:!0,message:"请输入收件人手机号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}}},mounted(){this.getAreas()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAreas(){let e=await this.$API.userAddress.areas.get();this.areas=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,this.form.province_code=this.selected_areas[0],this.form.city_code=this.selected_areas[1],this.form.area_code=this.selected_areas[2],l=await this.$API.userAddress.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.receiver=e.receiver,this.form.phone=e.phone,this.form.province_code=e.province_code,this.form.city_code=e.city_code,this.form.area_code=e.area_code,this.form.address=e.address,this.selected_areas.push(parseInt(e.province_code)),this.selected_areas.push(parseInt(e.city_code)),this.selected_areas.push(parseInt(e.area_code))},handleChange(e){console.log(e)}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-cbb68bdc"]]);var n=m},7490:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252),o=t(3577);const i=(0,a.Uk)("取 消");function s(e,l,t,s,d,r){const m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[i])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流信息"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.activities,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.timestamp},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-5805082a"]]);var n=m},9218:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-descriptions-item"),m=(0,a.up)("el-tag"),n=(0,a.up)("el-descriptions"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"订单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.order_no),1)])),_:1}),(0,a.Wm)(r,{label:"支付订单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_no),1)])),_:1}),(0,a.Wm)(r,{label:"支付金额:"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"small",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.amount),1)])),_:1})])),_:1}),(0,a.Wm)(r,{label:"支付时间:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_time),1)])),_:1}),(0,a.Wm)(r,{label:"支付方式:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_way_txt),1)])),_:1}),(0,a.Wm)(r,{label:"支付状态:"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.status_txt),1)])),_:1})])),_:1}),(0,a.Wm)(r,{label:"三方单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.third_no),1)])),_:1})])),_:1})])),_:1},8,["title","modelValue"])}var s={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看订单支付信息"},visible:!1,info:{}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.getInfo(e.express_order_id)},async getInfo(e){let l=await this.$API.userBoxDeliver.expressOrder.get({id:e});this.info=l.data}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},5731:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("确认发货");function s(e,l,t,s,d,r){const m=(0,a.up)("el-option"),n=(0,a.up)("el-select"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-input"),p=(0,a.up)("el-switch"),h=(0,a.up)("el-table-column"),f=(0,a.up)("el-image"),g=(0,a.up)("el-table"),b=(0,a.up)("el-form"),w=(0,a.up)("el-button"),_=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(_,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>d.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:l[4]||(l[4]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(w,{key:0,type:"primary",loading:d.isSaveing,onClick:l[5]||(l[5]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流公司名称",prop:"express_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),onChange:r.expressChange,style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.expressList,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.Wm)(u,{label:"物流公司编码",prop:"express_code"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"物流单号",prop:"express_no"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_no,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"是否开启分单"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:d.form.splitOrder,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.splitOrder=e)},null,8,["modelValue"])])),_:1}),d.form.splitOrder?((0,a.wg)(),(0,a.j4)(u,{key:0,label:"订单商品"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{data:d.tableData,style:{width:"100%"},onSelectionChange:r.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"selection",width:"55"}),(0,a.Wm)(h,{prop:"id",label:"ID"}),(0,a.Wm)(h,{label:"商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(f,{src:e.row.reward.goods_image,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(h,{prop:"reward.goods_name",label:"商品名称"})])),_:1},8,["data","onSelectionChange"])])),_:1})):(0,a.kq)("",!0)])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7658);var d={emits:["success","closed"],data(){return{areas:[],mode:"deliver",titleMap:{deliver:"发货",show:"查看"},expressList:[],visible:!1,isSaveing:!1,form:{id:"",express_name:"",express_code:"",express_no:"",splitOrder:!1,detailIds:[]},rules:{express_name:[{required:!0,message:"请输入物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]},tableData:[]}},mounted(){this.getExpressList()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userBoxDeliver.deliver.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.getOrderDetail()},handleChange(e){console.log(e)},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((l=>{l.name==e&&(this.form.express_code=l.code)}))},async getOrderDetail(){let e=await this.$API.userBoxDeliverDetail.detail.get({deliver_id:this.form.id});this.tableData=e.data},handleSelectionChange(e){this.form.detailIds=[],e.forEach((e=>{this.form.detailIds.push(e.id)}))}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-a5c0ab9c"]]);var n=m},6831:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252),o=t(3577);const i=(0,a.Uk)("取 消");function s(e,l,t,s,d,r){const m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[i])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流信息"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.activities,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.timestamp},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-71fa4142"]]);var n=m},7732:function(e,l,t){t.r(l),t.d(l,{default:function(){return y}});var a=t(6252);const o={class:"img-list"},i={key:0},s=["src"],d={class:"img-list"},r={key:0},m=["src"],n={style:{width:"100%",display:"flex"}},u=(0,a.Uk)("显示"),c=(0,a.Uk)("隐藏"),p=(0,a.Uk)("取 消"),h=(0,a.Uk)("保 存");function f(e,l,t,f,g,b){const w=(0,a.up)("el-input"),_=(0,a.up)("el-form-item"),y=(0,a.up)("el-icon-delete"),V=(0,a.up)("el-icon"),v=(0,a.up)("el-icon-plus"),k=(0,a.up)("el-option"),W=(0,a.up)("el-select"),x=(0,a.up)("el-radio"),U=(0,a.up)("el-form"),C=(0,a.up)("el-button"),I=(0,a.up)("el-dialog"),S=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{title:g.titleMap[g.mode],modelValue:g.visible,"onUpdate:modelValue":l[14]||(l[14]=e=>g.visible=e),width:800,"destroy-on-close":"",onClosed:l[15]||(l[15]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(C,{onClick:l[12]||(l[12]=e=>g.visible=!1)},{default:(0,a.w5)((()=>[p])),_:1}),"show"!==g.mode?((0,a.wg)(),(0,a.j4)(C,{key:0,type:"primary",loading:g.isSaveing,onClick:l[13]||(l[13]=e=>b.submit())},{default:(0,a.w5)((()=>[h])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(U,{model:g.form,rules:g.rules,ref:"addForm","label-width":"140px"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{label:"等级名称",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>g.form.title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"等级值",prop:"level"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.level,"onUpdate:modelValue":l[1]||(l[1]=e=>g.form.level=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"解锁需经验值达到",prop:"experience"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.experience,"onUpdate:modelValue":l[2]||(l[2]=e=>g.form.experience=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"图标",prop:"icon"},{default:(0,a.w5)((()=>[(0,a._)("ul",o,[g.form.icon?((0,a.wg)(),(0,a.iD)("li",i,[(0,a._)("img",{src:g.form.icon,style:{width:"58px",height:"58px"},alt:"图片"},null,8,s),(0,a._)("div",{class:"img-tools",onClick:l[3]||(l[3]=e=>b.removeImg(1))},[(0,a.Wm)(V,{style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[4]||(l[4]=e=>b.showImage(1))},[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v)])),_:1})])])])])),_:1}),(0,a.Wm)(_,{label:"背景图",prop:"card_bg"},{default:(0,a.w5)((()=>[(0,a._)("ul",d,[g.form.card_bg?((0,a.wg)(),(0,a.iD)("li",r,[(0,a._)("img",{src:g.form.card_bg,style:{width:"58px",height:"58px"},alt:"图片"},null,8,m),(0,a._)("div",{class:"img-tools",onClick:l[5]||(l[5]=e=>b.removeImg(2))},[(0,a.Wm)(V,{style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[6]||(l[6]=e=>b.showImage(2))},[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v)])),_:1})])])])])),_:1}),(0,a.Wm)(_,{label:"赠送优惠券"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(W,{style:{width:"48%"},modelValue:g.form.present.coupon,"onUpdate:modelValue":l[7]||(l[7]=e=>g.form.present.coupon=e),placeholder:"选择优惠券",clearable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.couponList,(e=>((0,a.wg)(),(0,a.j4)(k,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(w,{style:{width:"48%","margin-left":"4%"},modelValue:g.form.present.coupon_num,"onUpdate:modelValue":l[8]||(l[8]=e=>g.form.present.coupon_num=e),type:"number"},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(_,{label:"是否显示",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{modelValue:g.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>g.form.status=e),label:1},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"]),(0,a.Wm)(x,{modelValue:g.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>g.form.status=e),label:2},{default:(0,a.w5)((()=>[c])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"等级说明",prop:"remark"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:g.form.remark,"onUpdate:modelValue":l[11]||(l[11]=e=>g.form.remark=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(I,{title:"选择资源",modelValue:g.imgResourceVisible,"onUpdate:modelValue":l[16]||(l[16]=e=>g.imgResourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{"select-num":1,onSelectedFiles:b.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var g=t(5878),b={components:{Attachment:g.Z},emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增会员等级",edit:"编辑会员等级",show:"查看"},infoFilled:"el-icon-InfoFilled",visible:!1,isSaveing:!1,form:{id:0,title:"",level:0,discount:"1.00",experience:0,icon:"",card_bg:"",status:1,remark:"",present:{coupon:"",coupon_num:1,prop:"",prop_num:1}},couponList:[],rules:{title:[{required:!0,message:"等级名称",trigger:"blur"}],level:[{required:!0,message:"请选择状态",trigger:"blur"}],experience:[{required:!0,message:"请输入解锁经验",trigger:"blur"}]},imgResourceVisible:!1,imgType:1}},mounted(){this.getCouponList()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},showImage(e){this.imgResourceVisible=!0,this.imgType=e},submit(){"edit"===this.mode?this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userLevel.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)})):this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userLevel.add.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},async getCouponList(){let e=await this.$API.coupon.getAll.get();this.couponList=e.data},setData(e){console.log("数据信息",e),this.form.id=e.id,this.form.title=e.title,this.form.level=e.level,this.form.discount=e.discount,this.form.experience=e.experience,this.form.balance=e.balance,this.form.status=e.status,this.form.icon=e.icon,this.form.card_bg=e.card_bg,this.form.remark=e.remark,e.present.forEach((e=>{1==e.type?(this.form.present.coupon=e.present_id,this.form.present.coupon_num=e.present_num):2==e.type&&(this.form.present.prop=e.present_id+"",this.form.present.prop_num=e.present_num)}))},selectedFiles(e){1==this.imgType?this.form.icon=e[0].url:2==this.imgType&&(this.form.card_bg=e[0].url),this.imgResourceVisible=!1},removeImg(e){1==e?this.form.icon="":this.form.card_bg=""}}},w=t(3744);const _=(0,w.Z)(b,[["render",f],["__scopeId","data-v-a6644202"]]);var y=_},7072:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[7]||(l[7]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[8]||(l[8]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>["edit"===m.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,model:m.form,rules:m.editRules,disabled:"show"===m.mode,ref:"editForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"昵称",prop:"nickname"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"手机号"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"登录密码"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.password=e),placeholder:"输入即为更改",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):"add"===m.mode?((0,a.wg)(),(0,a.j4)(h,{key:1,model:m.form,rules:m.addRules,disabled:"show"===m.mode,ref:"addForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"手机号",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.phone,"onUpdate:modelValue":l[5]||(l[5]=e=>m.form.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.password,"onUpdate:modelValue":l[6]||(l[6]=e=>m.form.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):(0,a.kq)("",!0)])),_:1},8,["title","modelValue"])}var m={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增会员",edit:"编辑会员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",nickname:"",avatar:"",phone:"",password:"",integral:0,balance:0,status:1},deleteIcon:"el-icon-delete",editRules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入哈希币",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},addRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){"edit"===this.mode?this.$refs.editForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)})):this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.add.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.nickname=e.nickname,this.form.avatar=e.avatar,this.form.phone=e.phone,this.form.integral=e.integral,this.form.balance=e.balance,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r],["__scopeId","data-v-2db181ba"]]);var c=u}}]);