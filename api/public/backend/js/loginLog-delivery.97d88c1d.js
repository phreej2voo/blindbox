"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1175],{5126:function(e,s,l){l.r(s),l.d(s,{default:function(){return u}});var r=l(6252);const i=(0,r.Uk)("取 消"),t=(0,r.Uk)("确认发货");function a(e,s,l,a,o,d){const m=(0,r.up)("el-option"),u=(0,r.up)("el-select"),n=(0,r.up)("el-form-item"),p=(0,r.up)("el-input"),c=(0,r.up)("el-form"),h=(0,r.up)("el-button"),g=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.j4)(g,{title:o.titleMap[o.mode],modelValue:o.visible,"onUpdate:modelValue":s[5]||(s[5]=e=>o.visible=e),width:600,"destroy-on-close":"",onClosed:s[6]||(s[6]=s=>e.$emit("closed"))},{footer:(0,r.w5)((()=>[(0,r.Wm)(h,{onClick:s[3]||(s[3]=e=>o.visible=!1)},{default:(0,r.w5)((()=>[i])),_:1}),"show"!==o.mode?((0,r.wg)(),(0,r.j4)(h,{key:0,type:"primary",loading:o.isSaveing,onClick:s[4]||(s[4]=e=>d.submit())},{default:(0,r.w5)((()=>[t])),_:1},8,["loading"])):(0,r.kq)("",!0)])),default:(0,r.w5)((()=>[(0,r.Wm)(c,{model:o.form,rules:o.rules,disabled:"show"===o.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{label:"物流公司名称",prop:"express_name","label-width":"150"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:o.form.express_name,"onUpdate:modelValue":s[0]||(s[0]=e=>o.form.express_name=e),onChange:d.expressChange},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.expressList,((e,s)=>((0,r.wg)(),(0,r.j4)(m,{key:s,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.Wm)(n,{label:"物流公司编码",prop:"express_code","label-width":"150"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:o.form.express_code,"onUpdate:modelValue":s[1]||(s[1]=e=>o.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(n,{label:"物流单号",prop:"express_no","label-width":"150"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:o.form.express_no,"onUpdate:modelValue":s[2]||(s[2]=e=>o.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var o={name:"integralOrderDelivery",emits:["success","closed"],data(){return{mode:"delivery",titleMap:{delivery:"发货"},expressList:[],visible:!1,isSaveing:!1,form:{order_id:"",user_id:"",express_name:"",express_code:"",express_no:""},deleteIcon:"el-icon-delete",rules:{express_name:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_code:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){this.getExpressList()},methods:{open(e){return this.form.order_id=e.id,this.form.user_id=e.user_id,this.visible=!0,this},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((s=>{s.name==e&&(this.form.express_code=s.code)}))},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var s;this.isSaveing=!0,s=await this.$API.integralOrder.delivery.post(this.form),this.isSaveing=!1,0===s.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(s.msg)):this.$message.error(s.msg)}))}}},d=l(3744);const m=(0,d.Z)(o,[["render",a]]);var u=m}}]);