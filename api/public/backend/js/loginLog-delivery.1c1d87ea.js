"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4797],{3276:function(e,s,l){l.r(s),l.d(s,{default:function(){return u}});var r=l(7267);const i=(0,r.eW)("取 消"),t=(0,r.eW)("确认发货");function a(e,s,l,a,o,d){const n=(0,r.g2)("el-option"),u=(0,r.g2)("el-select"),m=(0,r.g2)("el-form-item"),p=(0,r.g2)("el-input"),c=(0,r.g2)("el-form"),g=(0,r.g2)("el-button"),b=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.Wv)(b,{title:o.titleMap[o.mode],modelValue:o.visible,"onUpdate:modelValue":s[5]||(s[5]=e=>o.visible=e),width:600,"destroy-on-close":"",onClosed:s[6]||(s[6]=s=>e.$emit("closed"))},{footer:(0,r.k6)((()=>[(0,r.bF)(g,{onClick:s[3]||(s[3]=e=>o.visible=!1)},{default:(0,r.k6)((()=>[i])),_:1}),"show"!==o.mode?((0,r.uX)(),(0,r.Wv)(g,{key:0,type:"primary",loading:o.isSaveing,onClick:s[4]||(s[4]=e=>d.submit())},{default:(0,r.k6)((()=>[t])),_:1},8,["loading"])):(0,r.Q3)("",!0)])),default:(0,r.k6)((()=>[(0,r.bF)(c,{model:o.form,rules:o.rules,disabled:"show"===o.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{label:"物流公司名称",prop:"express_name","label-width":"150"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:o.form.express_name,"onUpdate:modelValue":s[0]||(s[0]=e=>o.form.express_name=e),onChange:d.expressChange},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.expressList,((e,s)=>((0,r.uX)(),(0,r.Wv)(n,{key:s,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.bF)(m,{label:"物流公司编码",prop:"express_code","label-width":"150"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:o.form.express_code,"onUpdate:modelValue":s[1]||(s[1]=e=>o.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(m,{label:"物流单号",prop:"express_no","label-width":"150"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:o.form.express_no,"onUpdate:modelValue":s[2]||(s[2]=e=>o.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var o={name:"integralOrderDelivery",emits:["success","closed"],data(){return{mode:"delivery",titleMap:{delivery:"发货"},expressList:[],visible:!1,isSaveing:!1,form:{order_id:"",user_id:"",express_name:"",express_code:"",express_no:""},deleteIcon:"el-icon-delete",rules:{express_name:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_code:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){this.getExpressList()},methods:{open(e){return this.form.order_id=e.id,this.form.user_id=e.user_id,this.visible=!0,this},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((s=>{s.name==e&&(this.form.express_code=s.code)}))},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var s;this.isSaveing=!0,s=await this.$API.integralOrder.delivery.post(this.form),this.isSaveing=!1,0===s.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(s.msg)):this.$message.error(s.msg)}))}}},d=l(1456);const n=(0,d.A)(o,[["render",a]]);var u=n}}]);