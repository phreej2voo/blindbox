"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[251,9964],{6495:function(e,l,t){t.r(l),t.d(l,{default:function(){return J}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-13de388a"),e=e(),(0,a.Cn)(),e),n={class:"img-list"},m={key:0},s={class:"img-tools"},r=(0,a.Uk)("添加"),u={key:0},d={key:1},p={key:0},c={key:1},w=(0,a.Uk)("删除"),f=(0,a.Uk)("添加"),h={key:0},b={key:1},g={key:0},y={key:1},_=(0,a.Uk)("删除"),k=(0,a.Uk)("天 "),W=i((()=>(0,a._)("p",{style:{"font-size":"12px","margin-left":"120px",color:"#606266","margin-bottom":"18px","margin-top":"5px"}}," 好友绑定关系后，在设定期间内发生的购买支付行为，则推广人可获得相应的奖励 ",-1))),V=i((()=>(0,a._)("p",{style:{"font-size":"12px","margin-left":"120px",color:"#606266","margin-bottom":"18px","margin-top":"5px"}}," 例如：5%，此处填写 0.05 ",-1))),x=(0,a.Uk)("立即保存");function C(e,l,t,i,C,v){const D=(0,a.up)("el-image"),U=(0,a.up)("el-icon"),I=(0,a.up)("el-form-item"),S=(0,a.up)("el-button"),R=(0,a.up)("el-table-column"),z=(0,a.up)("el-table"),F=(0,a.up)("el-input"),q=(0,a.up)("sc-editor"),$=(0,a.up)("el-form"),L=(0,a.up)("el-card"),A=(0,a.up)("el-main"),P=(0,a.up)("Attachment"),j=(0,a.up)("el-dialog"),Z=(0,a.up)("resource");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(L,{shadow:"never",style:{width:"1500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)($,{ref:"form",model:C.form,"label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{label:"活动大图"},{default:(0,a.w5)((()=>[(0,a._)("ul",n,[""!=C.form.pic?((0,a.wg)(),(0,a.iD)("li",m,[(0,a.Wm)(D,{src:C.form.pic,alt:"图片",style:{height:"58px",width:"58px"},"preview-src-list":[C.form.pic]},null,8,["src","preview-src-list"]),(0,a._)("div",s,[(0,a.Wm)(U,{style:{"font-size":"14px",color:"#fff"},onClick:l[0]||(l[0]=e=>v.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(C.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[1]||(l[1]=(...e)=>v.showImage&&v.showImage(...e))},[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(C.plusIcon)))])),_:1})])])])])),_:1}),(0,a.Wm)(I,{label:"注册赠送",style:{width:"1000px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{type:"primary",onClick:l[2]||(l[2]=e=>v.showResource(1))},{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Wm)(z,{data:C.form.reg_send,style:{width:"100%","margin-top":"10px"},border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"类型"},{default:(0,a.w5)((e=>["balance"==e.row.type?((0,a.wg)(),(0,a.iD)("span",u,"余额")):(0,a.kq)("",!0),"coupon"==e.row.type?((0,a.wg)(),(0,a.iD)("span",d,"优惠券")):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(R,{prop:"name",label:"名称"}),(0,a.Wm)(R,{label:"数量"},{default:(0,a.w5)((e=>["balance"==e.row.type?((0,a.wg)(),(0,a.iD)("span",p,(0,o.zw)(e.row.value),1)):((0,a.wg)(),(0,a.iD)("span",c,(0,o.zw)(e.row.num),1))])),_:1}),(0,a.Wm)(R,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(S,{onClick:l=>v.handleDelReg(e.$index),type:"text",size:"small"},{default:(0,a.w5)((()=>[w])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Wm)(I,{label:"首次下单赠送",style:{width:"1000px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{type:"primary",onClick:l[3]||(l[3]=e=>v.showResource(2))},{default:(0,a.w5)((()=>[f])),_:1}),(0,a.Wm)(z,{data:C.form.first_buy_send,style:{width:"100%","margin-top":"10px"},border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"类型"},{default:(0,a.w5)((e=>["balance"==e.row.type?((0,a.wg)(),(0,a.iD)("span",h,"余额")):(0,a.kq)("",!0),"coupon"==e.row.type?((0,a.wg)(),(0,a.iD)("span",b,"优惠券")):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(R,{prop:"name",label:"名称"}),(0,a.Wm)(R,{label:"数量"},{default:(0,a.w5)((e=>["balance"==e.row.type?((0,a.wg)(),(0,a.iD)("span",g,(0,o.zw)(e.row.value),1)):((0,a.wg)(),(0,a.iD)("span",y,(0,o.zw)(e.row.num),1))])),_:1}),(0,a.Wm)(R,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(S,{onClick:l=>v.handleDelOrder(e.$index),type:"text",size:"small"},{default:(0,a.w5)((()=>[_])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Wm)(I,{label:"返佣时限",style:{"margin-bottom":"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:C.form.send_valid_days,"onUpdate:modelValue":l[4]||(l[4]=e=>C.form.send_valid_days=e),style:{width:"880px"},type:"number"},null,8,["modelValue"]),k])),_:1}),W,(0,a.Wm)(I,{label:"返佣比例",style:{"margin-bottom":"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:C.form.rebate_ratio,"onUpdate:modelValue":l[5]||(l[5]=e=>C.form.rebate_ratio=e),style:{width:"880px"},type:"number"},null,8,["modelValue"])])),_:1}),V,(0,a.Wm)(I,{label:"活动介绍"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:C.form.info,"onUpdate:modelValue":l[6]||(l[6]=e=>C.form.info=e),height:600},null,8,["modelValue"])])),_:1}),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{type:"primary",onClick:v.onSubmit},{default:(0,a.w5)((()=>[x])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),(0,a.Wm)(j,{title:"选择资源",modelValue:C.imgResourceVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>C.imgResourceVisible=e),width:1200,"destroy-on-close":"","close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{"select-num":1,onSelectedFiles:v.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.Wm)(j,{title:"选择资源",modelValue:C.resourceVisible,"onUpdate:modelValue":l[8]||(l[8]=e=>C.resourceVisible=e),width:1200,"destroy-on-close":"","close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{onSelectedResource:v.handleResource},null,8,["onSelectedResource"])])),_:1},8,["modelValue"])],64)}t(7658);var v=t(5878);const D=(0,a.Uk)("确认提交");function U(e,l,t,o,i,n){const m=(0,a.up)("el-input"),s=(0,a.up)("el-form-item"),r=(0,a.up)("Coupon"),u=(0,a.up)("el-tab-pane"),d=(0,a.up)("el-tabs"),p=(0,a.up)("el-button"),c=(0,a.up)("el-form"),w=(0,a.up)("el-main");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"form",model:i.form,"label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"赠送数量"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.form.num,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.num=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(s,{label:"赠送种类"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.activeName,"onUpdate:modelValue":l[2]||(l[2]=e=>i.activeName=e),onTabClick:n.handleClick,style:{width:"1200px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"优惠券",name:"first"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{onHandleSelected:n.handleSelectedCoupon},null,8,["onHandleSelected"])])),_:1}),(0,a.Wm)(u,{label:"余额",name:"fourth"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.form.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.value=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{type:"primary",onClick:n.onSubmit},{default:(0,a.w5)((()=>[D])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})}var I=t(5582);const S={class:"search-box"},R=(0,a.Uk)("查询"),z=(0,a._)("div",{style:{width:"100%",height:"0","border-bottom":"#e4e7ed 1px dashed","margin-top":"15px"}},null,-1),F=(0,a.Uk)(" "),q=(0,a.Uk)("满减券"),$=(0,a.Uk)("折扣券"),L={key:0},A={key:1};function P(e,l,t,i,n,m){const s=(0,a.up)("el-input"),r=(0,a.up)("el-form-item"),u=(0,a.up)("el-button"),d=(0,a.up)("el-form"),p=(0,a.up)("el-radio"),c=(0,a.up)("el-table-column"),w=(0,a.up)("el-tag"),f=(0,a.up)("el-table"),h=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",S,[(0,a.Wm)(d,{inline:!0,model:n.searchForm,class:"demo-form-inline","label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"优惠券名"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:n.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"primary",onClick:m.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[R])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),z,(0,a.Wm)(f,{data:n.tableData,style:{width:"100%"},onRowClick:m.singleElection,"highlight-current-row":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{width:"55",label:"选择"},{default:(0,a.w5)((e=>[(0,a.Wm)(p,{class:"radio",modelValue:n.templateSelection,"onUpdate:modelValue":l[1]||(l[1]=e=>n.templateSelection=e),label:e.row.id},{default:(0,a.w5)((()=>[F])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.Wm)(c,{prop:"id",width:"100px",label:"ID"}),(0,a.Wm)(c,{prop:"name",label:"名称"}),(0,a.Wm)(c,{label:"类型",prop:"type"},{default:(0,a.w5)((e=>[1==e.row.type?((0,a.wg)(),(0,a.j4)(w,{key:0,type:"success"},{default:(0,a.w5)((()=>[q])),_:1})):(0,a.kq)("",!0),2==e.row.type?((0,a.wg)(),(0,a.j4)(w,{key:1},{default:(0,a.w5)((()=>[$])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(c,{label:"优惠金额/折扣"},{default:(0,a.w5)((e=>[1==e.row.type?((0,a.wg)(),(0,a.iD)("span",L,(0,o.zw)(e.row.amount),1)):(0,a.kq)("",!0),2==e.row.type?((0,a.wg)(),(0,a.iD)("span",A,(0,o.zw)(e.row.discount),1)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(c,{prop:"status_txt",label:"状态"})])),_:1},8,["data","onRowClick"]),(0,a.Wm)(h,{style:{"margin-top":"10px"},background:"",layout:"->, prev, pager, next","page-size":n.searchForm.limit,onCurrentChange:m.handlePageChange,total:n.page.total},null,8,["page-size","onCurrentChange","total"])],64)}var j={data(){return{searchForm:{status:1,name:"",page:1,limit:10},page:{total:0,logTotal:0},tableData:[],templateSelection:0}},mounted(){this.getList()},methods:{onSubmit(){this.searchForm.page=1,this.getList()},handlePageChange(e){this.searchForm.page=e,this.getList()},async getList(){let e=await this.$API.coupon.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},singleElection(e){this.templateSelection=e.id;let l=this.tableData.filter((l=>l.id===e.id));this.$emit("handleSelected",l)}}},Z=t(3744);const H=(0,Z.Z)(j,[["render",P]]);var E=H,N={components:{blindbox:I.Z,Coupon:E},data(){return{activeName:"first",form:{num:1,type:"coupon",name:"",resourceId:"1",value:0},selectedGoods:[]}},methods:{handleClick(e,l){let t=l.target.getAttribute("id");"tab-first"==t?(this.form.type="coupon",this.form.name="优惠券"):"tab-fourth"==t&&(this.form.type="balance",this.form.name="余额")},handleSelectedCoupon(e){this.form.type="coupon",this.form.resourceId=e[0].id,this.form.name=e[0].name},onSubmit(){this.$emit("selectedResource",this.form)}}};const T=(0,Z.Z)(N,[["render",U]]);var O=T;const Y=(0,a.RC)((()=>Promise.all([t.e(8285),t.e(6054),t.e(6325)]).then(t.bind(t,1768))));var G={components:{Attachment:v.Z,scEditor:Y,resource:O},data(){return{plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",form:{pic:"",reg_send:[],first_buy_send:[],send_valid_days:7,rebate_ratio:.05,info:""},imgResourceVisible:!1,resourceVisible:!1,type:1}},mounted(){this.getInfo()},methods:{async getInfo(){let e=await this.$API.invite.getSetInfo.get();e.data&&(this.form=e.data)},showImage(){this.imgResourceVisible=!0},removeIcon(){this.form.pic=""},selectedFiles(e){this.form.pic=e[0].url,this.imgResourceVisible=!1},async onSubmit(){let e=await this.$API.invite.set.post(this.form);0==e.code?this.$message.success("设置成功"):this.$message.error(e.msg)},showResource(e){this.type=e,this.resourceVisible=!0},handleResource(e){this.resourceVisible=!1,1==this.type?this.form.reg_send.push(e):this.form.first_buy_send.push(e)},handleDelReg(e){this.form.reg_send.splice(e,1)},handleDelOrder(e){this.form.first_buy_send.splice(e,1)}}};const B=(0,Z.Z)(G,[["render",C],["__scopeId","data-v-13de388a"]]);var J=B}}]);