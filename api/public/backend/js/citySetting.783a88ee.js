"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[7306],{8893:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var i=l(7267);const a=e=>((0,i.Qi)("data-v-1c345a48"),e=e(),(0,i.jt)(),e),o=(0,i.eW)("添加省份"),s=a((()=>(0,i.Lk)("div",{style:{width:"100%",height:"0","border-bottom":"#e4e7ed 1px dashed","margin-top":"15px"}},null,-1))),d=(0,i.eW)("显示"),r=(0,i.eW)("隐藏"),m=(0,i.eW)("添加"),n=(0,i.eW)("编辑"),u=(0,i.eW)("删除"),h=(0,i.eW)("启用"),p=(0,i.eW)("禁用"),f={class:"dialog-footer"},c=(0,i.eW)("取 消"),b=(0,i.eW)("确 定");function g(e,t,l,a,g,k){const w=(0,i.g2)("el-button"),_=(0,i.g2)("el-table-column"),y=(0,i.g2)("el-tag"),F=(0,i.g2)("el-table"),V=(0,i.g2)("el-card"),v=(0,i.g2)("el-input"),W=(0,i.g2)("el-form-item"),C=(0,i.g2)("el-radio"),$=(0,i.g2)("el-radio-group"),x=(0,i.g2)("el-form"),P=(0,i.g2)("el-dialog"),I=(0,i.g2)("el-main");return(0,i.uX)(),(0,i.Wv)(I,null,{default:(0,i.k6)((()=>[(0,i.bF)(V,{shadow:"never"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{type:"primary",icon:"el-icon-plus",onClick:k.addTop},{default:(0,i.k6)((()=>[o])),_:1},8,["onClick"]),s,(0,i.bF)(F,{data:g.tableData,style:{width:"100%","margin-top":"20px"},"row-key":"id",lazy:"",load:k.load,"tree-props":{children:"children"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{type:"",prop:"id",label:"编号"}),(0,i.bF)(_,{prop:"name",label:"地区名称"}),(0,i.bF)(_,{prop:"is_show",label:"状态"},{default:(0,i.k6)((e=>[1==e.row.is_show?((0,i.uX)(),(0,i.Wv)(y,{key:0,type:"success"},{default:(0,i.k6)((()=>[d])),_:1})):((0,i.uX)(),(0,i.Wv)(y,{key:1,type:"danger"},{default:(0,i.k6)((()=>[r])),_:1}))])),_:1}),(0,i.bF)(_,{prop:"operation",label:"操作"},{default:(0,i.k6)((e=>[e.row.level<=2?((0,i.uX)(),(0,i.Wv)(w,{key:0,onClick:t=>k.add(e.row),type:"text",size:"small"},{default:(0,i.k6)((()=>[m])),_:2},1032,["onClick"])):(0,i.Q3)("",!0),(0,i.bF)(w,{onClick:t=>k.edit(e.row),type:"text",size:"small"},{default:(0,i.k6)((()=>[n])),_:2},1032,["onClick"]),(0,i.bF)(w,{onClick:t=>k.del(e.row),type:"text",size:"small"},{default:(0,i.k6)((()=>[u])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","load"])])),_:1}),(0,i.bF)(P,{title:g.title,"append-to-body":!0,"close-on-click-modal":!1,modelValue:g.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>g.dialogVisible=e),width:"30%"},{default:(0,i.k6)((()=>[(0,i.bF)(x,{model:g.form,"label-width":"80px",rules:g.rules,ref:"ruleForm"},{default:(0,i.k6)((()=>[g.showParent?((0,i.uX)(),(0,i.Wv)(W,{key:0,label:"上级地区"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{modelValue:g.pname,"onUpdate:modelValue":t[0]||(t[0]=e=>g.pname=e),disabled:!0},null,8,["modelValue"])])),_:1})):(0,i.Q3)("",!0),(0,i.bF)(W,{label:"地区编码",prop:"id"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{modelValue:g.form.id,"onUpdate:modelValue":t[1]||(t[1]=e=>g.form.id=e)},null,8,["modelValue"])])),_:1}),(0,i.bF)(W,{label:"省份名称",prop:"name"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{modelValue:g.form.name,"onUpdate:modelValue":t[2]||(t[2]=e=>g.form.name=e)},null,8,["modelValue"])])),_:1}),(0,i.bF)(W,{label:"是否启用",prop:"is_show"},{default:(0,i.k6)((()=>[(0,i.bF)($,{modelValue:g.form.is_show,"onUpdate:modelValue":t[3]||(t[3]=e=>g.form.is_show=e)},{default:(0,i.k6)((()=>[(0,i.bF)(C,{label:"1"},{default:(0,i.k6)((()=>[h])),_:1}),(0,i.bF)(C,{label:"2"},{default:(0,i.k6)((()=>[p])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,i.Lk)("span",f,[(0,i.bF)(w,{onClick:t[4]||(t[4]=e=>g.dialogVisible=!1)},{default:(0,i.k6)((()=>[c])),_:1}),(0,i.bF)(w,{type:"primary",onClick:t[5]||(t[5]=e=>k.submitForm("ruleForm"))},{default:(0,i.k6)((()=>[b])),_:1})])])),_:1},8,["title","modelValue"])])),_:1})}var k={name:"citySettingIndex",components:{},data(){return{tableData:[],dialogVisible:!1,title:"添加省份",showParent:!1,mode:"add",total:1,form:{id:0,name:"",pid:0,is_show:"1",level:1},pname:"",rules:{name:[{required:!0,message:"请输入名称"}],is_show:[{required:!0,message:"请选择是否启用"}],id:[{required:!0,message:"请输入地区编码"}]}}},mounted(){this.getList()},methods:{async getList(){let e=await this.$API.citySetting.list.get(this.form);this.tableData=e.data},addTop(){this.title="添加省份",this.form.level=1,this.form.pid=0,this.form.id="",this.form.name="",this.showParent=!1,this.mode="add",this.dialogVisible=!0},add(e){this.title="添加地区",this.form.level=e.level+1,this.form.pid=e.id,this.pname=e.name,this.form.name="",this.showParent=!0,this.mode="add",this.dialogVisible=!0},edit(e){this.title="编辑省份",this.form.id=e.id,this.form.name=e.name,this.form.pid=e.pid,this.form.is_show=String(e.is_show),this.form.level=e.level,this.showParent=!1,this.mode="edit",this.dialogVisible=!0},del(e){this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let t=await this.$API.citySetting.del.get({id:e.id});0==t.code?(this.$message.success(t.msg),window.location.reload()):this.$message.error(t.msg)})).catch((()=>{}))},async load(e,t,l){this.form.pid=e.id,this.form.level=e.level+1;let i=await this.$API.citySetting.list.get(this.form);l(i.data)},async submitForm(e){this.$refs[e].validate((async e=>{if(e){let e;e="edit"==this.mode?await this.$API.citySetting.edit.post(this.form):await this.$API.citySetting.add.post(this.form),0==e.code?(this.$message.success(e.msg),this.dialogVisible=!1):this.$message.error(e.msg)}}))}}},w=l(1456);const _=(0,w.A)(k,[["render",g],["__scopeId","data-v-1c345a48"]]);var y=_}}]);