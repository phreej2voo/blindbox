"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1406],{2527:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var l=a(6252);const i=e=>((0,l.dD)("data-v-480b0855"),e=e(),(0,l.Cn)(),e),o={class:"click-bar",style:{width:"300px",display:"flex"}},s=(0,l.Uk)("返回列表 "),n=i((()=>(0,l._)("span",{style:{"font-size":"14px","font-weight":"700","margin-left":"20px"}},"箱子列表",-1))),d=(0,l.Uk)("补箱"),u=i((()=>(0,l._)("div",{class:"line"},null,-1))),p=(0,l.Uk)("在售"),r=(0,l.Uk)("售罄"),m={class:"page-div",style:{"margin-top":"20px"}},c=(0,l.Uk)("取 消"),g=(0,l.Uk)("确 定");function b(e,t,a,i,b,h){const f=(0,l.up)("el-icon-arrow-left"),w=(0,l.up)("el-icon"),_=(0,l.up)("el-card"),k=(0,l.up)("el-button"),y=(0,l.up)("el-table-column"),x=(0,l.up)("el-tag"),W=(0,l.up)("el-table"),C=(0,l.up)("el-pagination"),v=(0,l.up)("el-input"),V=(0,l.up)("el-form-item"),I=(0,l.up)("el-form"),U=(0,l.up)("el-dialog"),$=(0,l.up)("el-main");return(0,l.wg)(),(0,l.j4)($,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{shadow:"false",style:{display:"flex"}},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",{onClick:t[0]||(t[0]=e=>h.goBack()),style:{cursor:"pointer"}},[(0,l.Wm)(w,{class:"back-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(f)])),_:1}),s]),n])])),_:1}),(0,l.Wm)(_,{shadow:"never"},{default:(0,l.w5)((()=>[1==b.playId?((0,l.wg)(),(0,l.j4)(k,{key:0,type:"danger",icon:"el-icon-plus",onClick:h.incBlindbox,style:{"margin-top":"15px"}},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"])):(0,l.kq)("",!0),u,(0,l.Wm)(W,{data:b.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{prop:"id",label:"ID"}),(0,l.Wm)(y,{prop:"box_no",label:"箱号"}),(0,l.Wm)(y,{prop:"sales_cost_price",label:"已销售成本"}),(0,l.Wm)(y,{prop:"sales_amount",label:"销售金额"}),(0,l.Wm)(y,{prop:"profit_loss_amount",label:"总盈亏"}),(0,l.Wm)(y,{prop:"sales",label:"销量"}),(0,l.Wm)(y,{prop:"stock",label:"库存"}),(0,l.Wm)(y,{label:"状态"},{default:(0,l.w5)((e=>[1==e.row.status?((0,l.wg)(),(0,l.j4)(x,{key:0,type:"success"},{default:(0,l.w5)((()=>[p])),_:1})):(0,l.kq)("",!0),2==e.row.status?((0,l.wg)(),(0,l.j4)(x,{key:1,type:"danger"},{default:(0,l.w5)((()=>[r])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1},8,["data"]),(0,l._)("div",m,[(0,l.Wm)(C,{background:"",layout:"->, prev, pager, next","page-size":b.searchForm.limit,onCurrentChange:h.pageChangeHandle,total:b.page.total},null,8,["page-size","onCurrentChange","total"])])])),_:1}),(0,l.Wm)(U,{title:"补箱",modelValue:b.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>b.dialogVisible=e),width:"400px"},{footer:(0,l.w5)((()=>[(0,l.Wm)(k,{onClick:t[2]||(t[2]=e=>b.dialogVisible=!1)},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(k,{type:"primary",onClick:h.doInc},{default:(0,l.w5)((()=>[g])),_:1},8,["onClick"])])),default:(0,l.w5)((()=>[(0,l.Wm)(I,{model:b.form,"label-width":"120px"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{label:"新增箱数"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{modelValue:b.form.num,"onUpdate:modelValue":t[1]||(t[1]=e=>b.form.num=e),type:"number"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1})}a(7658);var h={name:"boxes",data(){return{dialogVisible:!1,tableData:[],searchForm:{blindbox_id:this.$route.query.id,page:1,limit:15},playId:this.$route.query.playId,page:{total:1},form:{blindbox_id:this.$route.query.id,num:0}}},mounted(){this.getList()},methods:{search(){this.getList()},async getList(){let e=await this.$API.blindboxDetail.boxesList.get(this.searchForm);this.tableData=e.data.data,this.page.total=e.data.total},handleSuccess(){this.getList()},pageChangeHandle(e){this.searchForm.page=e,this.getList()},goBack(){this.$router.push({path:"/blindbox/index"})},incBlindbox(){this.dialogVisible=!0},async doInc(){let e=await this.$API.blindboxDetail.incBoxes.post(this.form);0==e.code?(this.$message.success("补箱成功"),this.dialogVisible=!1,this.getList()):this.$message.error(e.msg)}}},f=a(3744);const w=(0,f.Z)(h,[["render",b],["__scopeId","data-v-480b0855"]]);var _=w}}]);