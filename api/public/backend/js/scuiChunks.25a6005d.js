"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[8749],{940:function(e,l,t){t.d(l,{A:function(){return O}});var a=t(7267),o=t(5710);const i=e=>((0,a.Qi)("data-v-528c2489"),e=e(),(0,a.jt)(),e),s={style:{padding:"20px"}},d=i((()=>(0,a.Lk)("span",{class:"cate-title"},"全部资源",-1))),r={class:"el-dropdown-link"},n=(0,a.eW)("添加分类"),u={id:"cate-tree"},m=["onClick"],c={class:"el-dropdown-link"},p=(0,a.eW)("添加分类"),h=(0,a.eW)("编辑分类"),f=(0,a.eW)("删除分类"),b=["onClick"],g={class:"el-dropdown-link"},k=(0,a.eW)("编辑分类"),_=(0,a.eW)("删除分类"),y={style:{width:"400px"}},v=(0,a.eW)("使用资源"),F=(0,a.eW)("上传图片"),V=(0,a.eW)("上传视频"),w=(0,a.eW)("删除文件"),x={key:0,class:"img-box",style:{"margin-right":"20px"}},C=(0,a.eW)("上传中"),W=["onClick"],I={key:1,width:"100",height:"100",controls:""},S=["src","type"],$=(0,a.eW)(" 您的浏览器不支持 video 标签。 "),U={key:2,class:"user-selected"},L={class:"image-name"},X={class:"dialog-footer"},D=(0,a.eW)("取消"),A=(0,a.eW)("确定");function q(e,l,t,i,q,E){const P=(0,a.g2)("el-icon"),Q=(0,a.g2)("el-dropdown-item"),M=(0,a.g2)("el-dropdown-menu"),z=(0,a.g2)("el-dropdown"),O=(0,a.g2)("el-aside"),N=(0,a.g2)("el-button"),B=(0,a.g2)("el-badge"),T=(0,a.g2)("el-upload"),G=(0,a.g2)("el-header"),R=(0,a.g2)("el-progress"),Y=(0,a.g2)("el-image"),K=(0,a.g2)("el-pagination"),H=(0,a.g2)("el-main"),J=(0,a.g2)("el-container"),j=(0,a.g2)("el-input"),Z=(0,a.g2)("el-form-item"),ee=(0,a.g2)("el-form"),le=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(J,{style:{height:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(O,{width:t.needSelect?"300px":"400px",style:{height:"100%"}},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",s,[(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"tree-item",onClick:l[1]||(l[1]=e=>E.itemData(0))},[d,(0,a.bF)(z,{onCommand:l[0]||(l[0]=e=>E.handleCommand(e,{id:0})),style:{float:"right"}},{dropdown:(0,a.k6)((()=>[(0,a.bF)(M,null,{default:(0,a.k6)((()=>[(0,a.bF)(Q,{command:"addTop"},{default:(0,a.k6)((()=>[n])),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("span",r,[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(q.iconMore)))])),_:1})])])),_:1})])]),(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.cateTree,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[e.children&&0!=e.children.length?((0,a.uX)(),(0,a.Wv)(P,{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)("block"==q.showSub&&e.id==q.nowSubId?q.icon:q.iconRight),{onClick:l=>E.toggleSub(e)},null,8,["onClick"]))])),_:2},1024)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"tree-item",onClick:l=>E.itemData(e.id)},[(0,a.Lk)("span",{class:(0,o.C4)(["cate-title",{active:q.cate_id==e.id}])},(0,o.v_)(e.name),3),(0,a.bF)(z,{onCommand:l=>E.handleCommand(l,e),style:{float:"right"},class:(0,o.C4)({"menu-right":e.children&&0!=e.children.length})},{dropdown:(0,a.k6)((()=>[(0,a.bF)(M,null,{default:(0,a.k6)((()=>[(0,a.bF)(Q,{command:"add"},{default:(0,a.k6)((()=>[p])),_:1}),(0,a.bF)(Q,{command:"edit"},{default:(0,a.k6)((()=>[h])),_:1}),(0,a.bF)(Q,{command:"del"},{default:(0,a.k6)((()=>[f])),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("span",c,[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(q.iconMore)))])),_:1})])])),_:2},1032,["onCommand","class"])],8,m),e.children&&0!=e.children.length?((0,a.uX)(),(0,a.CE)("ul",{key:1,class:"child-sub",style:(0,o.Tr)({display:e.id==q.nowSubId?q.showSub:"none"})},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.children,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.Lk)("div",{class:"tree-item",onClick:l=>E.itemData(e.id)},[(0,a.Lk)("span",{class:(0,o.C4)(["cate-title sub-name",{active:q.cate_id==e.id}]),style:{width:"100px !important"}},(0,o.v_)(e.name),3),(0,a.bF)(z,{onCommand:l=>E.handleCommand(l,e),style:{float:"right",top:"-16px",left:"2px"}},{dropdown:(0,a.k6)((()=>[(0,a.bF)(M,null,{default:(0,a.k6)((()=>[(0,a.bF)(Q,{command:"edit"},{default:(0,a.k6)((()=>[k])),_:1}),(0,a.bF)(Q,{command:"del"},{default:(0,a.k6)((()=>[_])),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("span",g,[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(q.iconMore)))])),_:1})])])),_:2},1032,["onCommand"])],8,b)])))),128))],4)):(0,a.Q3)("",!0)])))),128))])])])),_:1},8,["width"]),(0,a.bF)(H,{style:{height:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(J,null,{default:(0,a.k6)((()=>[(0,a.bF)(G,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",y,[t.needSelect?((0,a.uX)(),(0,a.Wv)(B,{key:0,value:q.selectedIds.length,class:"item",style:{"margin-right":"15px"}},{default:(0,a.k6)((()=>[(0,a.bF)(N,{type:"success",icon:"el-icon-Finished",size:"small",style:{"font-size":"12px"},disabled:!q.selectedIds.length>0,onClick:E.confirmToUse},{default:(0,a.k6)((()=>[v])),_:1},8,["disabled","onClick"])])),_:1},8,["value"])):(0,a.Q3)("",!0),(0,a.bF)(T,{class:"upload-demo",headers:q.header,action:q.uploadImgUrl,data:{cate_id:q.cate_id},"show-file-list":!1,"before-upload":E.handleBefore,"on-success":E.handleSuccess,"on-progress":E.handleProgress,limit:1},{default:(0,a.k6)((()=>[(0,a.bF)(N,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.k6)((()=>[F])),_:1})])),_:1},8,["headers","action","data","before-upload","on-success","on-progress"]),(0,a.bF)(T,{class:"upload-demo",headers:q.header,action:q.uploadVideoUrl,data:{cate_id:q.cate_id},"show-file-list":!1,"before-upload":E.handleBefore,"on-success":E.handleSuccess,"on-progress":E.handleProgress,limit:1},{default:(0,a.k6)((()=>[(0,a.bF)(N,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.k6)((()=>[V])),_:1})])),_:1},8,["headers","action","data","before-upload","on-success","on-progress"]),(0,a.bF)(N,{type:"danger",icon:"el-icon-DeleteFilled",size:"small",style:{"font-size":"12px"},disabled:!q.selectedIds.length>0,onClick:E.delFile},{default:(0,a.k6)((()=>[w])),_:1},8,["disabled","onClick"])])])),_:1}),(0,a.bF)(H,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:"imgList",style:(0,o.Tr)(t.needSelect?"width:710px":"width:1190px")},[q.uploading?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(R,{type:"circle",percentage:q.uplodPercent},{default:(0,a.k6)((()=>[C])),_:1},8,["percentage"])])):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.fileList,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)(["img-box",{"clear-margin":l%q.oneLineNum==1}]),key:e.id},[(0,a.Lk)("div",{class:"item-box",onClick:l=>E.selectFile(e)},[1==e.file_type?((0,a.uX)(),(0,a.Wv)(Y,{key:0,style:{width:"100px",height:"100px"},"preview-src-list":q.srcList,src:e.url},null,8,["preview-src-list","src"])):(0,a.Q3)("",!0),2==e.file_type?((0,a.uX)(),(0,a.CE)("video",I,[(0,a.Lk)("source",{src:e.url,type:e.mine},null,8,S),$])):(0,a.Q3)("",!0),-1!=q.selectedIds.indexOf(e.id)?((0,a.uX)(),(0,a.CE)("div",U," 选中 ")):(0,a.Q3)("",!0)],8,W),(0,a.Lk)("div",L,(0,o.v_)(e.filename),1)],2)))),128))],4),(0,a.bF)(K,{background:"",layout:"->, prev, pager, next","page-size":t.pageSize,onCurrentChange:E.handlePageChange,total:q.total},null,8,["page-size","onCurrentChange","total"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(le,{modelValue:q.dialogFormVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>q.dialogFormVisible=e),title:"分类管理",width:"500px"},{footer:(0,a.k6)((()=>[(0,a.Lk)("span",X,[(0,a.bF)(N,{onClick:l[3]||(l[3]=e=>q.dialogFormVisible=!1)},{default:(0,a.k6)((()=>[D])),_:1}),(0,a.bF)(N,{type:"primary",onClick:E.submitCate,loading:q.loading},{default:(0,a.k6)((()=>[A])),_:1},8,["onClick","loading"])])])),default:(0,a.k6)((()=>[(0,a.bF)(ee,{model:q.cateForm},{default:(0,a.k6)((()=>[(0,a.bF)(Z,{label:"分类名称","label-width":q.formLabelWidth},{default:(0,a.k6)((()=>[(0,a.bF)(j,{modelValue:q.cateForm.name,"onUpdate:modelValue":l[2]||(l[2]=e=>q.cateForm.name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}t(7414);var E=t(2383),P=t(9253),Q={props:{needSelect:{type:Boolean,default:!0},selectNum:{type:Number,default:0},fileType:{type:Number,default:1},pageSize:{type:Number,default:18}},data(){return{cate_id:0,cateForm:{pid:0,name:""},uploadImgUrl:E.A.API_URL+"/system.attachment/uploadPicture",uploadVideoUrl:E.A.API_URL+"/system.attachment/uploadVideo",header:{Authorization:E.A.TOKEN_PREFIX+P.A.cookie.get("TOKEN")},srcList:[],fileList:[],oneLineNum:10,page:1,total:1,uploading:!1,uplodPercent:0,selectedFile:[],selectedIds:[],formLabelWidth:80,dialogFormVisible:!1,loading:!1,cateTree:[],nowSubId:0,showSub:"none",icon:"el-icon-CaretBottom",iconRight:"el-icon-CaretRight",iconMore:"el-icon-MoreFilled"}},mounted(){this.getAttachmentCate(),this.needSelect&&(this.oneLineNum=6),this.getResource()},methods:{handleCommand(e,l){"add"==e?(this.cateForm.pid=l.id,this.dialogFormVisible=!0):"addTop"==e?(this.cateForm.pid=0,this.dialogFormVisible=!0):"edit"==e?(this.cateForm.id=l.id,this.cateForm.pid=l.pid,this.cateForm.name=l.name,this.dialogFormVisible=!0):"del"==e&&this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.$API.attachmentCate.del.get({id:l.id});0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg)})).catch((()=>{}))},itemData(e){this.cate_id=e,this.getResource()},toggleSub(e){this.nowSubId=e.id,this.showSub="none"===this.showSub?"block":"none"},async getAttachmentCate(){let e=await this.$API.attachmentCate.list.get();this.cateTree=e.data},async submitCate(){if(""==this.cateForm.name)return void this.$message.error("请输入分类名称");let e;this.loading=!0,e=this.cateForm.id?await this.$API.attachmentCate.edit.post(this.cateForm):await this.$API.attachmentCate.add.post(this.cateForm),this.loading=!1,0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg),this.dialogFormVisible=!1},async getResource(){let e=await this.$API.attachment.list.get({cate_id:this.cate_id,page:this.page,limit:this.pageSize});0==e.code&&(this.fileList=e.data.rows,this.total=e.data.total)},handlePageChange(e){this.page=e,this.getResource()},handleBefore(){this.uploading=!0},handleSuccess(){this.uploading=!1,this.$message.success("上传成功"),this.getResource()},handleProgress(e){this.uplodPercent=e.percent},previewPic(e){this.srcList=[],this.srcList.push(e)},selectFile(e){if(this.needSelect&&this.fileType!=parseInt(e.file_type)){let e="图片";return 2==this.fileType&&(e="视频"),void this.$message.error("只可以选择"+e)}if(-1!=this.selectedIds.indexOf(e.id))this.selectedIds.splice(this.selectedIds.indexOf(e.id),1),this.selectedFile.splice(this.selectedIds.indexOf(e.id),1);else{if(this.needSelect&&this.selectedIds.length+1>this.selectNum)return void this.$message.error("最多选则"+this.selectNum+"个");this.selectedIds.push(e.id),this.selectedFile.push(e)}},confirmToUse(){let e=JSON.parse(JSON.stringify(this.selectedFile));this.$emit("selectedFiles",e),this.selectedIds=[],this.selectedFile=[]},async delFile(){if(0==this.selectedIds.length)return void this.$message.error("请先选择要删除的资源");let e=await this.$API.attachment.del.get({ids:this.selectedIds});0==e.code?(this.$message.success("删除成功"),this.getResource(),this.selectedFile=[],this.selectedIds=[]):this.$message.error(e.msg)}}},M=t(1456);const z=(0,M.A)(Q,[["render",q],["__scopeId","data-v-528c2489"]]);var O=z},4783:function(e,l,t){t.d(l,{A:function(){return p}});var a=t(7267);const o={class:"goods-select"},i={class:"search-box"},s=(0,a.eW)("查询"),d=(0,a.eW)(" "),r={class:"page-div",style:{"margin-top":"20px"}};function n(e,l,t,n,u,m){const c=(0,a.g2)("el-input"),p=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-form"),b=(0,a.g2)("el-radio"),g=(0,a.g2)("el-table-column"),k=(0,a.g2)("el-image"),_=(0,a.g2)("el-table"),y=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",i,[(0,a.bF)(f,{inline:!0,model:u.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:"盲盒名称"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:u.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>u.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"primary",onClick:m.onSubmit,icon:"el-icon-search"},{default:(0,a.k6)((()=>[s])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.bF)(_,{data:u.tableData,"row-style":{height:"57px"},onRowClick:m.singleElection,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{width:"55",label:"选择"},{default:(0,a.k6)((e=>[(0,a.bF)(b,{class:"radio",modelValue:u.templateSelection,"onUpdate:modelValue":l[1]||(l[1]=e=>u.templateSelection=e),label:e.row.id},{default:(0,a.k6)((()=>[d])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.bF)(g,{prop:"id",label:"盲盒ID"}),(0,a.bF)(g,{label:"盲盒主图"},{default:(0,a.k6)((e=>[(0,a.bF)(k,{src:e.row.pic,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(g,{prop:"name",label:"盲盒名称"})])),_:1},8,["data","onRowClick"]),(0,a.Lk)("div",r,[(0,a.bF)(y,{background:"",layout:"->, prev, pager, next","page-size":u.searchForm.limit,onCurrentChange:m.pageChangeHandle,total:u.page.total},null,8,["page-size","onCurrentChange","total"])])])}var u={props:{selectedBox:{type:Array,default:()=>[]},pageSize:{type:Number,default:10}},data(){return{searchForm:{name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.getBlindboxList()},methods:{async getBlindboxList(){let e=await this.$API.blindbox.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},singleElection(e){this.templateSelection=e.id;let l=this.tableData.filter((l=>l.id===e.id));this.$emit("handleSelected",l)},pageChangeHandle(e){this.searchForm.page=e,this.getBlindboxList()},onSubmit(){this.getBlindboxList()}}},m=t(1456);const c=(0,m.A)(u,[["render",n]]);var p=c},7561:function(e,l,t){t.d(l,{A:function(){return y}});var a=t(7267),o=t(5710);const i={class:"goods-select"},s={class:"search-box"},d=(0,a.eW)("查询"),r=(0,a.eW)(" "),n=(0,a.eW)("普通商品"),u=(0,a.eW)("盲盒商品"),m={key:0},c={key:1},p=(0,a.eW)("上架"),h=(0,a.eW)("下架"),f={class:"page-div",style:{"margin-top":"20px"}};function b(e,l,t,b,g,k){const _=(0,a.g2)("el-input"),y=(0,a.g2)("el-form-item"),v=(0,a.g2)("el-cascader"),F=(0,a.g2)("el-button"),V=(0,a.g2)("el-form"),w=(0,a.g2)("el-radio"),x=(0,a.g2)("el-table-column"),C=(0,a.g2)("el-image"),W=(0,a.g2)("el-tag"),I=(0,a.g2)("el-table"),S=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",s,[(0,a.bF)(V,{inline:!0,model:g.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"商品名称"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:g.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>g.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(y,{label:"商品分类"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:e.selectedCate,"onUpdate:modelValue":l[1]||(l[1]=l=>e.selectedCate=l),options:e.goodsCate,props:g.treeProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{type:"primary",onClick:k.onSubmit,icon:"el-icon-search"},{default:(0,a.k6)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.bF)(I,{data:g.tableData,"row-style":{height:"57px"},"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.k6)((()=>[(0,a.bF)(x,{width:"55",label:"选择"},{default:(0,a.k6)((e=>[(0,a.bF)(w,{class:"radio",onChange:l=>k.handleRadioChange(e.row),modelValue:g.templateSelection,"onUpdate:modelValue":l[2]||(l[2]=e=>g.templateSelection=e),label:e.row.id},{default:(0,a.k6)((()=>[r])),_:2},1032,["onChange","modelValue","label"])])),_:1}),(0,a.bF)(x,{prop:"id",label:"商品ID"}),(0,a.bF)(x,{label:"商品图"},{default:(0,a.k6)((e=>[(0,a.bF)(C,{src:e.row.image.split(",")[0],style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(x,{prop:"name",label:"商品名称"}),(0,a.bF)(x,{prop:"cate.name",label:"商品分类"}),(0,a.bF)(x,{label:"商品类型"},{default:(0,a.k6)((e=>[1==e.row.goods_type?((0,a.uX)(),(0,a.Wv)(W,{key:0,type:"danger"},{default:(0,a.k6)((()=>[n])),_:1})):(0,a.Q3)("",!0),2==e.row.goods_type?((0,a.uX)(),(0,a.Wv)(W,{key:1,type:"success"},{default:(0,a.k6)((()=>[u])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(x,{prop:"price",label:"商品售价"}),(0,a.bF)(x,{prop:"sales",label:"销量"}),(0,a.bF)(x,{label:"库存"},{default:(0,a.k6)((e=>[-1==e.row.stock?((0,a.uX)(),(0,a.CE)("span",m,"无限库存")):((0,a.uX)(),(0,a.CE)("span",c,(0,o.v_)(e.row.stock),1))])),_:1}),(0,a.bF)(x,{label:"状态"},{default:(0,a.k6)((e=>[1==e.row.status?((0,a.uX)(),(0,a.Wv)(W,{key:0,type:"success"},{default:(0,a.k6)((()=>[p])),_:1})):(0,a.Q3)("",!0),2==e.row.status?((0,a.uX)(),(0,a.Wv)(W,{key:1,type:"danger"},{default:(0,a.k6)((()=>[h])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["data"]),(0,a.Lk)("div",f,[(0,a.bF)(S,{background:"",layout:"->, prev, pager, next","page-size":g.searchForm.limit,onCurrentChange:k.pageChangeHandle,total:g.page.total},null,8,["page-size","onCurrentChange","total"])])])}var g={props:{selectedgoods:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},goodsType:{type:Number,default:0}},data(){return{treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},searchForm:{goods_type:"",cate_id:"",status:1,name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.searchForm.limit=this.pageSize,this.searchForm.goods_type=this.goodsType,this.getGoodsList(),this.getGoodsCate()},methods:{async getGoodsList(){let e=await this.$API.goods.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.goodsCate=e.data},handleRadioChange(e){this.templateSelection=e.id,this.selectedGoods=this.tableData.filter((l=>l.id===e.id)),this.$emit("handleSelected",this.selectedGoods)},pageChangeHandle(e){this.searchForm.page=e,this.getGoodsList()},onSubmit(){this.selectedCate?(1==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[0]),2==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[1])):this.searchForm.cate_id="",this.getGoodsList()}}},k=t(1456);const _=(0,k.A)(g,[["render",b]]);var y=_},6480:function(e,l,t){t.d(l,{A:function(){return y}});var a=t(7267),o=t(5710);const i={class:"goods-select"},s={class:"search-box"},d=(0,a.eW)("查询"),r=(0,a.eW)("确认使用"),n=(0,a.eW)("普通商品"),u=(0,a.eW)("盲盒商品"),m={key:0},c={key:1},p=(0,a.eW)("上架"),h=(0,a.eW)("下架"),f={class:"page-div",style:{"margin-top":"20px"}};function b(e,l,t,b,g,k){const _=(0,a.g2)("el-input"),y=(0,a.g2)("el-form-item"),v=(0,a.g2)("el-cascader"),F=(0,a.g2)("el-button"),V=(0,a.g2)("el-form"),w=(0,a.g2)("el-table-column"),x=(0,a.g2)("el-image"),C=(0,a.g2)("el-tag"),W=(0,a.g2)("el-table"),I=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",s,[(0,a.bF)(V,{inline:!0,model:g.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"商品名称"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:g.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>g.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(y,{label:"商品分类"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:e.selectedCate,"onUpdate:modelValue":l[1]||(l[1]=l=>e.selectedCate=l),options:e.goodsCate,props:g.treeProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{type:"primary",onClick:k.onSubmit,icon:"el-icon-search"},{default:(0,a.k6)((()=>[d])),_:1},8,["onClick"]),(0,a.bF)(F,{disabled:0===g.templateSelection.length,type:"danger",onClick:k.useSelect,icon:"el-icon-promotion"},{default:(0,a.k6)((()=>[r])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.bF)(W,{data:g.tableData,"row-style":{height:"57px"},onSelectionChange:k.handleSelectionChange,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.k6)((()=>[(0,a.bF)(w,{type:"selection",width:"55"}),(0,a.bF)(w,{prop:"id",label:"商品ID"}),(0,a.bF)(w,{label:"商品图"},{default:(0,a.k6)((e=>[(0,a.bF)(x,{src:e.row.image.split(",")[0],style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(w,{prop:"name",label:"商品名称"}),(0,a.bF)(w,{prop:"cate.name",label:"商品分类"}),(0,a.bF)(w,{label:"商品类型"},{default:(0,a.k6)((e=>[1==e.row.goods_type?((0,a.uX)(),(0,a.Wv)(C,{key:0,type:"danger"},{default:(0,a.k6)((()=>[n])),_:1})):(0,a.Q3)("",!0),2==e.row.goods_type?((0,a.uX)(),(0,a.Wv)(C,{key:1,type:"success"},{default:(0,a.k6)((()=>[u])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(w,{prop:"price",label:"商品售价"}),(0,a.bF)(w,{prop:"sales",label:"销量"}),(0,a.bF)(w,{label:"库存"},{default:(0,a.k6)((e=>[-1==e.row.stock?((0,a.uX)(),(0,a.CE)("span",m,"无限库存")):((0,a.uX)(),(0,a.CE)("span",c,(0,o.v_)(e.row.stock),1))])),_:1}),(0,a.bF)(w,{label:"状态"},{default:(0,a.k6)((e=>[1==e.row.status?((0,a.uX)(),(0,a.Wv)(C,{key:0,type:"success"},{default:(0,a.k6)((()=>[p])),_:1})):(0,a.Q3)("",!0),2==e.row.status?((0,a.uX)(),(0,a.Wv)(C,{key:1,type:"danger"},{default:(0,a.k6)((()=>[h])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Lk)("div",f,[(0,a.bF)(I,{background:"",layout:"->, prev, pager, next","page-size":g.searchForm.limit,onCurrentChange:k.pageChangeHandle,total:g.page.total},null,8,["page-size","onCurrentChange","total"])])])}var g={props:{selectedgoods:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},goodsType:{type:Number,default:0}},data(){return{treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},searchForm:{goods_type:"",cate_id:"",status:1,name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:[]}},mounted(){this.searchForm.limit=this.pageSize,this.searchForm.goods_type=this.goodsType,this.getGoodsList(),this.getGoodsCate()},methods:{async getGoodsList(){let e=await this.$API.goods.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.goodsCate=e.data},handleSelectionChange(e){this.templateSelection=e},useSelect(){if(0===this.templateSelection.length)return void this.$message.error("请选择盲盒");let e=JSON.parse(JSON.stringify(this.templateSelection));this.templateSelection=[],this.$emit("handleSelected",e)},pageChangeHandle(e){this.searchForm.page=e,this.getGoodsList()},onSubmit(){this.selectedCate?(1==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[0]),2==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[1])):this.searchForm.cate_id="",this.getGoodsList()}}},k=t(1456);const _=(0,k.A)(g,[["render",b]]);var y=_},7835:function(e,l,t){t.d(l,{A:function(){return V}});var a=t(7267);const o=(0,a.eW)("确认提交");function i(e,l,t,i,s,d){const r=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("Coupon"),m=(0,a.g2)("el-tab-pane"),c=(0,a.g2)("el-tabs"),p=(0,a.g2)("el-button"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.Wv)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{ref:"form",model:s.form,"label-width":"80px"},{default:(0,a.k6)((()=>["first"==s.activeName?((0,a.uX)(),(0,a.Wv)(n,{key:0,label:"赠送数量"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:s.form.num,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.num=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(n,{label:"赠送种类"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.activeName,"onUpdate:modelValue":l[2]||(l[2]=e=>s.activeName=e),onTabClick:d.handleClick,style:{width:"1200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"优惠券",name:"first"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{onHandleSelected:d.handleSelectedCoupon},null,8,["onHandleSelected"])])),_:1}),(0,a.bF)(m,{label:"余额",name:"fourth"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:s.form.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.value=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{type:"primary",onClick:d.onSubmit},{default:(0,a.k6)((()=>[o])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})}var s=t(4783),d=t(5710);const r={class:"search-box"},n=(0,a.eW)("查询"),u=(0,a.Lk)("div",{style:{width:"100%",height:"0","border-bottom":"#e4e7ed 1px dashed","margin-top":"15px"}},null,-1),m=(0,a.eW)(" "),c=(0,a.eW)("满减券"),p=(0,a.eW)("折扣券"),h={key:0},f={key:1};function b(e,l,t,o,i,s){const b=(0,a.g2)("el-input"),g=(0,a.g2)("el-form-item"),k=(0,a.g2)("el-button"),_=(0,a.g2)("el-form"),y=(0,a.g2)("el-radio"),v=(0,a.g2)("el-table-column"),F=(0,a.g2)("el-tag"),V=(0,a.g2)("el-table"),w=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",r,[(0,a.bF)(_,{inline:!0,model:i.searchForm,class:"demo-form-inline","label-width":"80px"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"优惠券名"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:i.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"primary",onClick:s.onSubmit,icon:"el-icon-search"},{default:(0,a.k6)((()=>[n])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),u,(0,a.bF)(V,{data:i.tableData,style:{width:"100%"},onRowClick:s.singleElection,"highlight-current-row":""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{width:"55",label:"选择"},{default:(0,a.k6)((e=>[(0,a.bF)(y,{class:"radio",modelValue:i.templateSelection,"onUpdate:modelValue":l[1]||(l[1]=e=>i.templateSelection=e),label:e.row.id},{default:(0,a.k6)((()=>[m])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.bF)(v,{prop:"id",width:"100px",label:"ID"}),(0,a.bF)(v,{prop:"name",label:"名称"}),(0,a.bF)(v,{label:"类型",prop:"type"},{default:(0,a.k6)((e=>[1==e.row.type?((0,a.uX)(),(0,a.Wv)(F,{key:0,type:"success"},{default:(0,a.k6)((()=>[c])),_:1})):(0,a.Q3)("",!0),2==e.row.type?((0,a.uX)(),(0,a.Wv)(F,{key:1},{default:(0,a.k6)((()=>[p])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(v,{label:"优惠金额/折扣"},{default:(0,a.k6)((e=>[1==e.row.type?((0,a.uX)(),(0,a.CE)("span",h,(0,d.v_)(e.row.amount),1)):(0,a.Q3)("",!0),2==e.row.type?((0,a.uX)(),(0,a.CE)("span",f,(0,d.v_)(e.row.discount),1)):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(v,{prop:"status_txt",label:"状态"})])),_:1},8,["data","onRowClick"]),(0,a.bF)(w,{style:{"margin-top":"10px"},background:"",layout:"->, prev, pager, next","page-size":i.searchForm.limit,onCurrentChange:s.handlePageChange,total:i.page.total},null,8,["page-size","onCurrentChange","total"])],64)}var g={data(){return{searchForm:{status:1,name:"",page:1,limit:10},page:{total:0,logTotal:0},tableData:[],templateSelection:0}},mounted(){this.getList()},methods:{onSubmit(){this.searchForm.page=1,this.getList()},handlePageChange(e){this.searchForm.page=e,this.getList()},async getList(){let e=await this.$API.coupon.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},singleElection(e){this.templateSelection=e.id;let l=this.tableData.filter((l=>l.id===e.id));this.$emit("handleSelected",l)}}},k=t(1456);const _=(0,k.A)(g,[["render",b]]);var y=_,v={components:{blindbox:s.A,Coupon:y},data(){return{activeName:"first",form:{num:1,type:"coupon",name:"",resourceId:"1",value:0},selectedGoods:[]}},methods:{handleClick(e,l){let t=l.target.getAttribute("id");"tab-first"==t?(this.form.type="coupon",this.form.name="优惠券"):"tab-fourth"==t&&(this.form.type="balance",this.form.name="余额")},handleSelectedCoupon(e){this.form.type="coupon",this.form.resourceId=e[0].id,this.form.name=e[0].name},onSubmit(){this.$emit("selectedResource",this.form)}}};const F=(0,k.A)(v,[["render",i]]);var V=F},8852:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(7267);const o={class:"sceditor"};function i(e,l,t,i,s,d){const r=(0,a.g2)("Editor"),n=(0,a.g2)("Attachment"),u=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",o,[(0,a.bF)(r,{modelValue:s.contentValue,"onUpdate:modelValue":l[0]||(l[0]=e=>s.contentValue=e),init:s.init,disabled:t.disabled,placeholder:t.placeholder,onOnClick:d.onClick},null,8,["modelValue","init","disabled","placeholder","onOnClick"])]),(0,a.bF)(u,{title:"选择资源",modelValue:s.attachmentDialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>s.attachmentDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"select-num":999999,onSelectedFiles:d.attachmentSelected},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var s=t(940),d=t(9626),r=t(198),n=t(4809),u=t.n(n),m=(t(6929),t(1703),t(1700),t(7381),t(8176),t(9639),t(4190),t(9196),t(8586),t(7849),t(6725),t(8177),{components:{Editor:r.A,Attachment:s.A},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code link table quickbars pagebreak lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link blocks fontfamily fontsize \t\t\t\t\talignleft aligncenter alignright alignjustify outdent indent numlist bullist \t\t\t\t\tpagebreak table code selectall attachment"},templates:{type:Array,default:()=>[]}},data(){return{attachmentDialogVisible:!1,init:{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.css",convert_urls:!1,menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,toolbar_mode:"sliding",font_size_formats:"12px 14px 16px 18px 22px 24px 36px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",templates:this.templates,quickbars_selection_toolbar:"forecolor backcolor bold italic underline strikethrough link",quickbars_image_toolbar:"alignleft aligncenter alignright",quickbars_insert_toolbar:!1,image_caption:!0,image_advtab:!0,images_upload_handler:function(e){return new Promise(((l,t)=>{const a=new FormData;a.append("file",e.blob(),e.filename()),d.A.common.upload.post(a).then((e=>{l(e.data.src)})).catch((()=>{t("Image upload failed")}))}))},setup:e=>{e.on("init",(function(){this.getBody().style.fontSize="14px"})),e.on("OpenWindow",(function(e){var l=document.querySelector(".el-drawer.open"),t=e.target.editorContainer;if(l&&l.contains(t)){var a=document.activeElement;setTimeout((()=>{document.activeElement.blur(),a.focus()}),0)}})),e.ui.registry.addButton("attachment",{text:"",icon:"image",onAction:()=>{this.attachmentDialogVisible=!0}})}},contentValue:this.modelValue}},watch:{modelValue(e){this.contentValue=e},contentValue(e){this.$emit("update:modelValue",e)}},mounted(){u().init({})},methods:{onClick(e){this.$emit("onClick",e,u())},attachmentSelected(e){if(e.length){let l="";for(let t in e)l+='<img src="'+e[t].url+'" style="max-width: 100%;">';u().activeEditor.insertContent(l)}this.attachmentDialogVisible=!1}}}),c=t(1456);const p=(0,c.A)(m,[["render",i]]);var h=p},8949:function(e,l,t){t.r(l),t.d(l,{default:function(){return k}});var a=t(7267);const o=(0,a.eW)("新人必买"),i=(0,a.eW)("买一送一"),s={class:"img-list"},d={key:0},r=["src"],n=(0,a.eW)("正常"),u=(0,a.eW)("禁用"),m=(0,a.eW)("取 消"),c=(0,a.eW)("保 存");function p(e,l,t,p,h,f){const b=(0,a.g2)("el-radio"),g=(0,a.g2)("el-form-item"),k=(0,a.g2)("el-icon-delete"),_=(0,a.g2)("el-icon"),y=(0,a.g2)("el-icon-plus"),v=(0,a.g2)("el-form"),F=(0,a.g2)("el-button"),V=(0,a.g2)("el-dialog"),w=(0,a.g2)("Attachment");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(V,{title:h.titleMap[h.mode],modelValue:h.visible,"onUpdate:modelValue":l[8]||(l[8]=e=>h.visible=e),width:600,"destroy-on-close":"",onClosed:l[9]||(l[9]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(F,{onClick:l[6]||(l[6]=e=>h.visible=!1)},{default:(0,a.k6)((()=>[m])),_:1}),"show"!=h.mode?((0,a.uX)(),(0,a.Wv)(F,{key:0,type:"primary",loading:h.isSaveing,onClick:l[7]||(l[7]=e=>f.submit())},{default:(0,a.k6)((()=>[c])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(v,{model:h.form,rules:h.rules,disabled:"show"==h.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"类型",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:h.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>h.form.type=e),label:"2"},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(b,{modelValue:h.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>h.form.type=e),label:"3"},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(g,{label:"广告图片",prop:"pic"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",s,[h.form.pic?((0,a.uX)(),(0,a.CE)("li",d,[(0,a.Lk)("img",{src:h.form.pic,style:{width:"58px",height:"58px"},alt:"图片"},null,8,r),(0,a.Lk)("div",{class:"img-tools",onClick:l[2]||(l[2]=e=>f.removeImg())},[(0,a.bF)(_,{style:{color:"#fff"}},{default:(0,a.k6)((()=>[(0,a.bF)(k)])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[3]||(l[3]=e=>f.showImage())},[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(y)])),_:1})])])])])),_:1}),(0,a.bF)(g,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:1,modelValue:h.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>h.form.status=e)},{default:(0,a.k6)((()=>[n])),_:1},8,["modelValue"]),(0,a.bF)(b,{label:2,modelValue:h.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>h.form.status=e)},{default:(0,a.k6)((()=>[u])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.bF)(V,{title:"选择资源",modelValue:h.resourceVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>h.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(w,{"select-num":1,onSelectedFiles:f.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var h=t(940),f={components:{Attachment:h.A},emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增广告",edit:"编辑广告",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",type:"2",pic:"",status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择类型",trigger:"blur"}],pic:[{required:!0,message:"请选择弹层图片",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.ad.add.post(this.form):await this.$API.ad.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},removeImg(){this.form.pic=""},setData(e){this.form.id=e.id,this.form.pic=e.pic,this.form.type=e.type+"",this.form.status=e.status}}},b=t(1456);const g=(0,b.A)(f,[["render",p],["__scopeId","data-v-a669fa9c"]]);var k=g},7587:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.eW)("取 消"),i=(0,a.eW)("保 存");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-option"),u=(0,a.g2)("el-select"),m=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-input"),p=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[7]||(l[7]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[o])),_:1}),"show"!=d.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[8]||(l[8]=e=>r.submit())},{default:(0,a.k6)((()=>[i])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(p,{model:d.form,rules:d.rules,disabled:"show"==d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"所属角色",prop:"role_id"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:d.form.role_id,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.role_id=e),style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.roles,(e=>((0,a.uX)(),(0,a.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"登录账号",prop:"username"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.username,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.username=e),placeholder:"英文+数字,用于登录系统",clearable:""},null,8,["modelValue"])])),_:1}),"add"==d.mode?((0,a.uX)(),(0,a.Wv)(m,{key:0,label:"登录密码",prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.password=e),clearable:"","show-password":""},null,8,["modelValue"])])),_:1})):((0,a.uX)(),(0,a.Wv)(m,{key:1,label:"登录密码"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.password=e),clearable:"","show-password":"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.bF)(m,{label:"昵称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.nickname,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"邮箱"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.email,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.email=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"手机号"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增管理员",edit:"编辑管理员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",role_id:"",username:"",nickname:"",password:"",avatar:"",email:"",phone:"",status:1},rules:{role_id:[{required:!0,message:"请选择所属角色",trigger:"blur"}],username:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},roles:[]}},mounted(){this.getAllRole()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAllRole(){let e=await this.$API.role.getAllRole.get({hashmart_auth_skip:1});this.roles=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.admin.add.post(this.form):await this.$API.admin.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.username=e.username,this.form.role_id=e.role_id,this.form.nickname=e.nickname,this.form.email=e.email,this.form.phone=e.phone,this.form.status=e.status}}},r=t(1456);const n=(0,r.A)(d,[["render",s]]);var u=n},6591:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(7267),o=t(5710);const i=(0,a.Lk)("br",null,null,-1),s=(0,a.Lk)("br",null,null,-1);function d(e,l,t,d,r,n){const u=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-image"),c=(0,a.g2)("el-table"),p=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(p,{title:r.titleMap[r.mode],modelValue:r.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>r.visible=e),width:1200,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(c,{data:r.form,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"id",label:"ID"}),(0,a.bF)(u,{label:"用户名"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)(e.row.user_name)+" ",1),i,(0,a.eW)(" ID: "+(0,o.v_)(e.row.user_id),1)])),_:1}),(0,a.bF)(u,{prop:"order_time",label:"下单时间戳"}),(0,a.bF)(u,{label:"获得商品图片"},{default:(0,a.k6)((e=>[(0,a.bF)(m,{src:e.row.goods_image,style:{height:"36px",width:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(u,{label:"获得商品"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)(e.row.goods_name)+" ",1),s,(0,a.eW)(" ID: "+(0,o.v_)(e.row.goods_id),1)])),_:1}),(0,a.bF)(u,{prop:"profit",label:"盈亏"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var r={name:"blindBoxOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"中奖记录"},visible:!1,form:{}}},mounted(){},methods:{open(e){return this.form=e,this.visible=!0,this}}},n=t(1456);const u=(0,n.A)(r,[["render",d]]);var m=u},2760:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(7267);const o=e=>((0,a.Qi)("data-v-6347e3d3"),e=e(),(0,a.jt)(),e),i=(0,a.eW)("潮玩赏"),s=(0,a.eW)("无限赏"),d={class:"img-list"},r={key:0},n=["src"],u={class:"img-tools"},m=o((()=>(0,a.Lk)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：250*250 ",-1))),c=(0,a.eW)("上架"),p=(0,a.eW)("下架"),h=(0,a.eW)("取 消"),f=(0,a.eW)("保 存");function b(e,l,t,o,b,g){const k=(0,a.g2)("el-input"),_=(0,a.g2)("el-form-item"),y=(0,a.g2)("el-radio"),v=(0,a.g2)("el-icon"),F=(0,a.g2)("el-option"),V=(0,a.g2)("el-select"),w=(0,a.g2)("el-form"),x=(0,a.g2)("el-button"),C=(0,a.g2)("el-dialog"),W=(0,a.g2)("Attachment");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{title:b.titleMap[b.mode],modelValue:b.visible,"onUpdate:modelValue":l[15]||(l[15]=e=>b.visible=e),width:600,"destroy-on-close":"",onClosed:l[16]||(l[16]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(x,{onClick:l[13]||(l[13]=e=>b.visible=!1)},{default:(0,a.k6)((()=>[h])),_:1}),"show"!=b.mode?((0,a.uX)(),(0,a.Wv)(x,{key:0,type:"primary",loading:b.isSaveing,onClick:l[14]||(l[14]=e=>g.submit())},{default:(0,a.k6)((()=>[f])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(w,{model:b.form,rules:b.rules,disabled:"show"==b.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{label:"盲盒名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>b.form.name=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"玩法",prop:"play_id"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:4,modelValue:b.form.play_id,"onUpdate:modelValue":l[1]||(l[1]=e=>b.form.play_id=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"]),(0,a.bF)(y,{label:5,modelValue:b.form.play_id,"onUpdate:modelValue":l[2]||(l[2]=e=>b.form.play_id=e)},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"封面图",prop:"pic"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",d,[b.form.pic?((0,a.uX)(),(0,a.CE)("li",r,[(0,a.Lk)("img",{src:b.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,n),(0,a.Lk)("div",u,[(0,a.bF)(v,{style:{"font-size":"14px",color:"#fff"},onClick:l[3]||(l[3]=e=>g.removeIcon())},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(b.deleteIcon)))])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[4]||(l[4]=(...e)=>g.showImage&&g.showImage(...e))},[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(b.plusIcon)))])),_:1})])]),m])])),_:1}),(0,a.bF)(_,{label:"原价",prop:"price"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.original_price,"onUpdate:modelValue":l[5]||(l[5]=e=>b.form.original_price=e),type:"number",min:0},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"单抽价格",prop:"price"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.price,"onUpdate:modelValue":l[6]||(l[6]=e=>b.form.price=e),type:"number",min:0},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"描述"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.desc,"onUpdate:modelValue":l[7]||(l[7]=e=>b.form.desc=e),rows:"3",type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"排序"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>b.form.sort=e),clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"上架",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:1,modelValue:b.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>b.form.status=e)},{default:(0,a.k6)((()=>[c])),_:1},8,["modelValue"]),(0,a.bF)(y,{label:2,modelValue:b.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>b.form.status=e)},{default:(0,a.k6)((()=>[p])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"盲盒分类"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:b.form.type,"onUpdate:modelValue":l[11]||(l[11]=e=>b.form.type=e),placeholder:"请选择",clearable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.typeOptions,(e=>((0,a.uX)(),(0,a.Wv)(F,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"盲盒标签"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:b.form.tag,"onUpdate:modelValue":l[12]||(l[12]=e=>b.form.tag=e),placeholder:"请选择",clearable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.tagOptions,(e=>((0,a.uX)(),(0,a.Wv)(F,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.bF)(C,{title:"选择资源",modelValue:b.resourceVisible,"onUpdate:modelValue":l[17]||(l[17]=e=>b.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(W,{"select-num":1,onSelectedFiles:g.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var g=t(940),k={emits:["success","closed"],components:{Attachment:g.A},data(){return{mode:"add",titleMap:{add:"新增盲盒",edit:"编辑盲盒",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,playId:[],typeOptions:[],tagOptions:[],form:{id:"",play_id:1,name:"",original_price:"",price:0,pic:"",desc:"",sort:1,status:1,type:"",tag:""},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],play_id:[{required:!0,message:"请选择玩法",trigger:"blur"}],price:[{required:!0,message:"请输入单抽价格",trigger:"blur"}],pic:[{required:!0,message:"请选择封面",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){this.getSelectTypeList(),this.getSelectTagList()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindbox.add.post(this.form):await this.$API.blindbox.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},async getSelectTypeList(){let e=await this.$API.blindboxType.select.get();this.typeOptions=e.data},async getSelectTagList(){let e=await this.$API.blindboxTag.select.get();this.tagOptions=e.data},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.play_id=parseInt(e.play_id),this.form.name=e.name,this.form.original_price=e.original_price,this.form.price=e.price,this.form.pic=e.pic,this.form.desc=e.desc,this.form.sort=e.sort,this.form.status=parseInt(e.status),this.form.type=e.type}}},_=t(1456);const y=(0,_.A)(k,[["render",b],["__scopeId","data-v-6347e3d3"]]);var v=y},5062:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(7267);const o=(0,a.eW)("显示"),i=(0,a.eW)("隐藏"),s=(0,a.eW)("取 消"),d=(0,a.eW)("保 存");function r(e,l,t,r,n,u){const m=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-radio"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(b,{title:n.titleMap[n.mode],modelValue:n.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>n.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{onClick:l[4]||(l[4]=e=>n.visible=!1)},{default:(0,a.k6)((()=>[s])),_:1}),"show"!=n.mode?((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"primary",loading:n.isSaveing,onClick:l[5]||(l[5]=e=>u.submit())},{default:(0,a.k6)((()=>[d])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(h,{model:n.form,rules:n.rules,disabled:"show"==n.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"赏种名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"排序",prop:"sort"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"number",modelValue:n.form.sort,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"是否显示",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:1,modelValue:n.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(p,{label:2,modelValue:n.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var n={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增标签",edit:"编辑标签",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",color:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入赏种名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindboxTag.add.post(this.form):await this.$API.blindboxTag.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.sort=e.sort,this.form.color=e.color,this.form.status=e.status}}},u=t(1456);const m=(0,u.A)(n,[["render",r],["__scopeId","data-v-ac79a194"]]);var c=m},9574:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(7267);const o=(0,a.eW)("显示"),i=(0,a.eW)("隐藏"),s=(0,a.eW)("取 消"),d=(0,a.eW)("保 存");function r(e,l,t,r,n,u){const m=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-radio"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(b,{title:n.titleMap[n.mode],modelValue:n.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>n.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{onClick:l[4]||(l[4]=e=>n.visible=!1)},{default:(0,a.k6)((()=>[s])),_:1}),"show"!=n.mode?((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"primary",loading:n.isSaveing,onClick:l[5]||(l[5]=e=>u.submit())},{default:(0,a.k6)((()=>[d])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(h,{model:n.form,rules:n.rules,disabled:"show"==n.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"分类名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"排序",prop:"sort"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"number",modelValue:n.form.sort,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"是否显示",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:1,modelValue:n.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(p,{label:2,modelValue:n.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var n={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增分类",edit:"编辑分类",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindboxType.add.post(this.form):await this.$API.blindboxType.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.sort=e.sort,this.form.status=e.status}}},u=t(1456);const m=(0,u.A)(n,[["render",r],["__scopeId","data-v-b86ac0c6"]]);var c=m},8678:function(e,l,t){t.r(l),t.d(l,{default:function(){return r}});var a=t(7267);function o(e,l,t,o,i,s){const d=(0,a.g2)("el-table-column"),r=(0,a.g2)("el-image"),n=(0,a.g2)("el-table"),u=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(u,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>i.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(n,{data:i.tableData,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{prop:"reward.goods_id",label:"商品ID"}),(0,a.bF)(d,{prop:"reward.goods_name",label:"商品名称"}),(0,a.bF)(d,{label:"商品图片"},{default:(0,a.k6)((e=>[(0,a.bF)(r,{src:e.row.reward.goods_image,style:{width:"40px",height:"40px"}},null,8,["src"])])),_:1}),(0,a.bF)(d,{prop:"amount",label:"可兑换哈希币"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var i={name:"boxExchangeDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"兑换详情"},visible:!1,tableData:[]}},mounted(){},methods:{open(e){return this.tableData=e,this.visible=!0,this}}},s=t(1456);const d=(0,s.A)(i,[["render",o]]);var r=d},1871:function(e,l,t){t.r(l),t.d(l,{default:function(){return x}});var a=t(7267);const o={class:"form-body"},i={class:"sel-div"},s={key:0},d=["src"],r={class:"add-btn"},n=(0,a.eW)(" 选择商品 "),u=(0,a.eW)(" 不限制碎片材料 "),m=(0,a.eW)(" 指定商品碎片材料 "),c=["src"],p=(0,a.eW)(" 删除 "),h=(0,a.eW)(" 指定商品 "),f={style:{width:"500px",display:"flex"}},b=(0,a.eW)("上架"),g=(0,a.eW)("下架"),k=(0,a.eW)(" 提交 ");function _(e,l,t,_,y,v){const F=(0,a.g2)("el-input"),V=(0,a.g2)("el-form-item"),w=(0,a.g2)("el-table-column"),x=(0,a.g2)("el-table"),C=(0,a.g2)("el-button"),W=(0,a.g2)("el-radio"),I=(0,a.g2)("el-radio-group"),S=(0,a.g2)("el-divider"),$=(0,a.g2)("el-date-picker"),U=(0,a.g2)("el-form"),L=(0,a.g2)("Goods"),X=(0,a.g2)("el-dialog"),D=(0,a.g2)("MultiBlindGoods"),A=(0,a.g2)("el-card"),q=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(A,{class:"box-card",shadow:"never",style:{"margin-top":"10px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.bF)(U,{model:y.form,"label-width":"150px",rules:y.formRules,ref:"ruleForm"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"合成标题",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{style:{width:"500px"},modelValue:y.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>y.form.name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"选择商品",prop:"goods_id"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[y.sel_goods.length?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(x,{ref:"selTable",style:{width:"100%"},data:y.sel_goods,"max-height":"500"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{prop:"goods_id",label:"商品ID",width:"100"}),(0,a.bF)(w,{prop:"goods_name",label:"商品名称","show-overflow-tooltip":"",width:"200"}),(0,a.bF)(w,{label:"商品图片",width:"120",prop:"image"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",null,[(0,a.Lk)("img",{src:e.row.image,style:{width:"50px",height:"50px"}},null,8,d)])])),_:1}),(0,a.bF)(w,{prop:"price",label:"商品售价",width:"200"}),(0,a.bF)(w,{prop:"conflate_val",label:"合成值",width:"200"},{default:(0,a.k6)((e=>[(0,a.bF)(F,{style:{"min-width":"100px"},placeholder:"",type:"number",min:"0",modelValue:e.row.conflate_val,"onUpdate:modelValue":l=>e.row.conflate_val=l,modelModifiers:{number:!0},onChange:v.changeConflateVal},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1})])),_:1},8,["data"])),[[q,y.listLoading]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",r,[(0,a.bF)(C,{type:"primary",icon:"el-icon-plus",onClick:v.selBlindbox},{default:(0,a.k6)((()=>[n])),_:1},8,["onClick"])])])])),_:1}),(0,a.bF)(V,{label:"是否指定碎片材料",prop:"conflate_limit"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{modelValue:y.form.conflate_limit,"onUpdate:modelValue":l[1]||(l[1]=e=>y.form.conflate_limit=e),onChange:v.radioChange},{default:(0,a.k6)((()=>[(0,a.bF)(W,{label:1},{default:(0,a.k6)((()=>[u])),_:1}),(0,a.bF)(W,{label:2},{default:(0,a.k6)((()=>[m])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),2==y.form.conflate_limit?((0,a.uX)(),(0,a.Wv)(V,{key:0,label:"指定商品",prop:"conflate_goods"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{data:y.form.conflate_goods,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(w,{prop:"goods_id",label:"商品ID",width:"100"}),(0,a.bF)(w,{prop:"goods_name",label:"商品名称","show-overflow-tooltip":"",width:"200"}),(0,a.bF)(w,{label:"商品图片",width:"120",prop:"image"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",null,[(0,a.Lk)("img",{src:e.row.image,style:{width:"50px",height:"50px"}},null,8,c)])])),_:1}),(0,a.bF)(w,{prop:"conflate_val",label:"合成值",width:"200"},{default:(0,a.k6)((e=>[(0,a.bF)(F,{style:{"min-width":"100px"},placeholder:"",type:"number",min:"0",modelValue:e.row.conflate_val,"onUpdate:modelValue":l=>e.row.conflate_val=l,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(w,{fixed:"right",label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)(C,{onClick:l=>v.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[p])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,a.Lk)("div",null,[(0,a.bF)(C,{type:"primary",icon:"el-icon-plus",style:{"margin-top":"15px"},onClick:v.assignBlindbox},{default:(0,a.k6)((()=>[h])),_:1},8,["onClick"])])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(S,{"border-style":"dashed"}),(0,a.bF)(V,{label:"活动时间",prop:"activity_time"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,[(0,a.bF)($,{modelValue:y.form.activity_time,"onUpdate:modelValue":l[2]||(l[2]=e=>y.form.activity_time=e),"unlink-panels":"",type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(V,{label:"库存",prop:"stock"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:y.form.stock,"onUpdate:modelValue":l[3]||(l[3]=e=>y.form.stock=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"是否上架",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{modelValue:y.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>y.form.status=e),label:1},{default:(0,a.k6)((()=>[b])),_:1},8,["modelValue"]),(0,a.bF)(W,{modelValue:y.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>y.form.status=e),label:2},{default:(0,a.k6)((()=>[g])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"排序值",prop:"sort"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:y.form.sort,"onUpdate:modelValue":l[6]||(l[6]=e=>y.form.sort=e),style:{width:"500px"},type:"number",placeholder:"值越大越靠前"},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{type:"primary",class:"button-item",onClick:v.onSubmit,loading:y.btnloading},{default:(0,a.k6)((()=>[k])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])]),(0,a.bF)(X,{title:"商品选择",modelValue:y.dialog.selGoods,"onUpdate:modelValue":l[7]||(l[7]=e=>y.dialog.selGoods=e),"destroy-on-close":"",width:"60%"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{selectedgoods:y.selectedGoods,onHandleSelected:v.handleSelected,"goods-type":2},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"]),(0,a.bF)(X,{title:"指定商品",modelValue:y.dialog.assignGoods,"onUpdate:modelValue":l[8]||(l[8]=e=>y.dialog.assignGoods=e),"destroy-on-close":"",width:"60%"},{default:(0,a.k6)((()=>[(0,a.bF)(D,{selectedgoods:y.assignedGoods,"goods-type":2,onHandleSelected:v.handleAssignSelected},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"])])),_:1})}t(7414);var y=t(7561),v=t(6480),F={name:"AdvanceCondition",components:{Goods:y.A,MultiBlindGoods:v.A},data(){return{mode:"add",form:{name:"",activity_time:"",goods_id:"",goods_name:"",image:"",price:"",conflate_val:0,conflate_limit:1,stock:0,status:1,sort:10,conflate_goods:[]},sel_goods:[],formRules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"}],goods_id:[{required:!0,message:"请选择商品",trigger:"blur"}],conflate_limit:[{required:!0,message:"请选择是否指定碎片材料",trigger:"change"}],activity_time:[{required:!0,message:"请选择活动时间",trigger:"change"}],stock:[{required:!0,message:"请填写库存",trigger:"change"}],status:[{required:!0,message:"请选择是否上架",trigger:"change"}],sort:[{required:!0,message:"请填写排序值",trigger:"change"}]},noRules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"}],goods_id:[{required:!0,message:"请选择商品",trigger:"blur"}],conflate_limit:[{required:!0,message:"请选择是否指定碎片材料",trigger:"change"}],activity_time:[{required:!0,message:"请选择活动时间",trigger:"change"}],stock:[{required:!0,message:"请填写库存",trigger:"change"}],status:[{required:!0,message:"请选择是否上架",trigger:"change"}],sort:[{required:!0,message:"请填写排序值",trigger:"change"}]},assignRules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"}],goods_id:[{required:!0,message:"请选择商品",trigger:"blur"}],conflate_limit:[{required:!0,message:"请选择是否指定碎片材料",trigger:"change"}],activity_time:[{required:!0,message:"请选择活动时间",trigger:"change"}],stock:[{required:!0,message:"请填写库存",trigger:"change"}],status:[{required:!0,message:"请选择是否上架",trigger:"change"}],sort:[{required:!0,message:"请填写排序值",trigger:"change"}],conflate_goods:[{required:!0,message:"请选择指定商品",trigger:"change"}]},listLoading:!1,selectedGoods:[],assignedGoods:[],dialog:{selGoods:!1,assignGoods:!1},editId:"",btnloading:!1}},methods:{radioChange(e){"add"==this.mode&&1==e&&(this.form.conflate_goods=[])},setMode(e,l){this.mode=e,"edit"==e&&(this.editId=l.id,this.form={name:l.name,activity_time:[l.start_time,l.end_time],goods_id:l.goods_id,goods_name:l.goods_name,image:l.image,price:l.price,conflate_val:l.conflate_val,conflate_limit:l.conflate_limit,stock:l.stock,status:l.status,sort:l.sort},this.sel_goods=[{goods_id:l.goods_id,goods_name:l.goods_name,image:l.image,price:l.price,conflate_val:l.conflate_val}],l.goods&&(this.form.conflate_goods=l.goods.map((e=>({goods_id:e.goods_id,goods_name:e.goods_name,image:e.image.split(",")[0],conflate_val:e.conflate_val||0})))))},selBlindbox(){this.dialog.selGoods=!0},assignBlindbox(){this.dialog.assignGoods=!0},changeConflateVal(e){console.log("val-change-",e),this.form.conflate_val=e},handleSelected(e){console.log("sel-",e),this.sel_goods=e.map((e=>({goods_id:e.id,goods_name:e.name,image:e.image.split(",")[0],price:e.price,conflate_val:e.conflate_val||0}))),this.form.goods_id=e[0].id,this.form.goods_name=e[0].name,this.form.image=e[0].image,this.form.price=e[0].price,this.form.conflate_val=e[0].conflate_val,this.dialog.selGoods=!1},handleAssignSelected(e){console.log("assign-",e);let l=[];if(this.form.conflate_goods.length)for(let t=0;t<e.length;t++){const a=e[t],o=this.form.conflate_goods.filter((e=>a.id==e.goods_id));o.length||l.push({goods_id:a.id,goods_name:a.name,image:a.image.split(",")[0],conflate_val:a.conflate_val||0})}else l=e.map((e=>({goods_id:e.id,goods_name:e.name,image:e.image.split(",")[0],conflate_val:e.conflate_val||0})));this.form.conflate_goods=this.form.conflate_goods.concat(l),this.dialog.assignGoods=!1},handleDel(e){this.form.conflate_goods.splice(e,1)},onSubmit(){this.btnloading=!0,this.$refs.ruleForm.validate((async e=>{if(e){const e=JSON.parse(JSON.stringify(this.form));if(1==e.conflate_limit)delete e.conflate_goods;else{if(!e.conflate_goods.length)return this.$message.error("请指定碎片商品!"),this.btnloading=!1,!1;e.conflate_goods=JSON.stringify(e.conflate_goods)}if("add"==this.mode){const{code:l,msg:t}=await this.$API.conflate.conflateAdd.post(e);0==l?(this.$message.success(t),this.$emit("successBack")):this.$message.error(t)}else{e.id=this.editId;const{code:l,msg:t}=await this.$API.conflate.conflateEdit.post(e);0==l?(this.$message.success(t),this.$emit("successBack")):this.$message.error(t)}this.btnloading=!1}else this.btnloading=!1}))}}},V=t(1456);const w=(0,V.A)(F,[["render",_],["__scopeId","data-v-a982fa7a"]]);var x=w},7698:function(e,l,t){t.r(l),t.d(l,{default:function(){return b}});var a=t(7267),o=t(5710);const i={shadow:"never",style:{border:"none"}},s=(0,a.eW)("查询"),d=(0,a.Lk)("div",{style:{width:"100%",height:"0","border-bottom":"#e4e7ed 1px dashed","margin-top":"15px"}},null,-1),r=(0,a.Lk)("br",null,null,-1),n=(0,a.eW)("进行中"),u=(0,a.eW)("已完成"),m=(0,a.Lk)("div",{style:{"margin-top":"20px"}},null,-1);function c(e,l,t,c,p,h){const f=(0,a.g2)("el-option"),b=(0,a.g2)("el-select"),g=(0,a.g2)("el-form-item"),k=(0,a.g2)("el-button"),_=(0,a.g2)("el-form"),y=(0,a.g2)("el-table-column"),v=(0,a.g2)("el-tag"),F=(0,a.g2)("el-table"),V=(0,a.g2)("el-pagination"),w=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(w,{title:p.titleMap[p.mode],modelValue:p.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>p.visible=e),width:1200,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bF)(_,{inline:!0,model:p.form,class:"demo-form-inline"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"合成状态"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:p.form.status,"onUpdate:modelValue":l[0]||(l[0]=e=>p.form.status=e),clearable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(p.options,(e=>((0,a.uX)(),(0,a.Wv)(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"primary",onClick:h.search},{default:(0,a.k6)((()=>[s])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),d,(0,a.bF)(F,{data:p.tableData,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{prop:"id",label:"ID"}),(0,a.bF)(y,{label:"合成人"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)(e.row.username)+" ",1),r,(0,a.eW)(" ID: "+(0,o.v_)(e.row.user_id),1)])),_:1}),(0,a.bF)(y,{label:"合成进度"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)((100*e.row.progress).toFixed(2))+" % ",1)])),_:1}),(0,a.bF)(y,{prop:"total_conflate_val",label:"合成值"}),(0,a.bF)(y,{label:"状态"},{default:(0,a.k6)((e=>[1==e.row.status?((0,a.uX)(),(0,a.Wv)(v,{key:0,type:"danger"},{default:(0,a.k6)((()=>[n])),_:1})):(0,a.Q3)("",!0),2==e.row.status?((0,a.uX)(),(0,a.Wv)(v,{key:1,type:"success"},{default:(0,a.k6)((()=>[u])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["data"]),m,(0,a.bF)(V,{background:"",layout:"->, prev, pager, next",total:p.total,"page-size":p.form.limit,onCurrentChange:h.pageChange},null,8,["total","page-size","onCurrentChange"])])),_:1},8,["title","modelValue"])}var p={name:"conflateLog",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"合成记录"},visible:!1,form:{conflate_id:0,status:"",page:1,limit:10},total:0,tableData:[],options:[{value:1,label:"进行中"},{value:2,label:"已完成"}]}},mounted(){},methods:{open(){return this.visible=!0,this},setData(e){this.form.conflate_id=e.id,this.getList()},async getList(){let e=await this.$API.conflate.conflateLog.get(this.form);this.tableData=e.data.data,this.total=e.data.total},pageChange(e){this.form.page=e,this.getList()},search(){this.getList()}}},h=t(1456);const f=(0,h.A)(p,[["render",c]]);var b=f},1821:function(e,l,t){t.r(l),t.d(l,{default:function(){return q}});var a=t(7267);const o=(0,a.eW)("满减券"),i=(0,a.eW)("折扣券"),s=(0,a.eW)("邮费抵扣券"),d=(0,a.eW)("    元 "),r=(0,a.eW)("    "),n=(0,a.Lk)("span",{style:{"font-size":"12px"}},"例如:8折填0.8",-1),u=(0,a.eW)("    元 "),m=(0,a.Lk)("span",{style:{color:"#f56c6c"}},"(数值大于0则为设置有效)",-1),c=(0,a.eW)("限量"),p=(0,a.eW)("不限量"),h=(0,a.eW)("有门槛"),f=(0,a.eW)("无门槛"),b=(0,a.eW)("    元可以使用 "),g=(0,a.eW)("固定时间"),k=(0,a.eW)("领取之日起"),_=(0,a.eW)("    天内有效 "),y=(0,a.eW)("选择盲盒"),v=(0,a.eW)("删除"),F=(0,a.eW)("立即创建");function V(e,l,t,V,w,x){const C=(0,a.g2)("el-input"),W=(0,a.g2)("el-form-item"),I=(0,a.g2)("el-radio"),S=(0,a.g2)("el-date-picker"),$=(0,a.g2)("el-button"),U=(0,a.g2)("el-table-column"),L=(0,a.g2)("el-table"),X=(0,a.g2)("el-form"),D=(0,a.g2)("el-dialog"),A=(0,a.g2)("blindbox");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(D,{title:w.titleMap[w.mode],modelValue:w.visible,"onUpdate:modelValue":l[19]||(l[19]=e=>w.visible=e),width:800,"destroy-on-close":"",onClosed:l[20]||(l[20]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(X,{model:w.form,"label-width":"120px",rules:w.rules,ref:"ruleForm",disabled:"show"==w.mode},{default:(0,a.k6)((()=>[(0,a.bF)(W,{label:"优惠券名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>w.form.name=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(W,{label:"优惠券类型",prop:"type"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{label:1,modelValue:w.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>w.form.type=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(I,{label:2,modelValue:w.form.type,"onUpdate:modelValue":l[2]||(l[2]=e=>w.form.type=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"]),(0,a.bF)(I,{label:3,modelValue:w.form.type,"onUpdate:modelValue":l[3]||(l[3]=e=>w.form.type=e)},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"])])),_:1}),1==w.form.type?((0,a.uX)(),(0,a.Wv)(W,{key:0,label:"优惠券面额",prop:"amount"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.amount,"onUpdate:modelValue":l[4]||(l[4]=e=>w.form.amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),d])),_:1})):(0,a.Q3)("",!0),2==w.form.type?((0,a.uX)(),(0,a.Wv)(W,{key:1,label:"优惠折扣",prop:"discount"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.discount,"onUpdate:modelValue":l[5]||(l[5]=e=>w.form.discount=e),style:{width:"500px"},type:"number",placeholder:"例如：0.8 或者 0.95"},null,8,["modelValue"]),r,n])),_:1})):(0,a.Q3)("",!0),2==w.form.type?((0,a.uX)(),(0,a.Wv)(W,{key:2,label:"最多优惠",prop:"max_discount_amount"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.max_discount_amount,"onUpdate:modelValue":l[6]||(l[6]=e=>w.form.max_discount_amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),u,m])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(W,{label:"发放数量限制",prop:"is_limit_num"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{label:1,modelValue:w.form.is_limit_num,"onUpdate:modelValue":l[7]||(l[7]=e=>w.form.is_limit_num=e)},{default:(0,a.k6)((()=>[c])),_:1},8,["modelValue"]),(0,a.bF)(I,{label:2,modelValue:w.form.is_limit_num,"onUpdate:modelValue":l[8]||(l[8]=e=>w.form.is_limit_num=e)},{default:(0,a.k6)((()=>[p])),_:1},8,["modelValue"])])),_:1}),1==w.form.is_limit_num?((0,a.uX)(),(0,a.Wv)(W,{key:3,label:"发放数量"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.total_num,"onUpdate:modelValue":l[9]||(l[9]=e=>w.form.total_num=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(W,{label:"最多领取数量",prop:"max_receive_num"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.max_receive_num,"onUpdate:modelValue":l[10]||(l[10]=e=>w.form.max_receive_num=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(W,{label:"使用门槛",prop:"is_threshold"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{label:1,modelValue:w.form.is_threshold,"onUpdate:modelValue":l[11]||(l[11]=e=>w.form.is_threshold=e)},{default:(0,a.k6)((()=>[h])),_:1},8,["modelValue"]),(0,a.bF)(I,{label:2,modelValue:w.form.is_threshold,"onUpdate:modelValue":l[12]||(l[12]=e=>w.form.is_threshold=e)},{default:(0,a.k6)((()=>[f])),_:1},8,["modelValue"])])),_:1}),1==w.form.is_threshold?((0,a.uX)(),(0,a.Wv)(W,{key:4,label:"订单满"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.threshold_amount,"onUpdate:modelValue":l[13]||(l[13]=e=>w.form.threshold_amount=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),b])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(W,{label:"有效期类型",prop:"validity_type"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{label:1,modelValue:w.form.validity_type,"onUpdate:modelValue":l[14]||(l[14]=e=>w.form.validity_type=e)},{default:(0,a.k6)((()=>[g])),_:1},8,["modelValue"]),(0,a.bF)(I,{label:2,modelValue:w.form.validity_type,"onUpdate:modelValue":l[15]||(l[15]=e=>w.form.validity_type=e)},{default:(0,a.k6)((()=>[k])),_:1},8,["modelValue"])])),_:1}),1==w.form.validity_type?((0,a.uX)(),(0,a.Wv)(W,{key:5,label:"有效期至",style:{width:"620px"}},{default:(0,a.k6)((()=>[(0,a.bF)(S,{modelValue:w.form.datetime_range,"onUpdate:modelValue":l[16]||(l[16]=e=>w.form.datetime_range=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==w.form.validity_type?((0,a.uX)(),(0,a.Wv)(W,{key:6,label:"领取之日起"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{modelValue:w.form.receive_useful_day,"onUpdate:modelValue":l[17]||(l[17]=e=>w.form.receive_useful_day=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),_])),_:1})):(0,a.Q3)("",!0),2==w.form.join_blindbox?((0,a.uX)(),(0,a.Wv)(W,{key:7,label:"活动盲盒"},{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",icon:"el-icon-plus",size:"small",onClick:x.ckBlindbox},{default:(0,a.k6)((()=>[y])),_:1},8,["onClick"]),(0,a.bF)(L,{data:w.form.selectedGoods,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(U,{prop:"name",width:"250px","show-overflow-tooltip":!0,label:"盲盒名"}),(0,a.bF)(U,{prop:"price",label:"价格"}),(0,a.bF)(U,{fixed:"right",label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)($,{onClick:l=>x.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(W,null,{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",loading:w.isSaveing,onClick:l[18]||(l[18]=e=>x.submit("ruleForm"))},{default:(0,a.k6)((()=>[F])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.bF)(D,{title:"盲盒选择",modelValue:w.dialogVisible,"onUpdate:modelValue":l[21]||(l[21]=e=>w.dialogVisible=e),"destroy-on-close":"",width:"1000px"},{default:(0,a.k6)((()=>[(0,a.bF)(A,{selectedgoods:e.selectedGoods,onHandleSelected:x.handleSelected,"goods-type":2},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"])],64)}t(7414);const w={class:"goods-select"},x={class:"search-box"},C=(0,a.eW)("查询"),W=(0,a.eW)("确认使用"),I={class:"page-div",style:{"margin-top":"20px"}};function S(e,l,t,o,i,s){const d=(0,a.g2)("el-input"),r=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-button"),u=(0,a.g2)("el-form"),m=(0,a.g2)("el-table-column"),c=(0,a.g2)("el-image"),p=(0,a.g2)("el-table"),h=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",x,[(0,a.bF)(u,{inline:!0,model:i.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{label:"盲盒名称"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:i.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"primary",onClick:s.onSubmit,icon:"el-icon-search"},{default:(0,a.k6)((()=>[C])),_:1},8,["onClick"]),(0,a.bF)(n,{disabled:0==i.templateSelection.length,type:"danger",onClick:s.useSelect,icon:"el-icon-promotion"},{default:(0,a.k6)((()=>[W])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.bF)(p,{data:i.tableData,"row-style":{height:"57px"},onSelectionChange:s.handleSelectionChange,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"selection",width:"55"}),(0,a.bF)(m,{prop:"id",label:"盲盒ID"}),(0,a.bF)(m,{label:"盲盒主图"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{src:e.row.pic,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(m,{prop:"name",label:"盲盒名称"})])),_:1},8,["data","onSelectionChange"]),(0,a.Lk)("div",I,[(0,a.bF)(h,{background:"",layout:"->, prev, pager, next","page-size":i.searchForm.limit,onCurrentChange:s.pageChangeHandle,total:i.page.total},null,8,["page-size","onCurrentChange","total"])])])}var $={props:{selectedBox:{type:Array,default:()=>[]},pageSize:{type:Number,default:10}},data(){return{searchForm:{name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.getBlindboxList()},methods:{async getBlindboxList(){let e=await this.$API.blindbox.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},handleSelectionChange(e){this.templateSelection=e},pageChangeHandle(e){this.searchForm.page=e,this.getBlindboxList()},onSubmit(){this.getBlindboxList()},useSelect(){if(0==this.templateSelection.length)return void this.$message.error("请选择盲盒");let e=JSON.parse(JSON.stringify(this.templateSelection));this.templateSelection=[],this.$emit("handleSelected",e)}}},U=t(1456);const L=(0,U.A)($,[["render",S]]);var X=L,D={emits:["success","closed"],components:{blindbox:X},data(){return{mode:"add",titleMap:{add:"添加优惠券",edit:"编辑优惠券",show:"查看"},isSaveing:!1,dialogVisible:!1,visible:!1,allreadySelected:[],form:{name:"",type:1,discount:0,amount:0,max_discount_amount:-1,is_limit_num:2,total_num:0,max_receive_num:0,is_threshold:2,threshold_amount:0,validity_type:2,datetime_range:"",join_blindbox:1,receive_useful_day:7,selectedGoods:[]},rules:{name:[{required:!0,message:"请输入优惠券名称",trigger:"blur"}],type:[{required:!0,message:"请选择优惠券类型",trigger:"blur"}],amount:[{required:!0,message:"请输入优惠券面额",trigger:"blur"}],is_limit_num:[{required:!0,message:"请输入发放数量限制",trigger:"blur"}],max_receive_num:[{required:!0,message:"请输入最多领取张数",trigger:"blur"}],is_threshold:[{required:!0,message:"请输入使用门槛",trigger:"blur"}],validity_type:[{required:!0,message:"请输入有效期类型",trigger:"blur"}],join_blindbox:[{required:!0,message:"请输入活动商品",trigger:"blur"}],discount:[{required:!0,message:"请输入折扣",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.ruleForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.coupon.add.post(this.form):await this.$API.coupon.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.name=e.name,this.form.type=e.type,this.form.discount=e.discount,this.form.amount=e.amount,this.form.max_discount_amount=e.max_discount_amount,this.form.is_limit_num=e.is_limit_num,this.form.total_num=e.total_num,this.form.max_receive_num=e.max_receive_num,this.form.is_threshold=e.is_threshold,this.form.threshold_amount=e.threshold_amount,this.form.validity_type=e.validity_type,this.form.datetime_range=[e.start_time,e.end_time],this.form.join_blindbox=e.join_blindbox,this.form.receive_useful_day=e.receive_useful_day,e.blindbox.forEach((e=>{this.form.selectedGoods.push(JSON.parse(e.blindbox_info))}))},handleSelected(e){if(this.form.selectedGoods.length>0)e.forEach((e=>{-1==this.allreadySelected.indexOf(e.id)&&(this.form.selectedGoods.push({id:e.id,price:e.price,name:e.name}),this.allreadySelected.push(e.id))}));else{let l=[];e.forEach((e=>{l.push({id:e.id,price:e.price,name:e.name}),this.allreadySelected.push(e.id)})),this.form.selectedGoods=l}this.dialogVisible=!1},ckBlindbox(){this.dialogVisible=!0},handleDel(e){this.form.selectedGoods.splice(e,1),this.allreadySelected.splice(e,1)}}};const A=(0,U.A)(D,[["render",V]]);var q=A},6720:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.Lk)("p",{style:{"font-size":"12px"}},"多个用户id之间用英文,隔开。例如：33,2251",-1),i=(0,a.eW)("立即发放");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-input"),u=(0,a.g2)("el-form-item"),m=(0,a.g2)("el-button"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(p,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[5]||(l[5]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(c,{model:d.form,"label-width":"120px",rules:e.rules,ref:"ruleForm",disabled:"show"==d.mode},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"优惠券名称"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:d.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.name=e),style:{width:"500px"},readonly:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"发放数量"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:d.form.num,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.num=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"发放用户id"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:d.form.userList,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.userList=e),style:{width:"500px"},rows:5,type:"textarea"},null,8,["modelValue"]),o])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"primary",loading:d.isSaveing,onClick:l[3]||(l[3]=e=>r.submit("ruleForm"))},{default:(0,a.k6)((()=>[i])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"发放优惠券"},isSaveing:!1,dialogVisible:!1,visible:!1,allreadySelected:[],form:{name:"",num:1,id:0,userList:""}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.ruleForm.validate((async e=>{if(!e)return!1;this.isSaveing=!0;var l=await this.$API.coupon.send.post(this.form);this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.name=e.name,this.form.id=e.id}}},r=t(1456);const n=(0,r.A)(d,[["render",s]]);var u=n},1114:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.eW)("成功"),i=(0,a.eW)("失败");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-button"),u=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-tag"),c=(0,a.g2)("el-table"),p=(0,a.g2)("el-pagination"),h=(0,a.g2)("el-dialog"),f=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>d.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed"))},{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"primary",icon:"el-icon-refresh",size:"small",onClick:r.refresh},null,8,["onClick"]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{class:"tableClass",data:d.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"id",label:"ID"}),(0,a.bF)(u,{prop:"return_var",label:"运行结果"},{default:(0,a.k6)((e=>[0==e.row.return_var?((0,a.uX)(),(0,a.Wv)(m,{key:0,type:"success"},{default:(0,a.k6)((()=>[o])),_:1})):(0,a.Q3)("",!0),1==e.row.return_var?((0,a.uX)(),(0,a.Wv)(m,{key:1,type:"danger"},{default:(0,a.k6)((()=>[i])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(u,{prop:"command","show-overflow-tooltip":!0,label:"任务命令"}),(0,a.bF)(u,{prop:"running_time",label:"运行耗时"}),(0,a.bF)(u,{prop:"output","show-overflow-tooltip":!0,label:"输出结果"}),(0,a.bF)(u,{prop:"create_time",label:"执行时间"})])),_:1},8,["data"])),[[f,d.loading]]),(0,a.bF)(p,{background:"",layout:"->, prev, pager, next",onCurrentChange:r.handleLogCurrentChange,"page-size":d.logPage.limit,total:d.total,style:{"margin-top":"10px"}},null,8,["onCurrentChange","page-size","total"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"执行日志",show:"查看"},tableData:[],total:0,logPage:{sid:0,page:1,limit:10},loading:!0,visible:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.logPage.sid=e.id,this.runLog()},async runLog(){let e=await this.$API.crontab.log.get(this.logPage);this.tableData=e.data.list,this.total=e.data.count,this.loading=!1},refresh(){this.loading=!0,this.logPage.page=1,this.runLog()},handleLogCurrentChange(e){this.logPage.page=e,this.runLog()}}},r=t(1456);const n=(0,r.A)(d,[["render",s]]);var u=n},891:function(e,l,t){t.r(l),t.d(l,{default:function(){return b}});var a=t(7267);const o=e=>((0,a.Qi)("data-v-92cf62e2"),e=e(),(0,a.jt)(),e),i=o((()=>(0,a.Lk)("div",{class:"frequency-title"},"定时规则",-1))),s=o((()=>(0,a.Lk)("span",{class:"suffix"},"日",-1))),d=o((()=>(0,a.Lk)("span",{class:"suffix"},"时",-1))),r=o((()=>(0,a.Lk)("span",{class:"suffix"},"分",-1))),n=o((()=>(0,a.Lk)("span",{class:"suffix"},"秒",-1))),u=(0,a.eW)("取 消"),m=(0,a.eW)("保 存");function c(e,l,t,o,c,p){const h=(0,a.g2)("el-input"),f=(0,a.g2)("el-form-item"),b=(0,a.g2)("el-option"),g=(0,a.g2)("el-select"),k=(0,a.g2)("el-col"),_=(0,a.g2)("el-input-number"),y=(0,a.g2)("el-switch"),v=(0,a.g2)("el-form"),F=(0,a.g2)("el-button"),V=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(V,{title:c.titleMap[c.mode],modelValue:c.visible,"onUpdate:modelValue":l[12]||(l[12]=e=>c.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[13]||(l[13]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(F,{onClick:l[10]||(l[10]=e=>c.visible=!1)},{default:(0,a.k6)((()=>[u])),_:1}),(0,a.bF)(F,{type:"primary",loading:e.isSaving,onClick:l[11]||(l[11]=e=>p.submit())},{default:(0,a.k6)((()=>[m])),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(v,{model:c.form,rules:e.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{label:"标题",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:c.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.title=e),placeholder:"计划任务标题",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(f,{label:"执行脚本",prop:"shell"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"textarea",modelValue:c.form.shell,"onUpdate:modelValue":l[1]||(l[1]=e=>c.form.shell=e),clearable:"",rows:3},null,8,["modelValue"])])),_:1}),(0,a.bF)(f,{prop:"frequency"},{label:(0,a.k6)((()=>[i])),default:(0,a.k6)((()=>[(0,a.bF)(k,{span:4},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:c.form.frequency.type,"onUpdate:modelValue":l[2]||(l[2]=e=>c.form.frequency.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"每隔N秒",value:"1"}),(0,a.bF)(b,{label:"每隔N分钟",value:"2"}),(0,a.bF)(b,{label:"每隔N小时",value:"3"}),(0,a.bF)(b,{label:"每隔N天",value:"4"}),(0,a.bF)(b,{label:"每天",value:"5"}),(0,a.bF)(b,{label:"每星期",value:"6"}),(0,a.bF)(b,{label:"每月",value:"7"})])),_:1},8,["modelValue"])])),_:1}),7==c.form.frequency.type||4==c.form.frequency.type?((0,a.uX)(),(0,a.Wv)(k,{key:0,span:4,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:c.form.frequency.day,"onUpdate:modelValue":l[3]||(l[3]=e=>c.form.frequency.day=e),"controls-position":"right",min:1,max:31,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),s])),_:1})):(0,a.Q3)("",!0),6==c.form.frequency.type?((0,a.uX)(),(0,a.Wv)(k,{key:1,span:4,style:{"margin-left":"3px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:c.form.frequency.week,"onUpdate:modelValue":l[4]||(l[4]=e=>c.form.frequency.week=e),placeholder:"星期"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"周一",value:"1"}),(0,a.bF)(b,{label:"周二",value:"2"}),(0,a.bF)(b,{label:"周三",value:"3"}),(0,a.bF)(b,{label:"周四",value:"4"}),(0,a.bF)(b,{label:"周五",value:"5"}),(0,a.bF)(b,{label:"周六",value:"6"}),(0,a.bF)(b,{label:"周日",value:"7"})])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),c.form.frequency.type>2&&4!=c.form.frequency.type?((0,a.uX)(),(0,a.Wv)(k,{key:2,span:4,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:c.form.frequency.hour,"onUpdate:modelValue":l[5]||(l[5]=e=>c.form.frequency.hour=e),"controls-position":"right",min:0,max:23,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),d])),_:1})):(0,a.Q3)("",!0),2==c.form.frequency.type||c.form.frequency.type>4?((0,a.uX)(),(0,a.Wv)(k,{key:3,span:4,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:c.form.frequency.minute,"onUpdate:modelValue":l[6]||(l[6]=e=>c.form.frequency.minute=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),r])),_:1})):(0,a.Q3)("",!0),1==c.form.frequency.type||c.form.frequency.type>4?((0,a.uX)(),(0,a.Wv)(k,{key:4,span:4,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:c.form.frequency.second,"onUpdate:modelValue":l[7]||(l[7]=e=>c.form.frequency.second=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),n])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(f,{label:"排序"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:c.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>c.form.sort=e),placeholder:"越大越前",clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(f,{label:"是否启用",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:c.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>c.form.status=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var p={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增定时任务",edit:"编辑定时任务",show:"查看"},form:{title:"",type:2,shell:"",frequency:{type:"1",day:"1",week:"1",hour:"1",minute:"1",second:"1"},status:0,sort:0},visible:!1,isSaveing:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.crontab.addTask.post(this.form):await this.$API.crontab.editTask.post(this.form),this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){console.log("设置数据",e)}}},h=t(1456);const f=(0,h.A)(p,[["render",c],["__scopeId","data-v-92cf62e2"]]);var b=f},9895:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(7267);const o=(0,a.eW)("正常"),i=(0,a.eW)("禁用"),s=(0,a.eW)("取 消"),d=(0,a.eW)("保 存");function r(e,l,t,r,n,u){const m=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-radio"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(b,{title:n.titleMap[n.mode],modelValue:n.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>n.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{onClick:l[4]||(l[4]=e=>n.visible=!1)},{default:(0,a.k6)((()=>[s])),_:1}),"show"!==n.mode?((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"primary",loading:n.isSaveing,onClick:l[5]||(l[5]=e=>u.submit())},{default:(0,a.k6)((()=>[d])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(h,{model:n.form,rules:n.rules,disabled:"show"===n.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"物流公司名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.name=e),placeholder:"物流公司名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"物流公司编码"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.code,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.code=e),placeholder:"物流公司编码",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:1,modelValue:n.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(p,{label:2,modelValue:n.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var n={name:"expressCorpSettingSave",emits:["success","closed"],data(){return{mode:"add",titleMap:{edit:"编辑物流公司",add:"添加物流公司"},visible:!1,isSaveing:!1,form:{id:"",name:"",code:"",status:1},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入哈希币",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.expressCorpSetting.add.post(this.form):await this.$API.expressCorpSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.code=e.code,this.form.status=e.status}}},u=t(1456);const m=(0,u.A)(n,[["render",r]]);var c=m},2508:function(e,l,t){t.r(l),t.d(l,{default:function(){return fe}});var a=t(7267),o=t(5710);const i=e=>((0,a.Qi)("data-v-91967b0c"),e=e(),(0,a.jt)(),e),s={class:"goods-type",style:{height:"100%"}},d=i((()=>(0,a.Lk)("div",{style:{"margin-top":"5%"}},"积分商品",-1))),r={style:{color:"#999","font-size":"12px",height:"24px"}},n=i((()=>(0,a.Lk)("span",{class:"icon"},null,-1))),u=i((()=>(0,a.Lk)("div",{style:{"margin-top":"5%"}},"盲盒商品",-1))),m={style:{color:"#999","font-size":"12px",height:"24px"}},c=i((()=>(0,a.Lk)("span",{class:"icon"},null,-1))),p=i((()=>(0,a.Lk)("div",{style:{"margin-top":"5%"}},"优惠券商品",-1))),h={style:{color:"#999","font-size":"12px",height:"24px"}},f=i((()=>(0,a.Lk)("span",{class:"icon"},null,-1))),b=i((()=>(0,a.Lk)("div",{style:{"margin-top":"5%"}},"有赞CDK",-1))),g={style:{color:"#999","font-size":"12px",height:"24px"}},k=i((()=>(0,a.Lk)("span",{class:"icon"},null,-1))),_={class:"img-list"},y=["src"],v={class:"img-tools"},F=i((()=>(0,a.Lk)("p",{style:{"margin-left":"100px",color:"#909399"}}," * 建议尺寸：336*336, 最多选择 8 张 ",-1))),V=(0,a.eW)("上架"),w=(0,a.eW)("下架"),x=(0,a.eW)("点击上传"),C=(0,a.eW)("下一步"),W=(0,a.eW)("保存"),I=(0,a.eW)("单规格"),S=(0,a.eW)("多规格"),$={key:1},U=(0,a.eW)(" 元 "),L=(0,a.eW)(" 元 "),X=i((()=>(0,a.Lk)("span",{style:{"font-size":"12px","margin-left":"10px"}},"(-1 表示无限库存)",-1))),D=i((()=>(0,a.Lk)("span",{style:{"font-size":"12px","margin-left":"10px"}},"(用于碎片合成时进度计算) ",-1))),A={key:2,style:{"margin-bottom":"20px"}},q={style:{float:"right","margin-bottom":"10px",width:"1200px"}},E=(0,a.eW)("新的规格"),P=(0,a.eW)("生成属性"),Q={style:{display:"flex","flex-flow":"row wrap"}},M=["onClick"],z=(0,a.eW)(" 添加 "),O={key:3,style:{"margin-bottom":"20px"}},N=(0,a.eW)("图片"),B=(0,a.eW)("展示价格"),T=(0,a.eW)("可兑换哈希币"),G=(0,a.eW)("成本价"),R=(0,a.eW)("售价(哈希币)"),Y=(0,a.eW)("库存"),K=["onClick"],H=["src"],J=["onClick"],j=(0,a.eW)("删除"),Z=(0,a.eW)("上一步"),ee=(0,a.eW)("下一步"),le=(0,a.eW)("保存"),te=(0,a.eW)("上一步"),ae=(0,a.eW)("保存"),oe={key:0},ie=(0,a.eW)(" 元 "),se={class:"dialog-footer"},de=(0,a.eW)("确 定");function re(e,l,t,i,re,ne){const ue=(0,a.g2)("el-icon-Goods"),me=(0,a.g2)("el-icon"),ce=(0,a.g2)("el-icon-Box"),pe=(0,a.g2)("el-form-item"),he=(0,a.g2)("el-cascader"),fe=(0,a.g2)("el-input"),be=(0,a.g2)("el-radio"),ge=(0,a.g2)("el-option"),ke=(0,a.g2)("el-select"),_e=(0,a.g2)("el-button"),ye=(0,a.g2)("el-upload"),ve=(0,a.g2)("el-form"),Fe=(0,a.g2)("el-tab-pane"),Ve=(0,a.g2)("el-tooltip"),we=(0,a.g2)("el-icon-delete"),xe=(0,a.g2)("el-table-column"),Ce=(0,a.g2)("el-icon-plus"),We=(0,a.g2)("el-table"),Ie=(0,a.g2)("el-button-group"),Se=(0,a.g2)("sc-editor"),$e=(0,a.g2)("el-tabs"),Ue=(0,a.g2)("Attachment"),Le=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)($e,{modelValue:re.activeName,"onUpdate:modelValue":l[30]||(l[30]=e=>re.activeName=e),class:"demo-tabs"},{default:(0,a.k6)((()=>[(0,a.bF)(Fe,{label:"基础信息",name:"1"},{default:(0,a.k6)((()=>[(0,a.bF)(ve,{model:re.form,"label-width":"100px",rules:re.rules,ref:"ruleForm"},{default:(0,a.k6)((()=>[(0,a.bF)(pe,{label:"商品类型",prop:"goods_type",class:"goods-type"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",s,[(0,a.Lk)("li",{class:(0,o.C4)({"goods-type-active":1==re.form.goods_type}),onClick:l[0]||(l[0]=e=>ne.checkType(1))},[d,(0,a.Lk)("div",r,[(0,a.bF)(me,{style:{"font-size":"18px",color:"#f56c6c","margin-top":"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)(ue)])),_:1})]),n],2),(0,a.Lk)("li",{class:(0,o.C4)({"goods-type-active":2==re.form.goods_type}),onClick:l[1]||(l[1]=e=>ne.checkType(2)),style:{"margin-left":"10px"}},[u,(0,a.Lk)("div",m,[(0,a.bF)(me,{style:{"font-size":"18px",color:"#67c23a","margin-top":"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)(ce)])),_:1})]),c],2),(0,a.Lk)("li",{class:(0,o.C4)({"goods-type-active":3==re.form.goods_type}),onClick:l[2]||(l[2]=e=>ne.checkType(3)),style:{"margin-left":"10px"}},[p,(0,a.Lk)("div",h,[(0,a.bF)(me,{style:{"font-size":"18px",color:"#398ee5","margin-top":"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)(ce)])),_:1})]),f],2),(0,a.Lk)("li",{class:(0,o.C4)({"goods-type-active":4==re.form.goods_type}),onClick:l[3]||(l[3]=e=>ne.checkType(4)),style:{"margin-left":"10px"}},[b,(0,a.Lk)("div",g,[(0,a.bF)(me,{style:{"font-size":"18px",color:"#e6a23c","margin-top":"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)(ce)])),_:1})]),k],2)])])),_:1}),(0,a.bF)(pe,{label:"所属分类",prop:"cateId"},{default:(0,a.k6)((()=>[(0,a.bF)(he,{modelValue:re.cateId,"onUpdate:modelValue":l[4]||(l[4]=e=>re.cateId=e),options:re.cate,"show-all-levels":!1,props:re.treeProps,style:{width:"500px"},clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(pe,{label:"商品名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.name,"onUpdate:modelValue":l[5]||(l[5]=e=>re.form.name=e),style:{width:"500px"},type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),(0,a.bF)(pe,{label:"商品副标题"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.sub_title,"onUpdate:modelValue":l[6]||(l[6]=e=>re.form.sub_title=e),style:{width:"500px"},type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),(0,a.bF)(pe,{label:"商品主图",prop:"image",style:{"margin-bottom":"5px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(re.goodsImages,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:l},[(0,a.Lk)("img",{src:e,alt:"图片",style:{height:"58px",width:"58px"}},null,8,y),(0,a.Lk)("div",v,[(0,a.bF)(me,{style:{"font-size":"14px",color:"#fff"},onClick:e=>ne.removeIcon(l)},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(re.deleteIcon)))])),_:2},1032,["onClick"])])])))),128)),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[7]||(l[7]=(...e)=>ne.showImage&&ne.showImage(...e))},[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(re.plusIcon)))])),_:1})])])])])),_:1}),F,(0,a.bF)(pe,{label:"状态",style:{"margin-top":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(be,{modelValue:re.form.status,"onUpdate:modelValue":l[8]||(l[8]=e=>re.form.status=e),label:"1"},{default:(0,a.k6)((()=>[V])),_:1},8,["modelValue"]),(0,a.bF)(be,{modelValue:re.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>re.form.status=e),label:"2"},{default:(0,a.k6)((()=>[w])),_:1},8,["modelValue"])])),_:1}),2==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:0,label:"运费"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.delivery_fee,"onUpdate:modelValue":l[10]||(l[10]=e=>re.form.delivery_fee=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),3==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:1,label:"优惠劵"},{default:(0,a.k6)((()=>[(0,a.bF)(ke,{modelValue:re.form.coupon_id,"onUpdate:modelValue":l[11]||(l[11]=e=>re.form.coupon_id=e),placeholder:"请选择",clearable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(re.couponOptions,(e=>((0,a.uX)(),(0,a.Wv)(ge,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),4==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:2,label:"上传csv文档"},{default:(0,a.k6)((()=>[(0,a.bF)(ye,{action:re.uploadUrl,limit:1,"on-success":e.handleOnSuccessCert,headers:e.headers,"file-list":e.wechat_pay_cert},{default:(0,a.k6)((()=>[(0,a.bF)(_e,{size:"small",type:"primary"},{default:(0,a.k6)((()=>[x])),_:1})])),_:1},8,["action","on-success","headers","file-list"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(pe,{label:"排序"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.sort,"onUpdate:modelValue":l[12]||(l[12]=e=>re.form.sort=e),style:{width:"500px"},type:"number",placeholder:"值越大越靠前"},null,8,["modelValue"])])),_:1}),(0,a.bF)(pe,null,{default:(0,a.k6)((()=>[(0,a.bF)(_e,{type:"primary",onClick:ne.nextStep},{default:(0,a.k6)((()=>[C])),_:1},8,["onClick"]),"edit"==re.mode?((0,a.uX)(),(0,a.Wv)(_e,{key:0,type:"primary",onClick:ne.saveGoods},{default:(0,a.k6)((()=>[W])),_:1},8,["onClick"])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.bF)(Fe,{label:"规格库存",name:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(ve,{model:re.form,"label-width":"100px",rules:re.rules,ref:"ruleForm"},{default:(0,a.k6)((()=>[1==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:0,label:"商品规格",style:{"margin-top":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(be,{modelValue:re.form.type,"onUpdate:modelValue":l[13]||(l[13]=e=>re.form.type=e),label:"1"},{default:(0,a.k6)((()=>[I])),_:1},8,["modelValue"]),(0,a.bF)(be,{modelValue:re.form.type,"onUpdate:modelValue":l[14]||(l[14]=e=>re.form.type=e),label:"2"},{default:(0,a.k6)((()=>[S])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),1==re.form.type?((0,a.uX)(),(0,a.CE)("div",$,[(0,a.bF)(pe,{label:"展示价格"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.price,"onUpdate:modelValue":l[15]||(l[15]=e=>re.form.price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(pe,{label:"可兑换哈希币"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.recovery_price,"onUpdate:modelValue":l[16]||(l[16]=e=>re.form.recovery_price=e),style:{width:"370px"},type:"number"},null,8,["modelValue"]),(0,a.bF)(fe,{modelValue:re.recover_price,"onUpdate:modelValue":l[17]||(l[17]=e=>re.recover_price=e),style:{width:"100px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),U,(0,a.bF)(Ve,{class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.k6)((()=>[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(re.QuestionFilled)))])),_:1})])),_:1})])),_:1}),(0,a.bF)(pe,{label:"成本价"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.cost_price,"onUpdate:modelValue":l[18]||(l[18]=e=>re.form.cost_price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(pe,{label:"售价(哈希币)"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.integral_price,"onUpdate:modelValue":l[19]||(l[19]=e=>re.form.integral_price=e),style:{width:"370px"},type:"number"},null,8,["modelValue"]),(0,a.bF)(fe,{modelValue:re.integral_price,"onUpdate:modelValue":l[20]||(l[20]=e=>re.integral_price=e),style:{width:"100px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),L,(0,a.bF)(Ve,{class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.k6)((()=>[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(re.QuestionFilled)))])),_:1})])),_:1})])),_:1}),1==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:0,label:"库存"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.stock,"onUpdate:modelValue":l[21]||(l[21]=e=>re.form.stock=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),X])),_:1})):(0,a.Q3)("",!0),2==re.form.goods_type?((0,a.uX)(),(0,a.Wv)(pe,{key:1,label:"合成值"},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.form.conflate_val,"onUpdate:modelValue":l[22]||(l[22]=e=>re.form.conflate_val=e),modelModifiers:{number:!0},min:"0",style:{width:"370px"},type:"number"},null,8,["modelValue"]),D])),_:1})):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),2==re.form.type?((0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("div",q,[(0,a.bF)(_e,{type:"primary",icon:"el-icon-plus",size:"small",onClick:ne.addRule},{default:(0,a.k6)((()=>[E])),_:1},8,["onClick"]),(0,a.bF)(_e,{type:"primary",icon:"el-icon-cpu",size:"small",onClick:ne.makeRule},{default:(0,a.k6)((()=>[P])),_:1},8,["onClick"])]),(0,a.bF)(We,{data:re.preItem,border:"",style:{width:"1200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(xe,{label:"规格名",width:"200"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{placeholder:"规格名",style:{width:"150px"},modelValue:e.row.title,"onUpdate:modelValue":l=>e.row.title=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.bF)(me,{onClick:l=>ne.delTitle(e.$index),class:"del-btn"},{default:(0,a.k6)((()=>[(0,a.bF)(we)])),_:2},1032,["onClick"])])),_:1}),(0,a.bF)(xe,{label:"规格值"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",Q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.row.item,((l,t)=>((0,a.uX)(),(0,a.CE)("div",{style:{width:"180px",float:"left","margin-top":"5px"},key:t},[(0,a.bF)(fe,{placeholder:"规格值",style:{width:"150px"},modelValue:e.row.item[t],"onUpdate:modelValue":l=>e.row.item[t]=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.bF)(me,{onClick:l=>ne.delItem(e.$index,t),class:"del-btn"},{default:(0,a.k6)((()=>[(0,a.bF)(we)])),_:2},1032,["onClick"])])))),128)),(0,a.Lk)("div",{class:"item-tool",onClick:l=>ne.addNewItem(e.$index)},[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(Ce)])),_:1}),z],8,M)])])),_:1})])),_:1},8,["data"])])):(0,a.Q3)("",!0),re.final.length>0&&2==re.form.type?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.bF)(pe,{label:"批量设置",style:{"margin-top":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(Ie,null,{default:(0,a.k6)((()=>[(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[23]||(l[23]=e=>re.batchDialogVisible=!0)},{default:(0,a.k6)((()=>[N])),_:1}),(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[24]||(l[24]=e=>ne.setBatch("price","展示价格"))},{default:(0,a.k6)((()=>[B])),_:1}),(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[25]||(l[25]=e=>ne.setBatch("recovery_price","可兑换哈希币"))},{default:(0,a.k6)((()=>[T])),_:1}),(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[26]||(l[26]=e=>ne.setBatch("cost_price","成本价"))},{default:(0,a.k6)((()=>[G])),_:1}),(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[27]||(l[27]=e=>ne.setBatch("integral_price","售价(哈希币)"))},{default:(0,a.k6)((()=>[R])),_:1}),(0,a.bF)(_e,{type:"primary",size:"small",onClick:l[28]||(l[28]=e=>ne.setBatch("stock","库存"))},{default:(0,a.k6)((()=>[Y])),_:1})])),_:1})])),_:1}),(0,a.bF)(We,{data:re.final,border:"",style:{width:"1200px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(re.tableHead,((e,l)=>((0,a.uX)(),(0,a.Wv)(xe,{label:e.label,width:"150",key:l},{default:(0,a.k6)((l=>[(0,a.eW)((0,o.v_)(l.row.sku[e.property]),1)])),_:2},1032,["label"])))),128)),(0,a.bF)(xe,{label:"图片",width:"100"},{default:(0,a.k6)((e=>[""==e.row.image?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"up-item-img",onClick:l=>ne.setOneImg(e.$index)},[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(Ce)])),_:1})],8,K)):(0,a.Q3)("",!0),e.row.image?((0,a.uX)(),(0,a.CE)("img",{key:1,style:{width:"40px",height:"40px"},src:e.row.image},null,8,H)):(0,a.Q3)("",!0),e.row.image?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"img-tools",onClick:l=>ne.rmImg(e.$index)},[(0,a.bF)(me,{style:{color:"#fff"}},{default:(0,a.k6)((()=>[(0,a.bF)(we)])),_:1})],8,J)):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(xe,{label:"展示价格",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(xe,{label:"可兑换哈希币",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{modelValue:e.row.recovery_price,"onUpdate:modelValue":l=>e.row.recovery_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(xe,{label:"成本价",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{modelValue:e.row.cost_price,"onUpdate:modelValue":l=>e.row.cost_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(xe,{label:"售价(哈希币)",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{modelValue:e.row.integral_price,"onUpdate:modelValue":l=>e.row.integral_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(xe,{label:"库存",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(fe,{modelValue:e.row.stock,"onUpdate:modelValue":l=>e.row.stock=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(xe,{label:"操作",fixed:"right",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(_e,{onClick:l=>ne.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[j])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])):(0,a.Q3)("",!0),(0,a.bF)(pe,null,{default:(0,a.k6)((()=>[(0,a.bF)(_e,{onClick:ne.preStep},{default:(0,a.k6)((()=>[Z])),_:1},8,["onClick"]),(0,a.bF)(_e,{type:"primary",onClick:ne.ruleNext},{default:(0,a.k6)((()=>[ee])),_:1},8,["onClick"]),"edit"==re.mode?((0,a.uX)(),(0,a.Wv)(_e,{key:0,type:"primary",onClick:ne.saveGoods},{default:(0,a.k6)((()=>[le])),_:1},8,["onClick"])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.bF)(Fe,{label:"商品详情",name:"3"},{default:(0,a.k6)((()=>[(0,a.bF)(Se,{modelValue:re.form.content,"onUpdate:modelValue":l[29]||(l[29]=e=>re.form.content=e),height:600},null,8,["modelValue"]),(0,a.bF)(ve,{model:re.form,"label-width":"100px",style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(pe,null,{default:(0,a.k6)((()=>[(0,a.bF)(_e,{onClick:ne.preStep},{default:(0,a.k6)((()=>[te])),_:1},8,["onClick"]),(0,a.bF)(_e,{type:"primary",onClick:ne.saveGoods},{default:(0,a.k6)((()=>[ae])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(Le,{title:"选择资源",modelValue:re.imgResourceVisible,"onUpdate:modelValue":l[31]||(l[31]=e=>re.imgResourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(Ue,{"select-num":8,onSelectedFiles:ne.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.bF)(Le,{title:"选择资源",modelValue:re.batchDialogVisible,"onUpdate:modelValue":l[32]||(l[32]=e=>re.batchDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(Ue,{"select-num":1,onSelectedFiles:ne.selectedBatchImg},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.bF)(Le,{title:`设置${re.batchTitle}`,modelValue:re.batchVisible,"onUpdate:modelValue":l[35]||(l[35]=e=>re.batchVisible=e),width:"600px"},{footer:(0,a.k6)((()=>[(0,a.Lk)("span",se,[(0,a.bF)(_e,{type:"primary",onClick:ne.batchFormSubmit},{default:(0,a.k6)((()=>[de])),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.bF)(ve,{ref:"form",model:re.batchForm,"label-width":"120px"},{default:(0,a.k6)((()=>[(0,a.bF)(pe,{label:re.batchTitle},{default:(0,a.k6)((()=>[(0,a.bF)(fe,{modelValue:re.batchForm.field,"onUpdate:modelValue":l[33]||(l[33]=e=>re.batchForm.field=e),type:"number",style:{width:"200px"}},null,8,["modelValue"]),"recovery_price"==re.setField||"integral_price"==re.setField?((0,a.uX)(),(0,a.CE)("div",oe,[(0,a.bF)(fe,{modelValue:re.set_integral_price,"onUpdate:modelValue":l[34]||(l[34]=e=>re.set_integral_price=e),style:{width:"90px","margin-left":"30px"},type:"number"},null,8,["modelValue"]),ie])):(0,a.Q3)("",!0),"recovery_price"==re.setField||"integral_price"==re.setField?((0,a.uX)(),(0,a.Wv)(Ve,{key:1,class:"item",effect:"dark",content:"(您可以在此处填写金额，系统自动帮您生成哈希币金额)",placement:"top-start"},{default:(0,a.k6)((()=>[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(re.QuestionFilled)))])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title","modelValue"])],64)}t(7414);var ne=t(940),ue=t(2383);const me=(0,a.$V)((()=>Promise.all([t.e(8774),t.e(6158),t.e(8749)]).then(t.bind(t,8852))));var ce={name:"goodsAdd",components:{Attachment:ne.A,scEditor:me},data(){return{uploadUrl:ue.A.API_URL+"/system.paySetting/uploadTxtFile",QuestionFilled:"el-icon-QuestionFilled",activeName:"1",imgResourceVisible:!1,dialogVisible:!1,cateId:[],goodsImages:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",couponOptions:[],ruleItem:{title:"",item:[""]},form:{goods_type:1,name:"",cate_id:"",sub_title:"",image:"",status:"1",delivery_fee:0,sort:0,type:"1",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:-1,conflate_val:0},cate:[],treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},rules:{goods_type:[{required:!0,message:"请选择商品类型",trigger:"blur"}],name:[{required:!0,message:"请输入商品名",trigger:"blur"}],cateId:[{required:!0,message:"请选择所属分类",trigger:"blur"}],image:[{required:!0,message:"请选择商品主图",trigger:"blur"}]},preItem:[{title:"",item:[""]}],final:[],tableHead:[],ruleTableItem:{sku:[],image:"",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},batchDialogVisible:!1,batchTitle:"",batchVisible:!1,setField:"",batchForm:{field:""},selectImgIndex:-1,mode:"add",recover_price:"0.00",integral_price:"0.00",set_integral_price:"0.00",ratio:0}},mounted(){this.getGoodsCate(),this.getBaseInfo(),this.getSelectTypeList()},watch:{recover_price:{handler(e){this.form.recovery_price=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0},integral_price:{handler(e){this.form.integral_price=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0},set_integral_price:{handler(e){this.batchForm.field=(e*this.ratio).toFixed(2)},deep:!0,immediate:!0}},methods:{async getBaseInfo(){let e=await this.$API.system.base.get();this.ratio=e.data.change_ratio,this.recover_price=(this.form.recovery_price/this.ratio).toFixed(2),this.integral_price=(this.form.integral_price/this.ratio).toFixed(2)},checkType(e){this.form.goods_type=e},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.cate=e.data},removeIcon(e){this.goodsImages.splice(e,1)},selectedFiles(e){this.goodsImages=[],e.forEach((e=>{this.goodsImages.push(e.url)})),this.imgResourceVisible=!1},showImage(){this.imgResourceVisible=!0},nextStep(){this.activeName=parseInt(this.activeName)+1+""},preStep(){this.activeName=parseInt(this.activeName)-1+""},addRule(){let e=JSON.parse(JSON.stringify(this.ruleItem));this.preItem.push(e)},makeRule(){let e=[],l=[];this.preItem.forEach(((t,a)=>{let o=t.item.filter((function(e){return e&&e.trim()}));""!=t.title&&o.length>0&&(e.push({label:t.title,property:a}),l.push(t.item))}));let t=this.calcDescartes(l);this.final=[],this.ruleTableItem={sku:[],image:"",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},t.forEach((e=>{if(e instanceof Array){let l=e.length;if(e.forEach(((l,t)=>{l||e.splice(t,1)})),l!=e.length)return}else if(""==e)return;this.ruleTableItem.sku=e instanceof Array?e:[e];let l=JSON.parse(JSON.stringify(this.ruleTableItem));this.final.push(l)})),this.tableHead=e},delTitle(e){this.preItem.splice(e,1)},delItem(e,l){this.preItem[e].item.splice(l,1)},addNewItem(e){this.preItem[e].item.push("")},calcDescartes(e){return e.length<2?e[0]||[]:e.reduce(((e,l)=>{let t=[];return e.forEach((e=>{l.forEach((l=>{e instanceof Array?t.push([...e,l]):t.push([e,l])}))})),t}))},setBatch(e,l){this.batchTitle=l,this.batchVisible=!0,this.setField=e},batchFormSubmit(){if(""==this.batchForm.field)return this.$message.error("请输入正确的值"),!1;this.final.map((e=>{"stock"!=this.setField&&"spu"!=this.setField?e[this.setField]=Number(this.batchForm.field).toFixed(2):e[this.setField]=this.batchForm.field})),this.batchForm.field="",this.batchVisible=!1,this.set_integral_price="0.00"},selectedBatchImg(e){parseInt(this.selectImgIndex)>=0?(this.final[parseInt(this.selectImgIndex)].image=e[0].url,this.selectImgIndex=-1):this.final.map((l=>{l.image=e[0].url})),this.batchDialogVisible=!1},setOneImg(e){this.batchDialogVisible=!0,this.selectImgIndex=e},rmImg(e){this.final[parseInt(e)].image=""},ruleNext(){if(2==this.form.type&&0==this.final.length)return this.$message.error("请生成多规格属性！"),!1;this.activeName=parseInt(this.activeName)+1+""},async saveGoods(){let e;this.cateId instanceof Array?this.form.cate_id=this.cateId[this.cateId.length-1]:this.form.cate_id=this.cateId,this.form.preItem=this.preItem,this.form.final=this.final,this.form.image=this.goodsImages.join(","),e="edit"==this.mode?await this.$API.goods.edit.post(this.form):await this.$API.goods.add.post(this.form),0==e.code?(this.$message.success("操作成功"),this.$emit("save")):this.$message.error(e.msg)},handleDel(e){this.final.splice(e,1)},ueditorContent(e){this.form.content=e},setMode(e){return this.mode=e,this},async getSelectTypeList(){let e=await this.$API.coupon.select.get();this.couponOptions=e.data},setData(e){if(console.log("商品信息",e),this.form.id=e.id,this.form.goods_type=e.goods_type,this.form.name=e.name,this.form.coupon_id=e.coupon_id,this.sub_title=e.sub_title,this.form.image=e.image,this.form.status=e.status+"",this.form.delivery_fee=e.delivery_fee,this.form.sort=e.sort,this.form.type=e.type+"",this.form.price=e.price,this.form.recovery_price=e.recovery_price,this.form.cost_price=e.cost_price,this.form.integral_price=e.integral_price,this.form.stock=e.stock,this.form.content=e.content,this.form.conflate_val=e.conflate_val,this.cateId=e.cate_id,this.goodsImages=e.image.split(","),e.rule&&(this.preItem=JSON.parse(e.rule.rule)),e.ruleExtend){let l=[];this.preItem.forEach(((e,t)=>{let a=e.item.filter((function(e){return e&&e.trim()}));""!=e.title&&a.length>0&&l.push({label:e.title,property:t})})),this.tableHead=l,e.ruleExtend.map((e=>{if(!(e.sku instanceof Array))return e.sku=e.sku.split("※")})),this.final=e.ruleExtend}}}},pe=t(1456);const he=(0,pe.A)(ce,[["render",re],["__scopeId","data-v-91967b0c"]]);var fe=he},6719:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var a=t(7267);const o=e=>((0,a.Qi)("data-v-4db443f6"),e=e(),(0,a.jt)(),e),i={class:"img-list"},s={key:0},d=["src"],r={class:"img-tools"},n=o((()=>(0,a.Lk)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：64*64 ",-1))),u=(0,a.eW)("显示"),m=(0,a.eW)("隐藏"),c=(0,a.eW)("取 消"),p=(0,a.eW)("保 存");function h(e,l,t,o,h,f){const b=(0,a.g2)("el-input"),g=(0,a.g2)("el-form-item"),k=(0,a.g2)("el-icon"),_=(0,a.g2)("el-radio"),y=(0,a.g2)("el-form"),v=(0,a.g2)("el-button"),F=(0,a.g2)("el-dialog"),V=(0,a.g2)("Attachment");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{title:h.titleMap[h.mode],modelValue:h.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>h.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(v,{onClick:l[7]||(l[7]=e=>h.visible=!1)},{default:(0,a.k6)((()=>[c])),_:1}),"show"!=h.mode?((0,a.uX)(),(0,a.Wv)(v,{key:0,type:"primary",loading:h.isSaveing,onClick:l[8]||(l[8]=e=>f.submit())},{default:(0,a.k6)((()=>[p])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(y,{model:h.form,rules:h.rules,disabled:"show"==h.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"上级分类"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:h.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>h.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{label:"分类名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:h.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>h.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{label:"图标",prop:"icon"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",i,[h.form.icon?((0,a.uX)(),(0,a.CE)("li",s,[(0,a.Lk)("img",{src:h.form.icon,alt:"图片",style:{height:"58px",width:"58px"}},null,8,d),(0,a.Lk)("div",r,[(0,a.bF)(k,{style:{"font-size":"14px",color:"#fff"},onClick:l[2]||(l[2]=e=>f.removeIcon())},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(h.deleteIcon)))])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[3]||(l[3]=(...e)=>f.showImage&&f.showImage(...e))},[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(h.plusIcon)))])),_:1})])]),n])])),_:1}),(0,a.bF)(g,{label:"排序",prop:"sort"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{type:"number",modelValue:h.form.sort,"onUpdate:modelValue":l[4]||(l[4]=e=>h.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{label:"是否显示",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{label:1,modelValue:h.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>h.form.status=e)},{default:(0,a.k6)((()=>[u])),_:1},8,["modelValue"]),(0,a.bF)(_,{label:2,modelValue:h.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>h.form.status=e)},{default:(0,a.k6)((()=>[m])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.bF)(F,{title:"选择资源",modelValue:h.resourceVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>h.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{"select-num":1,onSelectedFiles:f.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var f=t(940),b={emits:["success","closed"],components:{Attachment:f.A},data(){return{mode:"add",titleMap:{add:"新增分类",edit:"编辑分类",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,pname:"顶级分类",form:{id:"",pid:0,name:"",icon:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],icon:[{required:!0,message:"请输选择图标",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.goodsCate.add.post(this.form):await this.$API.goodsCate.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.icon=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.icon=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.name=e.name,this.form.icon=e.icon,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},g=t(1456);const k=(0,g.A)(b,[["render",h],["__scopeId","data-v-4db443f6"]]);var _=k},7300:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.eW)("取 消"),i=(0,a.eW)("确认发货");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-option"),u=(0,a.g2)("el-select"),m=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-input"),p=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[6]||(l[6]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[3]||(l[3]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[o])),_:1}),"show"!==d.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[4]||(l[4]=e=>r.submit())},{default:(0,a.k6)((()=>[i])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(p,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"120px"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"物流公司名称",prop:"express_name"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),onChange:r.expressChange,style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.expressList,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.bF)(m,{label:"物流公司编码",prop:"express_code"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.express_code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"物流单号",prop:"express_no"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.express_no,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={name:"integralOrderDelivery",emits:["success","closed"],data(){return{mode:"delivery",titleMap:{delivery:"发货"},expressList:[],visible:!1,isSaveing:!1,form:{order_id:"",user_id:"",express_name:"",express_code:"",express_no:""},deleteIcon:"el-icon-delete",rules:{express_name:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_code:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){this.getExpressList()},methods:{open(e){return this.form.order_id=e.id,this.form.user_id=e.user_id,this.visible=!0,this},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((l=>{l.name==e&&(this.form.express_code=l.code)}))},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.integralOrder.delivery.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))}}},r=t(1456);const n=(0,r.A)(d,[["render",s]]);var u=n},5108:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(7267),o=t(5710);const i=(0,a.Lk)("h4",null,"收件信息",-1),s={style:{"font-size":"14px","margin-top":"10px"}},d={style:{"margin-top":"10px"}},r={style:{"margin-top":"10px"}},n={style:{"margin-top":"10px"}};function u(e,l,t,u,m,c){const p=(0,a.g2)("el-divider"),h=(0,a.g2)("el-table-column"),f=(0,a.g2)("el-avatar"),b=(0,a.g2)("el-table"),g=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>m.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[i,(0,a.Lk)("div",s,[(0,a.Lk)("p",d,"收件人："+(0,o.v_)(m.addressInfo.receiver),1),(0,a.Lk)("p",r,"手机号："+(0,o.v_)(m.addressInfo.phone),1),(0,a.Lk)("p",n," 收件地址："+(0,o.v_)(m.addressInfo.province_name)+(0,o.v_)(m.addressInfo.city_name)+(0,o.v_)(m.addressInfo.area_name)+(0,o.v_)(m.addressInfo.address),1)]),(0,a.bF)(p),(0,a.bF)(b,{data:m.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(h,{prop:"goods_id",label:"商品ID"}),(0,a.bF)(h,{label:"商品图片"},{default:(0,a.k6)((e=>[(0,a.bF)(f,{shape:"square",size:36,src:e.row.goods_image},null,8,["src"])])),_:1}),(0,a.bF)(h,{prop:"goods_name",label:"商品名称"}),(0,a.bF)(h,{label:"商品规格"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)(e.row.rule.split("※").join(",")),1)])),_:1}),(0,a.bF)(h,{prop:"num",label:"数量"}),(0,a.bF)(h,{prop:"real_pay_amount",label:"实际支付金额"}),(0,a.bF)(h,{prop:"real_pay_integral",label:"实际支付哈希币"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}t(7414);var m={name:"integralOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"订单详情"},visible:!1,tableData:[],addressInfo:{}}},mounted(){},methods:{open(e){return console.log(e),this.visible=!0,this.tableData.push(e.data),e.addressInfo&&(this.addressInfo=JSON.parse(e.addressInfo)),this}}},c=t(1456);const p=(0,c.A)(m,[["render",u]]);var h=p},6121:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(7267),o=t(5710);function i(e,l,t,i,s,d){const r=(0,a.g2)("el-tag"),n=(0,a.g2)("el-timeline-item"),u=(0,a.g2)("el-timeline"),m=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(m,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:600,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.eW)("单号："+(0,o.v_)(s.express_no),1)])),_:1}),(0,a.bF)(u,{reverse:s.reverse,style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.express,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{key:l,timestamp:e.time},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.status),1)])),_:2},1032,["timestamp"])))),128))])),_:1},8,["reverse"])])),_:1},8,["title","modelValue"])}var s={name:"integralOrderExpressDetail",emits:["success","closed"],data(){return{mode:"expressDetail",titleMap:{expressDetail:"物流详情"},reverse:!0,visible:!1,express:[],express_no:""}},mounted(){},methods:{open(e){this.visible=!0;let l=JSON.parse(e.express_detail);return l&&(this.express_no=l.result.number,this.express=l.result.list),this}}},d=t(1456);const r=(0,d.A)(s,[["render",i]]);var n=r},4140:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(7267),o=t(5710);function i(e,l,t,i,s,d){const r=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-image"),m=(0,a.g2)("el-button"),c=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.Wv)(c,{ref:"loginForm",model:s.form,rules:s.rules,"label-width":"0",size:"large"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{prop:"user"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:s.form.user,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.bF)(n,{prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:s.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.bF)(n,{prop:"captcha"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:s.form.captcha,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.captcha=e),"prefix-icon":"el-icon-lock",clearable:"",style:{width:"290px"}},null,8,["modelValue"]),(0,a.bF)(u,{src:s.captchaSrc,style:{width:"100px",height:"38px","margin-left":"10px",cursor:"pointer"},onClick:d.changeCaptcha},null,8,["src","onClick"])])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"primary",style:{width:"100%"},loading:s.islogin,onClick:d.login},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])}var s={data(){return{userType:"admin",form:{user:"admin",password:"",autologin:!1,captcha:"",key:""},captchaSrc:"",rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},islogin:!1}},mounted(){this.changeCaptcha(),document.onkeydown=e=>{var l=e||window.event;l&&13==l.keyCode&&this.login()}},methods:{async changeCaptcha(){let e=await this.$API.auth.captcha.get();this.captchaSrc="data:image/png;base64,"+e.data.img,this.form.key=e.data.key},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;var l={username:this.form.user,password:this.form.password,captcha:this.form.captcha,key:this.form.key},t=await this.$API.auth.token.post(l);return 0!=t.code?(this.islogin=!1,this.$message.warning(t.msg),this.changeCaptcha(),!1):(this.$TOOL.cookie.set("TOKEN",t.data.token,{expires:this.form.autologin?86400:0}),this.$TOOL.data.set("USER_INFO",t.data.userInfo),0==t.data.menu.length?(this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1):(this.$TOOL.data.set("MENU",t.data.menu),this.$router.replace({path:"/"}),this.$message.success("登录成功"),void(this.islogin=!1)))}}},d=t(1456);const r=(0,d.A)(s,[["render",i]]);var n=r},5876:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(7267);const o=(0,a.eW)("菜单"),i=(0,a.eW)("功能"),s=(0,a.eW)("显示"),d=(0,a.eW)("隐藏"),r=(0,a.eW)("取 消"),n=(0,a.eW)("保 存");function u(e,l,t,u,m,c){const p=(0,a.g2)("el-input"),h=(0,a.g2)("el-form-item"),f=(0,a.g2)("el-radio"),b=(0,a.g2)("el-form"),g=(0,a.g2)("el-button"),k=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(k,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[13]||(l[13]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[14]||(l[14]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(g,{onClick:l[11]||(l[11]=e=>m.visible=!1)},{default:(0,a.k6)((()=>[r])),_:1}),"show"!=m.mode?((0,a.uX)(),(0,a.Wv)(g,{key:0,type:"primary",loading:m.isSaveing,onClick:l[12]||(l[12]=e=>c.submit())},{default:(0,a.k6)((()=>[n])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(b,{model:m.form,rules:m.rules,disabled:"show"==m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{label:"上级菜单"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>m.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"菜单名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"图标"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.form.icon,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.icon=e),clearable:"",placeholder:"el-icon-suitcase"},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"是否菜单"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{label:1,modelValue:m.form.type,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.type=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(f,{label:2,modelValue:m.form.type,"onUpdate:modelValue":l[4]||(l[4]=e=>m.form.type=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"权限规则"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.form.auth,"onUpdate:modelValue":l[5]||(l[5]=e=>m.form.auth=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"前端路由"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.form.path,"onUpdate:modelValue":l[6]||(l[6]=e=>m.form.path=e),placeholder:"/role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"前端组件"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:m.form.component,"onUpdate:modelValue":l[7]||(l[7]=e=>m.form.component=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"排序"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{type:"number",modelValue:m.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>m.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(h,{label:"是否显示"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>m.form.status=e)},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"]),(0,a.bF)(f,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>m.form.status=e)},{default:(0,a.k6)((()=>[d])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var m={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增菜单",edit:"编辑菜单",show:"查看"},visible:!1,isSaveing:!1,pname:"顶级菜单",form:{id:"",pid:0,type:1,name:"",auth:"",path:"",icon:"",component:"",sort:1,status:1},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.menu.add.post(this.form):await this.$API.menu.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.type=e.type,this.form.name=e.name,this.form.auth=e.auth,this.form.path=e.path,this.form.icon=e.icon,this.form.component=e.component,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},c=t(1456);const p=(0,c.A)(m,[["render",u]]);var h=p},4106:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(7267),o=t(5710);function i(e,l,t,i,s,d){const r=(0,a.g2)("el-empty"),n=(0,a.g2)("el-descriptions-item"),u=(0,a.g2)("el-descriptions"),m=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(m,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[""==s.third_return?((0,a.uX)(),(0,a.Wv)(r,{key:0,description:"暂无"})):((0,a.uX)(),(0,a.Wv)(u,{key:1,title:"",direction:"vertical",column:4,border:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.third_return,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{label:l,key:l},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e),1)])),_:2},1032,["label"])))),128))])),_:1}))])),_:1},8,["title","modelValue"])}var s={name:"rechargeLogDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"三方信息"},visible:!1,third_return:{}}},mounted(){},methods:{open(e){return this.third_return=e.third_return?JSON.parse(e.third_return):"",this.visible=!0,this}}},d=t(1456);const r=(0,d.A)(s,[["render",i]]);var n=r},4611:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(7267);const o=(0,a.eW)("正常"),i=(0,a.eW)("禁用"),s=(0,a.eW)("取 消"),d=(0,a.eW)("保 存");function r(e,l,t,r,n,u){const m=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-radio"),h=(0,a.g2)("el-tree"),f=(0,a.g2)("el-form"),b=(0,a.g2)("el-button"),g=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(g,{title:n.titleMap[n.mode],modelValue:n.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>n.visible=e),width:500,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(b,{onClick:l[4]||(l[4]=e=>n.visible=!1)},{default:(0,a.k6)((()=>[s])),_:1}),"show"!==n.mode?((0,a.uX)(),(0,a.Wv)(b,{key:0,type:"primary",loading:n.isSaveing,onClick:l[5]||(l[5]=e=>u.submit())},{default:(0,a.k6)((()=>[d])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(f,{model:n.form,rules:n.rules,disabled:"show"===n.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>["add"===n.mode?((0,a.uX)(),(0,a.Wv)(c,{key:0,label:"角色名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.name=e),clearable:""},null,8,["modelValue"])])),_:1})):((0,a.uX)(),(0,a.Wv)(c,{key:1,label:"角色名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.name=e),clearable:"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.bF)(c,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:n.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.status=e),label:"1"},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(p,{modelValue:n.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.status=e),label:"2"},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"分配权限",prop:"rule"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{data:n.treeData,"node-key":"id","show-checkbox":"","highlight-current":"","default-checked-keys":n.checkedId,ref:"menuTree",props:n.defaultProps},null,8,["data","default-checked-keys","props"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7414);var n={emits:["success","closed"],data(){return{checkedId:[15,16],treeData:[],defaultProps:{children:"children",label:"name",id:"id"},mode:"add",titleMap:{add:"新增角色",edit:"编辑角色",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",name:"",rule:"",status:"1"},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],rule:[{required:!0,message:"请分配权限",trigger:"blur"}]}}},mounted(){this.getAllMenu()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this.form.rule=this.checkedId,this},async getAllMenu(){let e=await this.$API.menu.getAllMenu.get();this.treeData=e.data,this.getListData()},getListData(){function e(l,t=[]){return l.forEach((l=>{if(l.children&&0!==l.children.length&&(t.push(l.id),l.children.length))return e(l.children,t)})),t}let l=e(this.treeData);const t=this.form.rule.filter((e=>{if(!l.includes(parseInt(e)))return e}));this.checkedId=t},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;{let e;this.isSaveing=!0;let l=this.$refs.menuTree.getCheckedNodes().concat(this.$refs.menuTree.getHalfCheckedNodes()),t=[];l.forEach((e=>{t.push(e.id)})),this.form.rule=t,e="add"===this.mode?await this.$API.role.add.post(this.form):await this.$API.role.edit.post(this.form),this.isSaveing=!1,0===e.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(e.msg)):this.$message.error(e.msg)}}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.status=e.status.toString(),this.form.rule=e.rule}}},u=t(1456);const m=(0,u.A)(n,[["render",r]]);var c=m},9829:function(e,l,t){t.r(l),t.d(l,{default:function(){return y}});var a=t(7267);const o=e=>((0,a.Qi)("data-v-59661f0a"),e=e(),(0,a.jt)(),e),i=(0,a.eW)("大佬房"),s=(0,a.eW)("密码房"),d={style:{display:"flex"}},r={style:{width:"300px"}},n={style:{width:"240px",display:"flex","margin-left":"20px"}},u=o((()=>(0,a.Lk)("div",null,"元",-1))),m=(0,a.eW)("选择奖品"),c=(0,a.eW)("删除"),p=(0,a.eW)("取 消"),h=(0,a.eW)("保 存");function f(e,l,t,o,f,b){const g=(0,a.g2)("el-radio"),k=(0,a.g2)("el-form-item"),_=(0,a.g2)("el-input"),y=(0,a.g2)("el-date-picker"),v=(0,a.g2)("el-button"),F=(0,a.g2)("el-table-column"),V=(0,a.g2)("el-image"),w=(0,a.g2)("el-table"),x=(0,a.g2)("el-form"),C=(0,a.g2)("Goods"),W=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(W,{title:f.titleMap[f.mode],modelValue:f.visible,"onUpdate:modelValue":l[11]||(l[11]=e=>f.visible=e),width:800,"destroy-on-close":"",onClosed:l[12]||(l[12]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(v,{onClick:l[8]||(l[8]=e=>f.visible=!1)},{default:(0,a.k6)((()=>[p])),_:1}),"show"!=f.mode?((0,a.uX)(),(0,a.Wv)(v,{key:0,type:"primary",loading:f.isSaveing,onClick:l[9]||(l[9]=e=>b.submit())},{default:(0,a.k6)((()=>[h])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(x,{model:f.form,rules:f.rules,disabled:"show"==f.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{label:"类型",prop:"type"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:f.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>f.form.type=e),label:1},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"]),(0,a.bF)(g,{modelValue:f.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>f.form.type=e),label:2},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"房间名称",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:f.form.title,"onUpdate:modelValue":l[2]||(l[2]=e=>f.form.title=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"描述",prop:"desc"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:f.form.desc,"onUpdate:modelValue":l[3]||(l[3]=e=>f.form.desc=e),rows:5,type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"开奖时间",prop:"reward_time"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:f.form.reward_time,"onUpdate:modelValue":l[4]||(l[4]=e=>f.form.reward_time=e),type:"datetime",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])])),_:1}),1==f.form.type?((0,a.uX)(),(0,a.Wv)(k,{key:0,label:"限制条件"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.Lk)("div",r,[(0,a.bF)(y,{modelValue:f.form.tips,"onUpdate:modelValue":l[5]||(l[5]=e=>f.form.tips=e),type:"daterange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px"}},null,8,["modelValue"])]),(0,a.Lk)("div",n,[(0,a.bF)(_,{modelValue:f.form.limit_amount,"onUpdate:modelValue":l[6]||(l[6]=e=>f.form.limit_amount=e)},null,8,["modelValue"]),u])])])),_:1})):(0,a.Q3)("",!0),2==f.form.type?((0,a.uX)(),(0,a.Wv)(k,{key:1,label:"房间密码"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:f.form.password,"onUpdate:modelValue":l[7]||(l[7]=e=>f.form.password=e),style:{width:"220px"}},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(k,{label:"选择奖品",prop:"reward"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{type:"primary",icon:"el-icon-plus",onClick:b.selectGoods},{default:(0,a.k6)((()=>[m])),_:1},8,["onClick"]),(0,a.bF)(w,{data:f.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(F,{prop:"goods_id",label:"ID"}),(0,a.bF)(F,{prop:"goods_name",label:"商品名称"}),(0,a.bF)(F,{label:"商品图片"},{default:(0,a.k6)((e=>[(0,a.bF)(V,{src:e.row.image,style:{height:"36px",width:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(F,{prop:"recovery_price",label:"可兑换哈希币"}),(0,a.bF)(F,{label:"操作",fixed:"right",width:"140"},{default:(0,a.k6)((e=>[(0,a.bF)(v,{onClick:l=>b.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[c])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["model","rules","disabled"]),(0,a.bF)(W,{title:"奖品选择",modelValue:f.dialogVisiable,"onUpdate:modelValue":l[10]||(l[10]=e=>f.dialogVisiable=e),"destroy-on-close":"",width:"50%"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{selectedgoods:f.selectedGoods,onHandleSelected:b.handleSelected,"goods-type":2},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}t(7414);var b=t(6480),g={components:{Goods:b.A},emits:["success","closed"],data(){return{mode:"add",dialogVisiable:!1,titleMap:{add:"新增福利房",edit:"编辑福利房",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",type:1,title:"",desc:"",reward_time:"",tips:"",limit_amount:0,password:"",reward:""},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择类型",trigger:"blur"}],title:[{required:!0,message:"请输入房间名称",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}],reward_time:[{required:!0,message:"开奖时间",trigger:"blur"}],reward:[{required:!0,message:"请选择奖品",trigger:"blur"}]},selectedGoods:[],tableData:[],allreadySelected:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.form.reward=this.tableData,this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.roll.add.post(this.form):await this.$API.roll.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},removeImg(){this.form.pic=""},setData(e){this.form.id=e.id,this.form.title=e.title,this.form.type=e.type,this.form.desc=e.desc,this.form.password=e.password,this.form.reward_time=e.reward_time,this.form.limit_amount=e.limit_amount,e.limit_start_time&&(this.form.tips=[e.limit_start_time,e.limit_end_time]),this.form.status=e.status,this.form.id&&this.getReward()},selectGoods(){this.dialogVisiable=!0},handleSelected(e){this.dialogVisiable=!1,e.forEach((e=>{-1==this.allreadySelected.indexOf(e.id)&&(this.allreadySelected.push(e.id),this.tableData.push({goods_id:e.id,goods_name:e.name,image:e.image.split(",")[0],recovery_price:e.recovery_price}))}))},handleDel(e){this.allreadySelected.splice(e,1),this.tableData.splice(e,1)},async getReward(){let e=await this.$API.roll.reward.get({id:this.form.id});this.allreadySelected=[],this.tableData=[],e.data.forEach((e=>{this.allreadySelected.push(e.id),this.tableData.push({goods_id:e.id,goods_name:e.goods_name,image:e.image,recovery_price:e.recovery_price})}))}}},k=t(1456);const _=(0,k.A)(g,[["render",f],["__scopeId","data-v-59661f0a"]]);var y=_},4464:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(7267);const o=(0,a.eW)("显示"),i=(0,a.eW)("隐藏"),s=(0,a.eW)("取 消"),d=(0,a.eW)("保 存");function r(e,l,t,r,n,u){const m=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-radio"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(b,{title:n.titleMap[n.mode],modelValue:n.visible,"onUpdate:modelValue":l[8]||(l[8]=e=>n.visible=e),width:600,"destroy-on-close":"",onClosed:l[9]||(l[9]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{onClick:l[6]||(l[6]=e=>n.visible=!1)},{default:(0,a.k6)((()=>[s])),_:1}),"show"!=n.mode?((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"primary",loading:n.isSaveing,onClick:l[7]||(l[7]=e=>u.submit())},{default:(0,a.k6)((()=>[d])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(h,{model:n.form,rules:n.rules,disabled:"show"==n.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"门店名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"门店地址",prop:"address"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.address,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.address=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"排序",prop:"sort"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"number",modelValue:n.form.sort,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"是否显示",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:1,modelValue:n.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(p,{label:2,modelValue:n.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.status=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"详情",prop:"info"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"textarea",modelValue:n.form.info,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.info=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var n={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增门店",edit:"编辑门店",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",address:"",sort:1,status:1,info:""},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.store.add.post(this.form):await this.$API.store.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.address=e.address,this.form.sort=e.sort,this.form.status=e.status,this.form.info=e.info}}},u=t(1456);const m=(0,u.A)(n,[["render",r],["__scopeId","data-v-ba6e22de"]]);var c=m},6528:function(e,l,t){t.r(l),t.d(l,{default:function(){return S}});var a=t(7267);const o=e=>((0,a.Qi)("data-v-9fd2101e"),e=e(),(0,a.jt)(),e),i=(0,a.eW)("首页"),s=(0,a.eW)("哈希币商城"),d=o((()=>(0,a.Lk)("span",{style:{color:"#f56c6c","margin-right":"4px"}},"*",-1))),r=(0,a.eW)(" 选择商品 "),n=(0,a.eW)("选择盲盒"),u=(0,a.eW)("选择商品"),m=(0,a.eW)("删除"),c=(0,a.eW)("删除"),p={class:"img-list"},h={key:0},f=["src"],b={class:"img-tools"},g=o((()=>(0,a.Lk)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：690*294 ",-1))),k=(0,a.eW)("正常"),_=(0,a.eW)("禁用"),y=(0,a.eW)("取 消"),v=(0,a.eW)("保 存");function F(e,l,t,o,F,V){const w=(0,a.g2)("el-radio"),x=(0,a.g2)("el-form-item"),C=(0,a.g2)("el-button"),W=(0,a.g2)("el-table-column"),I=(0,a.g2)("el-table"),S=(0,a.g2)("el-input"),$=(0,a.g2)("el-icon"),U=(0,a.g2)("el-form"),L=(0,a.g2)("el-dialog"),X=(0,a.g2)("Goods"),D=(0,a.g2)("Blindbox"),A=(0,a.g2)("Attachment");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(L,{title:F.titleMap[F.mode],modelValue:F.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>F.visible=e),width:900,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(C,{onClick:l[7]||(l[7]=e=>F.visible=!1)},{default:(0,a.k6)((()=>[y])),_:1}),"show"!=F.mode?((0,a.uX)(),(0,a.Wv)(C,{key:0,type:"primary",loading:F.isSaveing,onClick:l[8]||(l[8]=e=>V.submit())},{default:(0,a.k6)((()=>[v])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(U,{model:F.form,rules:F.rules,disabled:"show"==F.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{label:"位置",prop:"type"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:1,modelValue:F.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>F.form.type=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"]),(0,a.bF)(w,{label:2,modelValue:F.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>F.form.type=e)},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(x,null,{label:(0,a.k6)((()=>[d,r])),default:(0,a.k6)((()=>[1==F.form.type?((0,a.uX)(),(0,a.Wv)(C,{key:0,type:"primary",icon:"el-icon-plus",onClick:V.selectBlindbox,size:"small"},{default:(0,a.k6)((()=>[n])),_:1},8,["onClick"])):(0,a.Q3)("",!0),2==F.form.type?((0,a.uX)(),(0,a.Wv)(C,{key:1,type:"primary",icon:"el-icon-plus",onClick:V.selectGoods,size:"small"},{default:(0,a.k6)((()=>[u])),_:1},8,["onClick"])):(0,a.Q3)("",!0),1==F.form.type?((0,a.uX)(),(0,a.Wv)(I,{key:2,data:F.selectedBlindbox,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(W,{prop:"id",label:"ID"}),(0,a.bF)(W,{prop:"name",label:"盲盒名称"}),(0,a.bF)(W,{label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)(C,{onClick:l=>V.handleBoxDel(e.row),type:"text",size:"small"},{default:(0,a.k6)((()=>[m])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,a.Q3)("",!0),2==F.form.type?((0,a.uX)(),(0,a.Wv)(I,{key:3,data:F.selectedGoods,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(W,{prop:"id",label:"ID"}),(0,a.bF)(W,{prop:"name",label:"商品名"}),(0,a.bF)(W,{label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)(C,{onClick:l=>V.handleDel(e.row),type:"text",size:"small"},{default:(0,a.k6)((()=>[c])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(x,{label:"轮播描述",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(S,{modelValue:F.form.title,"onUpdate:modelValue":l[2]||(l[2]=e=>F.form.title=e),placeholder:"轮播描述",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(x,{label:"封面图",prop:"pic"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",p,[F.form.pic?((0,a.uX)(),(0,a.CE)("li",h,[(0,a.Lk)("img",{src:F.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,f),(0,a.Lk)("div",b,[(0,a.bF)($,{style:{"font-size":"14px",color:"#fff"},onClick:l[3]||(l[3]=e=>V.removeIcon())},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(F.deleteIcon)))])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[4]||(l[4]=(...e)=>V.showImage&&V.showImage(...e))},[(0,a.bF)($,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(F.plusIcon)))])),_:1})])]),g])])),_:1}),(0,a.bF)(x,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:1,modelValue:F.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>F.form.status=e)},{default:(0,a.k6)((()=>[k])),_:1},8,["modelValue"]),(0,a.bF)(w,{label:2,modelValue:F.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>F.form.status=e)},{default:(0,a.k6)((()=>[_])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.bF)(L,{title:"商品选择",modelValue:F.dialogVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>F.dialogVisible=e),"destroy-on-close":"",width:"50%"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{selectedgoods:F.selectedGoods,onHandleSelected:V.handleSelected,"goods-type":1},null,8,["selectedgoods","onHandleSelected"])])),_:1},8,["modelValue"]),(0,a.bF)(L,{title:"盲盒选择",modelValue:F.blindboxVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>F.blindboxVisible=e),"destroy-on-close":"",width:"50%"},{default:(0,a.k6)((()=>[(0,a.bF)(D,{selectedBlindbox:F.selectedBlindbox,onHandleSelected:V.handleBoxSelected},null,8,["selectedBlindbox","onHandleSelected"])])),_:1},8,["modelValue"]),(0,a.bF)(L,{title:"选择资源",modelValue:F.resourceVisible,"onUpdate:modelValue":l[13]||(l[13]=e=>F.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(A,{"select-num":1,onSelectedFiles:V.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var V=t(940),w=t(7561),x=t(4783),C={emits:["success","closed"],components:{Attachment:V.A,Goods:w.A,Blindbox:x.A},data(){return{mode:"add",titleMap:{add:"添加轮播配置",edit:"编辑轮播配置"},dialogVisible:!1,blindboxVisible:!1,visible:!1,isSaveing:!1,form:{type:1,status:1},options:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择位置",trigger:"blur"}],title:[{required:!0,message:"请填写轮播描述",trigger:"blur"}],pic:[{required:!0,message:"请选择图片",trigger:"blur"}]},resourceVisible:!1,selectedGoods:[],selectedBlindbox:[]}},mounted(){},methods:{open(e){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.sliderSetting.add.post(this.form):await this.$API.sliderSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},selectGoods(){this.dialogVisible=!0},selectBlindbox(){this.blindboxVisible=!0},handleDel(){this.selectedGoods=[],this.form.goods_id=0,this.form.goods_name="",this.form.goods_type=0},handleBoxDel(){this.selectedBlindbox=[],this.form.blindbox_id=0,this.form.blindbox_name=""},setData(e){this.form.type=e.type,this.form.id=e.id,this.form.title=e.title,this.form.goods_id=e.goods_id,this.form.goods_name=e.goods_name,this.form.goods_type=e.goods_type,this.form.pic=e.pic,this.form.status=e.status,this.form.blindbox_id=e.blindbox_id,this.form.blindbox_name=e.blindbox_name,2==e.type?this.selectedGoods=[{id:e.goods_id,name:e.goods_name}]:this.selectedBlindbox=[{id:e.blindbox_id,name:e.blindbox_name}]},handleSelected(e){this.selectedGoods=e,this.form.goods_id=this.selectedGoods[0].id,this.form.goods_type=1,this.form.goods_name=this.selectedGoods[0].name,this.dialogVisible=!1},handleBoxSelected(e){this.selectedBlindbox=e,this.form.blindbox_id=this.selectedBlindbox[0].id,this.form.blindbox_name=this.selectedBlindbox[0].name,this.form.other=this.selectedBlindbox[0].price,this.form.goods_type=2,this.blindboxVisible=!1}}},W=t(1456);const I=(0,W.A)(C,[["render",F],["__scopeId","data-v-9fd2101e"]]);var S=I},2217:function(e,l,t){t.r(l),t.d(l,{default:function(){return y}});var a=t(7267);const o={class:"img-list"},i={key:0},s=["src"],d={class:"img-list"},r={key:0},n=["src"],u={style:{width:"100%",display:"flex"}},m=(0,a.eW)("显示"),c=(0,a.eW)("隐藏"),p=(0,a.eW)("取 消"),h=(0,a.eW)("保 存");function f(e,l,t,f,b,g){const k=(0,a.g2)("el-input"),_=(0,a.g2)("el-form-item"),y=(0,a.g2)("el-icon-delete"),v=(0,a.g2)("el-icon"),F=(0,a.g2)("el-icon-plus"),V=(0,a.g2)("el-option"),w=(0,a.g2)("el-select"),x=(0,a.g2)("el-radio"),C=(0,a.g2)("el-form"),W=(0,a.g2)("el-button"),I=(0,a.g2)("el-dialog"),S=(0,a.g2)("Attachment");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(I,{title:b.titleMap[b.mode],modelValue:b.visible,"onUpdate:modelValue":l[14]||(l[14]=e=>b.visible=e),width:800,"destroy-on-close":"",onClosed:l[15]||(l[15]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(W,{onClick:l[12]||(l[12]=e=>b.visible=!1)},{default:(0,a.k6)((()=>[p])),_:1}),"show"!==b.mode?((0,a.uX)(),(0,a.Wv)(W,{key:0,type:"primary",loading:b.isSaveing,onClick:l[13]||(l[13]=e=>g.submit())},{default:(0,a.k6)((()=>[h])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(C,{model:b.form,rules:b.rules,ref:"addForm","label-width":"140px"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{label:"等级名称",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>b.form.title=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"等级值",prop:"level"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.level,"onUpdate:modelValue":l[1]||(l[1]=e=>b.form.level=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"解锁需经验值达到",prop:"experience"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.experience,"onUpdate:modelValue":l[2]||(l[2]=e=>b.form.experience=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"图标",prop:"icon"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",o,[b.form.icon?((0,a.uX)(),(0,a.CE)("li",i,[(0,a.Lk)("img",{src:b.form.icon,style:{width:"58px",height:"58px"},alt:"图片"},null,8,s),(0,a.Lk)("div",{class:"img-tools",onClick:l[3]||(l[3]=e=>g.removeImg(1))},[(0,a.bF)(v,{style:{color:"#fff"}},{default:(0,a.k6)((()=>[(0,a.bF)(y)])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[4]||(l[4]=e=>g.showImage(1))},[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(F)])),_:1})])])])])),_:1}),(0,a.bF)(_,{label:"背景图",prop:"card_bg"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",d,[b.form.card_bg?((0,a.uX)(),(0,a.CE)("li",r,[(0,a.Lk)("img",{src:b.form.card_bg,style:{width:"58px",height:"58px"},alt:"图片"},null,8,n),(0,a.Lk)("div",{class:"img-tools",onClick:l[5]||(l[5]=e=>g.removeImg(2))},[(0,a.bF)(v,{style:{color:"#fff"}},{default:(0,a.k6)((()=>[(0,a.bF)(y)])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",{class:"addImg",onClick:l[6]||(l[6]=e=>g.showImage(2))},[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(F)])),_:1})])])])])),_:1}),(0,a.bF)(_,{label:"赠送优惠券"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",u,[(0,a.bF)(w,{style:{width:"48%"},modelValue:b.form.present.coupon,"onUpdate:modelValue":l[7]||(l[7]=e=>b.form.present.coupon=e),placeholder:"选择优惠券",clearable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.couponList,(e=>((0,a.uX)(),(0,a.Wv)(V,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(k,{style:{width:"48%","margin-left":"4%"},modelValue:b.form.present.coupon_num,"onUpdate:modelValue":l[8]||(l[8]=e=>b.form.present.coupon_num=e),type:"number"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(_,{label:"是否显示",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:b.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>b.form.status=e),label:1},{default:(0,a.k6)((()=>[m])),_:1},8,["modelValue"]),(0,a.bF)(x,{modelValue:b.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>b.form.status=e),label:2},{default:(0,a.k6)((()=>[c])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(_,{label:"等级说明",prop:"remark"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:b.form.remark,"onUpdate:modelValue":l[11]||(l[11]=e=>b.form.remark=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"]),(0,a.bF)(I,{title:"选择资源",modelValue:b.imgResourceVisible,"onUpdate:modelValue":l[16]||(l[16]=e=>b.imgResourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(S,{"select-num":1,onSelectedFiles:g.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var b=t(940),g={components:{Attachment:b.A},emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增会员等级",edit:"编辑会员等级",show:"查看"},infoFilled:"el-icon-InfoFilled",visible:!1,isSaveing:!1,form:{id:0,title:"",level:0,discount:"1.00",experience:0,icon:"",card_bg:"",status:1,remark:"",present:{coupon:"",coupon_num:1,prop:"",prop_num:1}},couponList:[],rules:{title:[{required:!0,message:"等级名称",trigger:"blur"}],level:[{required:!0,message:"请选择状态",trigger:"blur"}],experience:[{required:!0,message:"请输入解锁经验",trigger:"blur"}]},imgResourceVisible:!1,imgType:1}},mounted(){this.getCouponList()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},showImage(e){this.imgResourceVisible=!0,this.imgType=e},submit(){"edit"===this.mode?this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userLevel.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)})):this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userLevel.add.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},async getCouponList(){let e=await this.$API.coupon.getAll.get();this.couponList=e.data},setData(e){console.log("数据信息",e),this.form.id=e.id,this.form.title=e.title,this.form.level=e.level,this.form.discount=e.discount,this.form.experience=e.experience,this.form.balance=e.balance,this.form.status=e.status,this.form.icon=e.icon,this.form.card_bg=e.card_bg,this.form.remark=e.remark,e.present.forEach((e=>{1==e.type?(this.form.present.coupon=e.present_id,this.form.present.coupon_num=e.present_num):2==e.type&&(this.form.present.prop=e.present_id+"",this.form.present.prop_num=e.present_num)}))},selectedFiles(e){1==this.imgType?this.form.icon=e[0].url:2==this.imgType&&(this.form.card_bg=e[0].url),this.imgResourceVisible=!1},removeImg(e){1==e?this.form.icon="":this.form.card_bg=""}}},k=t(1456);const _=(0,k.A)(g,[["render",f],["__scopeId","data-v-a6644202"]]);var y=_},551:function(e,l,t){t.r(l),t.d(l,{default:function(){return b}});var a=t(7267);const o=(0,a.eW)("正常"),i=(0,a.eW)("禁用"),s=(0,a.eW)("开启"),d=(0,a.eW)("关闭"),r=(0,a.eW)("开启"),n=(0,a.eW)("关闭"),u=(0,a.eW)("取 消"),m=(0,a.eW)("保 存");function c(e,l,t,c,p,h){const f=(0,a.g2)("el-input"),b=(0,a.g2)("el-form-item"),g=(0,a.g2)("el-radio"),k=(0,a.g2)("el-date-picker"),_=(0,a.g2)("el-form"),y=(0,a.g2)("el-button"),v=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(v,{title:p.titleMap[p.mode],modelValue:p.visible,"onUpdate:modelValue":l[15]||(l[15]=e=>p.visible=e),width:600,"destroy-on-close":"",onClosed:l[16]||(l[16]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(y,{onClick:l[13]||(l[13]=e=>p.visible=!1)},{default:(0,a.k6)((()=>[u])),_:1}),"show"!==p.mode?((0,a.uX)(),(0,a.Wv)(y,{key:0,type:"primary",loading:p.isSaveing,onClick:l[14]||(l[14]=e=>h.submit())},{default:(0,a.k6)((()=>[m])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>["edit"===p.mode?((0,a.uX)(),(0,a.Wv)(_,{key:0,model:p.form,rules:p.editRules,disabled:"show"===p.mode,ref:"editForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"昵称",prop:"nickname"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:p.form.nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>p.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"手机号"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"number",modelValue:p.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>p.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"登录密码"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"number",modelValue:p.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>p.form.password=e),placeholder:"输入即为更改",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:1,modelValue:p.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[o])),_:1},8,["modelValue"]),(0,a.bF)(g,{label:2,modelValue:p.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"生日",style:{width:"620px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:p.form.birthday,"onUpdate:modelValue":l[5]||(l[5]=e=>p.form.birthday=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"推广权限",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:1,modelValue:p.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[s])),_:1},8,["modelValue"]),(0,a.bF)(g,{label:0,modelValue:p.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[d])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):"add"===p.mode?((0,a.uX)(),(0,a.Wv)(_,{key:1,model:p.form,rules:p.addRules,disabled:"show"===p.mode,ref:"addForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"手机号",prop:"phone"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"number",modelValue:p.form.phone,"onUpdate:modelValue":l[8]||(l[8]=e=>p.form.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"密码",prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:p.form.password,"onUpdate:modelValue":l[9]||(l[9]=e=>p.form.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"生日",style:{width:"620px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:p.form.birthday,"onUpdate:modelValue":l[10]||(l[10]=e=>p.form.birthday=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{label:"推广权限",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:1,modelValue:p.form.status,"onUpdate:modelValue":l[11]||(l[11]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[r])),_:1},8,["modelValue"]),(0,a.bF)(g,{label:0,modelValue:p.form.status,"onUpdate:modelValue":l[12]||(l[12]=e=>p.form.status=e)},{default:(0,a.k6)((()=>[n])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):(0,a.Q3)("",!0)])),_:1},8,["title","modelValue"])}var p={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增会员",edit:"编辑会员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",nickname:"",avatar:"",phone:"",password:"",integral:0,balance:0,status:1,birthday:"",is_promotion:1},deleteIcon:"el-icon-delete",editRules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入哈希币",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},addRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){"edit"===this.mode?this.$refs.editForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)})):this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.add.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.nickname=e.nickname,this.form.avatar=e.avatar,this.form.phone=e.phone,this.form.integral=e.integral,this.form.balance=e.balance,this.form.status=e.status,this.form.birthday=e.birthday,this.form.is_promotion=e.is_promotion}}},h=t(1456);const f=(0,h.A)(p,[["render",c],["__scopeId","data-v-2c4568f8"]]);var b=f},9365:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.eW)("取 消"),i=(0,a.eW)("保 存");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-input"),u=(0,a.g2)("el-form-item"),m=(0,a.g2)("el-cascader"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-button"),h=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>d.visible=e),width:700,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(p,{onClick:l[4]||(l[4]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[o])),_:1}),"show"!==d.mode?((0,a.uX)(),(0,a.Wv)(p,{key:0,type:"primary",loading:d.isSaveing,onClick:l[5]||(l[5]=e=>r.submit())},{default:(0,a.k6)((()=>[i])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(c,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"130px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"收件人姓名",prop:"receiver"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:d.form.receiver,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.receiver=e),placeholder:"收件人姓名",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"收件人手机号",prop:"phone"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"number",onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",oninput:"if (isNaN(value)) {value = parseFloat(value)}\n\t\t\t\t\t\t   if (value.includes('-')) {value = '0'}",modelValue:d.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.phone=e),placeholder:"收件人",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"收件人省市区"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{width:"100%"},modelValue:d.selected_areas,"onUpdate:modelValue":l[2]||(l[2]=e=>d.selected_areas=e),options:d.areas,onChange:r.handleChange},null,8,["modelValue","options","onChange"])])),_:1}),(0,a.bF)(u,{label:"收件人详细地址",prop:"address"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:d.form.address,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.address=e),placeholder:"收件人详细地址",clearable:"",type:"textarea",rows:3},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7414);var d={emits:["success","closed"],data(){return{selected_areas:[],areas:[],mode:"edit",titleMap:{edit:"编辑会员地址",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",receiver:"",phone:"",province_code:"",city_code:"",area_code:"",address:""},rules:{receiver:[{required:!0,message:"请输入收件人名",trigger:"blur"}],phone:[{required:!0,message:"请输入收件人手机号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}}},mounted(){this.getAreas()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAreas(){let e=await this.$API.userAddress.areas.get();this.areas=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,this.form.province_code=this.selected_areas[0],this.form.city_code=this.selected_areas[1],this.form.area_code=this.selected_areas[2],l=await this.$API.userAddress.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.receiver=e.receiver,this.form.phone=e.phone,this.form.province_code=e.province_code,this.form.city_code=e.city_code,this.form.area_code=e.area_code,this.form.address=e.address,this.selected_areas.push(parseInt(e.province_code)),this.selected_areas.push(parseInt(e.city_code)),this.selected_areas.push(parseInt(e.area_code))},handleChange(e){console.log(e)}}},r=t(1456);const n=(0,r.A)(d,[["render",s],["__scopeId","data-v-cbb68bdc"]]);var u=n},5774:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267),o=t(5710);const i=(0,a.eW)("取 消");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-timeline-item"),u=(0,a.g2)("el-timeline"),m=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-button"),h=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[i])),_:1})])),default:(0,a.k6)((()=>[(0,a.bF)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"物流信息"},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.activities,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{key:l,timestamp:e.timestamp},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(1456);const n=(0,r.A)(d,[["render",s],["__scopeId","data-v-5805082a"]]);var u=n},3928:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(7267),o=t(5710);function i(e,l,t,i,s,d){const r=(0,a.g2)("el-descriptions-item"),n=(0,a.g2)("el-tag"),u=(0,a.g2)("el-descriptions"),m=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(m,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{label:"订单号:"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.order_no),1)])),_:1}),(0,a.bF)(r,{label:"支付订单号:"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.pay_no),1)])),_:1}),(0,a.bF)(r,{label:"支付金额:"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{size:"small",type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.amount),1)])),_:1})])),_:1}),(0,a.bF)(r,{label:"支付时间:"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.pay_time),1)])),_:1}),(0,a.bF)(r,{label:"支付方式:"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.pay_way_txt),1)])),_:1}),(0,a.bF)(r,{label:"支付状态:"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{size:"small"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.status_txt),1)])),_:1})])),_:1}),(0,a.bF)(r,{label:"三方单号:"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.info.third_no),1)])),_:1})])),_:1})])),_:1},8,["title","modelValue"])}var s={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看订单支付信息"},visible:!1,info:{}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.getInfo(e.express_order_id)},async getInfo(e){let l=await this.$API.userBoxDeliver.expressOrder.get({id:e});this.info=l.data}}},d=t(1456);const r=(0,d.A)(s,[["render",i]]);var n=r},4557:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267);const o=(0,a.eW)("取 消"),i=(0,a.eW)("确认发货");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-option"),u=(0,a.g2)("el-select"),m=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-input"),p=(0,a.g2)("el-switch"),h=(0,a.g2)("el-table-column"),f=(0,a.g2)("el-image"),b=(0,a.g2)("el-table"),g=(0,a.g2)("el-form"),k=(0,a.g2)("el-button"),_=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(_,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>d.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(k,{onClick:l[4]||(l[4]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[o])),_:1}),"show"!==d.mode?((0,a.uX)(),(0,a.Wv)(k,{key:0,type:"primary",loading:d.isSaveing,onClick:l[5]||(l[5]=e=>r.submit())},{default:(0,a.k6)((()=>[i])),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(g,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"物流公司名称",prop:"express_name"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),onChange:r.expressChange,style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.expressList,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.bF)(m,{label:"物流公司编码",prop:"express_code"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.express_code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"物流单号",prop:"express_no"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:d.form.express_no,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{label:"是否开启分单"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:d.form.splitOrder,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.splitOrder=e)},null,8,["modelValue"])])),_:1}),d.form.splitOrder?((0,a.uX)(),(0,a.Wv)(m,{key:0,label:"订单商品"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{data:d.tableData,style:{width:"100%"},onSelectionChange:r.handleSelectionChange},{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"selection",width:"55"}),(0,a.bF)(h,{prop:"id",label:"ID"}),(0,a.bF)(h,{label:"商品图片"},{default:(0,a.k6)((e=>[(0,a.bF)(f,{src:e.row.reward.goods_image,style:{width:"36px",height:"36px"}},null,8,["src"])])),_:1}),(0,a.bF)(h,{prop:"reward.goods_name",label:"商品名称"})])),_:1},8,["data","onSelectionChange"])])),_:1})):(0,a.Q3)("",!0)])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7414);var d={emits:["success","closed"],data(){return{areas:[],mode:"deliver",titleMap:{deliver:"发货",show:"查看"},expressList:[],visible:!1,isSaveing:!1,form:{id:"",express_name:"",express_code:"",express_no:"",splitOrder:!1,detailIds:[]},rules:{express_name:[{required:!0,message:"请输入物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]},tableData:[]}},mounted(){this.getExpressList()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userBoxDeliver.deliver.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.getOrderDetail()},handleChange(e){console.log(e)},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((l=>{l.name==e&&(this.form.express_code=l.code)}))},async getOrderDetail(){let e=await this.$API.userBoxDeliverDetail.detail.get({deliver_id:this.form.id});this.tableData=e.data},handleSelectionChange(e){this.form.detailIds=[],e.forEach((e=>{this.form.detailIds.push(e.id)}))}}},r=t(1456);const n=(0,r.A)(d,[["render",s],["__scopeId","data-v-a5c0ab9c"]]);var u=n},7884:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(7267),o=t(5710);const i=(0,a.eW)("取 消");function s(e,l,t,s,d,r){const n=(0,a.g2)("el-timeline-item"),u=(0,a.g2)("el-timeline"),m=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-button"),h=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.k6)((()=>[(0,a.bF)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.k6)((()=>[i])),_:1})])),default:(0,a.k6)((()=>[(0,a.bF)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"物流信息"},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.activities,((e,l)=>((0,a.uX)(),(0,a.Wv)(n,{key:l,timestamp:e.timestamp},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(1456);const n=(0,r.A)(d,[["render",s],["__scopeId","data-v-71fa4142"]]);var u=n},1044:function(e,l,t){t.r(l),t.d(l,{default:function(){return Q}});var a=t(7267),o=t(5710);const i=(0,a.eW)("年卡"),s=(0,a.eW)("批量设置"),d={key:0,class:"month-box"},r={class:"title"},n=["onClick"],u={key:0},m={key:1,class:"month-box",style:{"flex-wrap":"wrap",width:"990px"}},c={class:"title"},p=["onClick"],h={key:0},f=(0,a.eW)(" （-1表示无限制） "),b=(0,a.eW)(" （-1表示无限制） "),g=(0,a.eW)("正常"),k=(0,a.eW)("作废"),_=(0,a.eW)(" 提交 "),y=(0,a.eW)("添加"),v=(0,a.eW)(" 使用设置 "),F={key:0},V={key:1},w={key:0},x={key:1},C=(0,a.eW)("删除"),W=(0,a.eW)("添加"),I=(0,a.eW)(" 使用设置 "),S={key:0},$={key:1},U={key:0},L={key:1},X=(0,a.eW)("删除");function D(e,l,t,D,A,q){const E=(0,a.g2)("el-input"),P=(0,a.g2)("el-form-item"),Q=(0,a.g2)("el-radio"),M=(0,a.g2)("el-button"),z=(0,a.g2)("el-form"),O=(0,a.g2)("el-card"),N=(0,a.g2)("resource"),B=(0,a.g2)("el-dialog"),T=(0,a.g2)("el-table-column"),G=(0,a.g2)("el-table"),R=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.Wv)(R,null,{default:(0,a.k6)((()=>[(0,a.bF)(O,{shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(z,{model:A.form,"label-width":"150px",rules:A.formRules,ref:"ruleForm"},{default:(0,a.k6)((()=>[(0,a.bF)(P,{label:"会员卡名",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"500px"},modelValue:A.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>A.form.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,a.bF)(P,{label:"类型",prop:"type"},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{modelValue:A.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>A.form.type=e),label:3},{default:(0,a.k6)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(P,{label:"设置会员卡",class:"set-card"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(M,{type:"primary",onClick:q.batchSet},{default:(0,a.k6)((()=>[s])),_:1},8,["onClick"])]),1==A.form.type?((0,a.uX)(),(0,a.CE)("div",d,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(A.sevenDay,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"card-item",key:e.day},[(0,a.Lk)("div",r,[(0,a.eW)(" 第"+(0,o.v_)(e.day)+"天 ",1),(0,a.Lk)("span",{style:{color:"#409eff",cursor:"pointer","margin-left":"80px"},onClick:e=>q.editCard(l)},"设置",8,n)]),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.award,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:l},[(0,a.eW)((0,o.v_)(e.name)+" ",1),"balance"==e.type?((0,a.uX)(),(0,a.CE)("span",u,(0,o.v_)(e.value),1)):(0,a.Q3)("",!0),(0,a.eW)(" * "+(0,o.v_)(e.num),1)])))),128))])])))),128))])):(0,a.Q3)("",!0),3==A.form.type?((0,a.uX)(),(0,a.CE)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(A.monthDay,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"card-item",key:e.day},[(0,a.Lk)("div",c,[(0,a.eW)(" 第"+(0,o.v_)(e.day)+"天 ",1),(0,a.Lk)("span",{style:{color:"#409eff",cursor:"pointer","margin-left":"70px"},onClick:e=>q.editCard(l)},"设置",8,p)]),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.award,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:l},[(0,a.eW)((0,o.v_)(e.name)+" ",1),"balance"==e.type?((0,a.uX)(),(0,a.CE)("span",h,(0,o.v_)(e.value),1)):(0,a.Q3)("",!0),(0,a.eW)(" * "+(0,o.v_)(e.num),1)])))),128))])])))),128))])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(P,{label:"价格",prop:"price"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"500px"},modelValue:A.form.price,"onUpdate:modelValue":l[2]||(l[2]=e=>A.form.price=e),autocomplete:"off",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.bF)(P,{label:"库存",prop:"stock"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"500px"},modelValue:A.form.stock,"onUpdate:modelValue":l[3]||(l[3]=e=>A.form.stock=e),autocomplete:"off",type:"number"},null,8,["modelValue"]),f])),_:1}),(0,a.bF)(P,{label:"每人限制",prop:"one_limit"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"500px"},modelValue:A.form.one_limit,"onUpdate:modelValue":l[4]||(l[4]=e=>A.form.one_limit=e),autocomplete:"off",type:"number"},null,8,["modelValue"]),b])),_:1}),(0,a.bF)(P,{label:"描述"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"500px"},modelValue:A.form.description,"onUpdate:modelValue":l[5]||(l[5]=e=>A.form.description=e),autocomplete:"off",rows:8,type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.bF)(P,{label:"状态",prop:"status"},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{modelValue:A.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>A.form.status=e),label:1},{default:(0,a.k6)((()=>[g])),_:1},8,["modelValue"]),(0,a.bF)(Q,{modelValue:A.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>A.form.status=e),label:2},{default:(0,a.k6)((()=>[k])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(M,{type:"primary",class:"button-item",onClick:q.onSubmit,loading:e.btnloading},{default:(0,a.k6)((()=>[_])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.bF)(B,{title:"选择资源",modelValue:A.imgResourceVisible,"onUpdate:modelValue":l[8]||(l[8]=e=>A.imgResourceVisible=e),width:1350,"destroy-on-close":"","close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(N,{onSelectedResource:q.handleResource},null,8,["onSelectedResource"])])),_:1},8,["modelValue"]),(0,a.bF)(B,{title:"批量设置",modelValue:A.awardBatchDialog,"onUpdate:modelValue":l[10]||(l[10]=e=>A.awardBatchDialog=e),width:700,"destroy-on-close":"","close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(M,{type:"primary",onClick:l[9]||(l[9]=e=>q.showResource(1))},{default:(0,a.k6)((()=>[y])),_:1}),(0,a.bF)(M,{type:"success",onClick:q.saveSet},{default:(0,a.k6)((()=>[v])),_:1},8,["onClick"]),(0,a.bF)(G,{data:A.awardDay,style:{width:"100%","margin-top":"10px"},border:""},{default:(0,a.k6)((()=>[(0,a.bF)(T,{label:"类型"},{default:(0,a.k6)((e=>["balance"==e.row.type?((0,a.uX)(),(0,a.CE)("span",F,"余额")):(0,a.Q3)("",!0),"coupon"==e.row.type?((0,a.uX)(),(0,a.CE)("span",V,"优惠券")):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(T,{prop:"name",label:"名称"}),(0,a.bF)(T,{label:"数量"},{default:(0,a.k6)((e=>["balance"==e.row.type?((0,a.uX)(),(0,a.CE)("span",w,(0,o.v_)(e.row.value),1)):((0,a.uX)(),(0,a.CE)("span",x,(0,o.v_)(e.row.num),1))])),_:1}),(0,a.bF)(T,{label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)(M,{onClick:l=>q.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[C])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue"]),(0,a.bF)(B,{title:"单独设置",modelValue:A.awardDialog,"onUpdate:modelValue":l[12]||(l[12]=e=>A.awardDialog=e),width:700,"destroy-on-close":"","close-on-click-modal":!1},{default:(0,a.k6)((()=>[(0,a.bF)(M,{type:"primary",onClick:l[11]||(l[11]=e=>q.showResource(2))},{default:(0,a.k6)((()=>[W])),_:1}),(0,a.bF)(M,{type:"success",onClick:q.saveSet},{default:(0,a.k6)((()=>[I])),_:1},8,["onClick"]),(0,a.bF)(G,{data:A.awardOneDay,style:{width:"100%","margin-top":"10px"},border:""},{default:(0,a.k6)((()=>[(0,a.bF)(T,{label:"类型"},{default:(0,a.k6)((e=>["balance"==e.row.type?((0,a.uX)(),(0,a.CE)("span",S,"余额")):(0,a.Q3)("",!0),"coupon"==e.row.type?((0,a.uX)(),(0,a.CE)("span",$,"优惠券")):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(T,{prop:"name",label:"名称"}),(0,a.bF)(T,{label:"数量"},{default:(0,a.k6)((e=>["balance"==e.row.type?((0,a.uX)(),(0,a.CE)("span",U,(0,o.v_)(e.row.value),1)):((0,a.uX)(),(0,a.CE)("span",L,(0,o.v_)(e.row.num),1))])),_:1}),(0,a.bF)(T,{label:"操作"},{default:(0,a.k6)((e=>[(0,a.bF)(M,{onClick:l=>q.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.k6)((()=>[X])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue"])])),_:1})}t(7414);var A=t(7835),q={name:"vip_add",components:{resource:A.A},data(){return{form:{type:3,title:"",price:0,stock:-1,one_limit:-1,description:"",status:1,equity:""},imgResourceVisible:!1,formRules:{title:[{required:!0,message:"请输入会员卡名",trigger:"blur"}],type:[{required:!0,message:"会员卡类型",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],stock:[{required:!0,message:"请输入库存",trigger:"blur"}],one_limit:[{required:!0,message:"累计购买限制",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},sevenDay:[],monthDay:[],awardDay:[],awardOneDay:[],awardBatchDialog:!1,awardDialog:!1,resourceType:1,nowIndex:0,type:"add",id:0}},mounted(){this.initDayMap(7),this.initDayMap(365)},methods:{async onSubmit(){this.$refs.ruleForm.validate((async e=>{if(e){let e;1==this.form.type?this.form.equity=this.sevenDay:this.form.equity=this.monthDay,e=this.form.id?await this.$API.vipCard.edit.post(this.form):await this.$API.vipCard.add.post(this.form),0==e.code?(this.$message.success(e.msg),setTimeout((()=>{this.$emit("save")}),500)):this.$message.error(e.msg)}}))},initDayMap(e){for(let l=0;l<e;l++)7==e?this.sevenDay.push({day:l+1,award:[]}):this.monthDay.push({day:l+1,award:[]})},setMode(e,l){return this.type=e,this.id=l,"edit"==this.type&&this.getCardInfo(this.id),this},batchSet(){this.awardBatchDialog=!0},editCard(e){let l;this.awardDialog=!0,l=1==this.form.type?this.sevenDay[e].award:this.monthDay[e].award,this.awardOneDay=JSON.parse(JSON.stringify(l)),this.nowIndex=e},showResource(e){this.resourceType=e,this.imgResourceVisible=!0},handleResource(e){this.imgResourceVisible=!1,1==this.resourceType?this.awardDay.push(e):this.awardOneDay.push(e)},handleDel(e){this.awardBatchDialog&&this.awardDay.splice(e,1),this.awardDialog&&this.awardOneDay.splice(e,1)},saveSet(){if(this.awardBatchDialog)if(this.awardBatchDialog=!1,1==this.form.type)for(let e=0;e<7;e++)this.sevenDay[e].award=this.awardDay;else for(let e=0;e<365;e++)this.monthDay[e].award=this.awardDay;this.awardDialog&&(this.awardDialog=!1,1==this.form.type?this.sevenDay[this.nowIndex].award=this.awardOneDay:this.monthDay[this.nowIndex].award=this.awardOneDay)},async getCardInfo(e){let l=await this.$API.vipCard.info.get({id:e}),t=l.data;this.form.id=t.id,this.form.type=t.type,this.form.title=t.title,this.form.price=t.price,this.form.stock=t.stock,this.form.one_limit=t.one_limit,this.form.description=t.description,this.form.status=t.status,1==this.form.type?this.sevenDay=JSON.parse(t.equity):this.monthDay=JSON.parse(t.equity)}}},E=t(1456);const P=(0,E.A)(q,[["render",D],["__scopeId","data-v-70b8c5af"]]);var Q=P}}]);