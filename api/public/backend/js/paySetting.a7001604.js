"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[5085],{9023:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(7267);const i=(0,t.eW)("保存"),p=(0,t.eW)("开启"),d=(0,t.eW)("关闭"),o=(0,t.eW)("点击上传"),m=(0,t.eW)("点击上传"),u=(0,t.eW)("保存"),_=(0,t.eW)("开启"),r=(0,t.eW)("关闭"),s=(0,t.eW)("保存");function c(e,a,l,c,n,h){const f=(0,t.g2)("el-input"),y=(0,t.g2)("el-form-item"),w=(0,t.g2)("el-button"),b=(0,t.g2)("el-form"),k=(0,t.g2)("el-tab-pane"),F=(0,t.g2)("el-radio"),x=(0,t.g2)("el-upload"),V=(0,t.g2)("el-tabs"),g=(0,t.g2)("el-card"),U=(0,t.g2)("el-main");return(0,t.uX)(),(0,t.Wv)(U,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{shadow:"never"},{default:(0,t.k6)((()=>[(0,t.bF)(V,{modelValue:n.activeName,"onUpdate:modelValue":a[13]||(a[13]=e=>n.activeName=e)},{default:(0,t.k6)((()=>[(0,t.bF)(k,{label:"API地址",name:"first"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{ref:"form",model:n.apiform,"label-width":"120px"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"API地址",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.apiform.api_url,"onUpdate:modelValue":a[0]||(a[0]=e=>n.apiform.api_url=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"H5网站地址",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.apiform.h5_web_url,"onUpdate:modelValue":a[1]||(a[1]=e=>n.apiform.h5_web_url=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{style:{"margin-top":"50px"}},{default:(0,t.k6)((()=>[(0,t.bF)(w,{type:"primary",onClick:h.apiSubmit,style:{width:"200px"}},{default:(0,t.k6)((()=>[i])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.bF)(k,{label:"微信支付",name:"second"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{ref:"form",model:n.wxform,"label-width":"120px"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"是否开启"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{label:"1",modelValue:n.wxform.wechat_pay_open,"onUpdate:modelValue":a[2]||(a[2]=e=>n.wxform.wechat_pay_open=e)},{default:(0,t.k6)((()=>[p])),_:1},8,["modelValue"]),(0,t.bF)(F,{label:"0",modelValue:n.wxform.wechat_pay_open,"onUpdate:modelValue":a[3]||(a[3]=e=>n.wxform.wechat_pay_open=e)},{default:(0,t.k6)((()=>[d])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"小程序appId",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.wxform.wechat_miniapp_id,"onUpdate:modelValue":a[4]||(a[4]=e=>n.wxform.wechat_miniapp_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"APP的appId",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.wxform.wechat_pay_appid,"onUpdate:modelValue":a[5]||(a[5]=e=>n.wxform.wechat_pay_appid=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"商户ID(Mchid)",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.wxform.wechat_pay_mchid,"onUpdate:modelValue":a[6]||(a[6]=e=>n.wxform.wechat_pay_mchid=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"APIv2密钥(Key)",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.wxform.wechat_pay_key,"onUpdate:modelValue":a[7]||(a[7]=e=>n.wxform.wechat_pay_key=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"支付证书",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(x,{action:n.uploadUrl,limit:1,"on-success":h.handleOnSuccessCert,headers:n.headers,"file-list":n.wechat_pay_cert},{default:(0,t.k6)((()=>[(0,t.bF)(w,{size:"small",type:"primary"},{default:(0,t.k6)((()=>[o])),_:1})])),_:1},8,["action","on-success","headers","file-list"])])),_:1}),(0,t.bF)(y,{label:"支付证书秘钥",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(x,{action:n.uploadUrl,limit:1,headers:n.headers,"on-success":h.handleOnSuccessPem,"file-list":n.wechat_pay_pem},{default:(0,t.k6)((()=>[(0,t.bF)(w,{size:"small",type:"primary"},{default:(0,t.k6)((()=>[m])),_:1})])),_:1},8,["action","headers","on-success","file-list"])])),_:1}),(0,t.bF)(y,{style:{"margin-top":"50px"}},{default:(0,t.k6)((()=>[(0,t.bF)(w,{type:"primary",onClick:h.wxSubmit,style:{width:"200px"}},{default:(0,t.k6)((()=>[u])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.bF)(k,{label:"支付宝支付",name:"third"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{ref:"form",model:n.aliform,"label-width":"120px"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"是否开启"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{label:"1",modelValue:n.aliform.alipay_open,"onUpdate:modelValue":a[8]||(a[8]=e=>n.aliform.alipay_open=e)},{default:(0,t.k6)((()=>[_])),_:1},8,["modelValue"]),(0,t.bF)(F,{label:"0",modelValue:n.aliform.alipay_open,"onUpdate:modelValue":a[9]||(a[9]=e=>n.aliform.alipay_open=e)},{default:(0,t.k6)((()=>[r])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"APPID",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.aliform.alipay_app_id,"onUpdate:modelValue":a[10]||(a[10]=e=>n.aliform.alipay_app_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"支付宝应用私钥",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.aliform.alipay_private_key,"onUpdate:modelValue":a[11]||(a[11]=e=>n.aliform.alipay_private_key=e),type:"textarea",rows:9},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"支付宝公钥",style:{width:"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:n.aliform.alipay_public_key,"onUpdate:modelValue":a[12]||(a[12]=e=>n.aliform.alipay_public_key=e),type:"textarea",rows:8},null,8,["modelValue"])])),_:1}),(0,t.bF)(y,{style:{"margin-top":"50px"}},{default:(0,t.k6)((()=>[(0,t.bF)(w,{type:"primary",onClick:h.aliSubmit,style:{width:"200px"}},{default:(0,t.k6)((()=>[s])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}var n=l(2383),h=l(9253),f={name:"paySettingIndex",data(){return{uploadUrl:n.A.API_URL+"/system.paySetting/uploadTxtFile",labelPosition:"left",activeName:"first",wechat_pay_cert:[],wechat_pay_pem:[],apiform:{api_url:"",h5_web_url:""},wxform:{wechat_pay_open:"",wechat_miniapp_id:"",wechat_pay_mchid:"",wechat_pay_key:"",wechat_pay_cert:"",wechat_pay_pem:""},aliform:{alipay_open:"",alipay_app_id:"",alipay_private_key:"",alipay_public_key:""},headers:{Authorization:"Bearer "+h.A.cookie.get("TOKEN")}}},mounted(){this.getBaseConf()},methods:{handleOnSuccessCert(e){0==e.code&&(this.wxform.wechat_pay_cert=e.data.url,this.wechat_pay_cert[0]=e.data)},handleOnSuccessPem(e){0==e.code&&(this.wxform.wechat_pay_pem=e.data.url,this.wechat_pay_pem[0]=e.data)},async getBaseConf(){let e=await this.$API.paySetting.payConfig.get();this.wxform=e.data.wechat_pay,this.aliform=e.data.alipay,this.apiform.api_url=e.data.api_url.api_url,this.apiform.h5_web_url=e.data.api_url.h5_web_url,this.wechat_pay_cert=[{name:e.data.wechat_pay.wechat_pay_cert,url:e.data.wechat_pay.wechat_pay_cert}],this.wechat_pay_pem=[{name:e.data.wechat_pay.wechat_pay_pem,url:e.data.wechat_pay.wechat_pay_pem}]},async apiSubmit(){let e=await this.$API.paySetting.save.post(this.apiform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)},async wxSubmit(){let e=await this.$API.paySetting.save.post(this.wxform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)},async aliSubmit(){let e=await this.$API.paySetting.save.post(this.aliform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)}}},y=l(1456);const w=(0,y.A)(f,[["render",c]]);var b=w}}]);